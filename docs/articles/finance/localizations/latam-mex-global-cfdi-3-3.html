<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Global CFDI electronic invoices for Mexico | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Global CFDI electronic invoices for Mexico | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../commerce/TOC.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="global-cfdi-electronic-invoices-for-mexico">Global CFDI electronic invoices for Mexico</h1>


<p>The Commerce functionality for Mexico supports the Comprobantes fiscales digitales por internet (CFDI) format for Mexican companies. For more information about CFDI electronic invoices, see <a href="https://docs.microsoft.com/dynamics365/unified-operations/financials/localizations/latam-mex-cfdi-electronic-invoices">Electronic invoices (CFDI)</a>. When a company closes the daily process, it must issue a Global CFDI document to consolidate all receipts that were issued to the final consumers. This document includes the following information for each transaction that is registered during the period:</p>
<ul>
<li>A receipt number</li>
<li>A corresponding amount</li>
</ul>
<h2 id="processing-global-cfdi-documents">Processing Global CFDI documents</h2>
<p>The Global CFDI functionality lets you perform the following tasks:</p>
<ul>
<li><p>Create an electronic invoice, in Global CFDI format (layout 3.3), that is based on the posted commerce statement. For more information about the layout, see <a href="https://docs.microsoft.com/dynamics365/unified-operations/financials/localizations/latam-mex-cfdi-3-3">CFDI layout version 3.3</a>.</p>
</li>
<li><p>For each electronic invoice generate a file in the .pdf or .xml format, and send it to the customer as an email attachment. After the Global CFDI electronic invoices are generated, they are verified and certified by a digital signature service provider (PAC) in the same way as other CFDI documents. For more information, see <a href="https://docs.microsoft.com/dynamics365/unified-operations/financials/localizations/latam-mex-cfdi-electronic-invoices">Electronic invoices (CFDI)</a> and <a href="https://docs.microsoft.com/dynamics365/finance/localizations/tasks/mx-00010-inquire-print-electronic-invoice">Inquire and print an electronic invoice</a>.</p>
</li>
</ul>
<p>To generate and submit a Global CFDI electronic invoice, follow these steps.</p>
<ol>
<li><p>As a preparatory step, on the <strong>Retail</strong> tab of the <strong>Electronic invoice parameters</strong> page (<strong>Organization administration &gt; Setup &gt; EInvoice &gt; Electronic invoice parameters</strong>), you must specify the default parameters of the Global CFDI format.</p>
</li>
<li><p>Close the shift at the point of sale (POS).</p>
</li>
<li><p>Run the P-job in the distribution schedule to transfer transactions from the channel database to Headquarters.</p>
</li>
<li><p>Calculate and post a statement by following the steps in <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/tasks/create-calculate-post-statement-retail-store">Create, calculate, and post a statement for a retail store</a>.</p>
</li>
<li><p>Run the <strong>Post CFDI – Electronic invoices</strong> periodic operation to create Global CFDI electronic invoices that are based on a posted statement. You can select a statement number for this periodic operation. If you don't select a statement number, the system creates Global CFDI electronic invoices for all posted statements that haven't yet been processed.</p>
<p>As a result of the <strong>Post CFDI – Electronic invoices</strong> periodic operation, two Global CFDI electronic invoices are created. One electronic invoice collects all receipts that are related to sales operations, and the other collects all receipts that are related to returns. For the electronic invoice that is related to returns, the <strong>Return</strong> attribute is set to <strong>Yes</strong>. You can view these electronic invoices on the <strong>CFDI (electronic invoices)</strong> page (<strong>Retail and Commerce &gt; Inquiries and reports &gt; CFDI (electronic invoices)</strong>).</p>
<p>All further workflows, such as communication with a service provider, generation of the .pdf and .xml files, and manual functions are the same as the workflows for CFDI Normal electronic invoices.</p>
</li>
<li><p>Run the <strong>Export/import electronic invoice process</strong> periodic operation to submit electronic invoices to the PAC.</p>
</li>
</ol>
<h2 id="updates-for-the-global-cfdi-functionality">Updates for the Global CFDI functionality</h2>
<p>In Microsoft Dynamics 365 for Finance and Operations version 10.0.2 (May 2019), the Global CFDI functionality was extended to support new requirements that were introduced in the second revision of the <em>Global CFDI filling guide</em>. Starting in Microsoft Dynamics 365 for Finance and Operations version 10.0.2 (May 2019), you can perform the following tasks:</p>
<ul>
<li><p>At the customer's request, generate a separate CFDI Normal electronic invoice that is based on a sale or return operation that is registered at the POS.</p>
<p>In this case, the sale or return operation should be registered as a customer order. For more information about the functionality for customer orders, see <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/customer-orders-overview">Customer orders in Modern POS (MPOS)</a>.</p>
</li>
<li><p>In a CFDI electronic invoice that is generated based on returns, specify universally unique identifiers (UUIDs) for CFDI electronic invoices that are related to the original sales operations.</p>
</li>
</ul>
<p>Starting in Dynamics 365 for Finance and Operations version 10.0.2 (May 2019), the Global CFDI functionality also supports the following additional scenarios:</p>
<ul>
<li><a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/multireturn">Item returns across multiple customer orders and invoices</a></li>
<li>Customer order returns that involve an exchange, when a customer invoice includes both lines that have positive amounts and lines that have negative amounts</li>
</ul>
<h3 id="showing-related-cfdi-documents-in-a-cfdi-electronic-invoice">Showing related CFDI documents in a CFDI electronic invoice</h3>
<p>To show the UUIDs of the original sales in CFDI electronic invoices for returns, turn on the <strong>Specify related CFDI in returns</strong> parameter on the <strong>Retail</strong> tab of the <strong>Electronic invoice parameters</strong> page (<strong>Organization administration &gt; Setup &gt; EInvoice &gt; Electronic invoice parameters</strong>). After you turn on this parameter, both Global CFDI and CFDI Normal documents are generated that include the following information:</p>
<ul>
<li>A list of related electronic invoices.</li>
<li>A status of <strong>Draft</strong>. (This status is a new status that was introduced in version 10.0.2). An electronic invoice is automatically set to this status if a UUID isn't specified for all the related electronic invoices. The <strong>Export/import electronic invoice process</strong> periodic procedure skips all electronic invoices that have a status of <strong>Draft</strong>.</li>
<li>An XML file that is generated, where the <strong>CFDI relacionados</strong> section contains the list of related electronic invoices. You can view the list of related electronic invoices by selecting <strong>Inquiries &gt; Related e-invoices</strong>. You can also manually add a new related electronic invoice on the same page.</li>
</ul>
<p>The status of electronic invoices is automatically updated later, when all related electronic invoices get their UUIDs. To manually update the status of an electronic invoice, you can use the <strong>Mark as ready</strong> function. The status of the electronic invoice will be changed, and it will become available for export.</p>
<h3 id="excluding-customer-orders-from-global-cfdi-electronic-invoices">Excluding customer orders from Global CFDI electronic invoices</h3>
<p>To process customer orders as CFDI Normal electronic invoices in the same way that sales orders are processed in the <strong>Accounts receivable</strong> module, and to exclude those operations from the Global CFDI electronic invoices, turn on the <strong>Exclude customer orders from CFDI Global</strong> parameter on the <strong>Retail</strong> tab of the <strong>Electronic invoice parameters</strong> page (<strong>Organization administration &gt; Setup &gt; EInvoice &gt; Electronic invoice parameters</strong>). After you turn on this parameter, a separate electronic invoice is created based on each sale or return operation that is posted via a customer order at the POS.</p>
<p>The following customer order operations can cause a CFDI Normal electronic invoice to be posted:</p>
<ul>
<li>Customer order pickup</li>
<li>Customer order return</li>
<li>Hybrid customer order (For more information about this scenario, see <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/hybrid-customer-orders">Hybrid customer orders</a>.)</li>
</ul>
<p>When the <strong>Exclude customer orders from CFDI Global</strong> parameter is turned off, and no previous customer invoice was posted from the same customer order and processed as a separate electronic invoice (CFDI Normal), customer orders are included in Global CFDI electronic invoices. Otherwise, customer orders are processed as separate electronic invoices (CFDI Normal). Therefore, they are excluded from Global CFDI electronic invoices.</p>
<p>Customer order returns are processed in the same way (either CFDI Global or CFDI Normal) as the original sales operations.</p>
<h3 id="limitations">Limitations</h3>
<p>Note the following limitations:</p>
<ul>
<li>All invoices from an original sales order are included in a return electronic invoice as the related CFDI documents.</li>
<li>The scenario of a customer order return that involves an exchange is supported only for Global CFDI electronic invoices.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/togoAIO/d365Doku/blob/main/articles/finance/localizations/latam-mex-global-cfdi-3-3.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
