<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Synchronize sales quotation headers and lines directly from Sales to Supply Chain Management | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Synchronize sales quotation headers and lines directly from Sales to Supply Chain Management | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../fin-ops-core/dev-itpro/toc.html">
    
    <meta property="docfx:rel" content="../../../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="synchronize-sales-quotation-headers-and-lines-directly-from-sales-to-supply-chain-management">Synchronize sales quotation headers and lines directly from Sales to Supply Chain Management</h1>

[!include[rename-banner](~/includes/cc-data-platform-banner.md)]
<p>The topic discusses the templates and underlying tasks that are used to synchronize sales quotation headers and lines directly from Dynamics 365 Sales to Dynamics 365 Supply Chain Management.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Before you can use the Prospect to cash solution, you should be familiar with <a href="https://docs.microsoft.com/powerapps/administrator/data-integrator">Integrate data into Microsoft Dataverse for Apps</a>.</p>
</div>
<h2 id="data-flow-in-prospect-to-cash">Data flow in Prospect to cash</h2>
<p>The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Supply Chain Management and Sales. The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Supply Chain Management and Sales. The following illustration shows how the data is synchronized between Supply Chain Management and Sales.</p>
<p><a href="media/prospect-to-cash-data-flow.png"><img src="media/prospect-to-cash-data-flow.png" alt="Data flow in Prospect to cash"></a></p>
<h2 id="template-and-tasks">Template and tasks</h2>
<p>The following template and underlying tasks are used to synchronize sales quotation headers and lines directly from Sales to Supply Chain Management:</p>
<ul>
<li><p><strong>Name of the template in Data integration:</strong> Sales Quotes (Sales to Supply Chain Management) - Direct</p>
</li>
<li><p><strong>Names of the tasks in the Data integration project:</strong></p>
<ul>
<li>QuoteHeader</li>
<li>QuoteLine</li>
</ul>
</li>
</ul>
<p>The following synchronization tasks are required before synchronization of sales quotation headers and lines can occur:</p>
<ul>
<li>Products (Supply Chain Management to Sales) - Direct</li>
<li>Accounts (Sales to Supply Chain Management) - Direct (if used)</li>
<li>Contacts to Customers (Sales to Supply Chain Management) - Direct (if used)</li>
</ul>
<h2 id="entity-set">Entity set</h2>
<table>
<thead>
<tr>
<th>Sales</th>
<th>Supply Chain Management</th>
</tr>
</thead>
<tbody>
<tr>
<td>Quotes</td>
<td>Dataverse sales quotation header</td>
</tr>
<tr>
<td>QuoteDetails</td>
<td>Dataverse sales quotation lines</td>
</tr>
</tbody>
</table>
<h2 id="entity-flow">Entity flow</h2>
<p>Sales quotations are created in Sales and synchronized to Supply Chain Management.</p>
<p>Sales quotations from Sales are synchronized only if the following conditions are met:</p>
<ul>
<li>All quote products on the sales quotation are externally maintained.</li>
<li>After you click <strong>Activate quote</strong>, the sales quotation is active.</li>
</ul>
<h2 id="prospect-to-cash-solution-for-sales">Prospect to cash solution for Sales</h2>
<p>The <strong>Has Externally Maintained Products Only</strong> field has been added to the <strong>Quote</strong> entity to consistently track whether the sales quotation consists entirely of externally maintained products. If a sales quotation has only externally maintained products, the products are maintained in Supply Chain Management. This behavior helps guarantee that you don't try to synchronize sales quotation lines that have products that are unknown to Supply Chain Management.</p>
<p>All quote products on the sales quotation are updated with the <strong>Has Externally Maintained Products Only</strong> information from the sales quotation header. This information is found in the <strong>Quote Has Externally Maintained Products Only</strong> field on the <strong>QuoteDetails</strong> entity.</p>
<p>A discount can be added to the quote product and will be synchronized to Supply Chain Management. The <strong>Discount</strong>, <strong>Charges</strong>, and <strong>Tax</strong> fields on the header are controlled by a setup in Supply Chain Management. Currently, this setup doesn't support integration mapping. In the current design, the <strong>Price</strong>, <strong>Discount</strong>, <strong>Charge</strong>, and <strong>Tax</strong> fields are maintained and handled in FSupply Chain Management.</p>
<p>In Sales, the solution makes the following fields read-only, because the values aren't synchronized to Supply Chain Management:</p>
<ul>
<li>Read-only fields on the sales quotation header: <strong>Discount %</strong>, <strong>Discount</strong>, and <strong>Freight Amount</strong></li>
<li>Read-only fields on quote products: <strong>Tax</strong></li>
</ul>
<h2 id="preconditions-and-mapping-setup">Preconditions and mapping setup</h2>
<p>Before sales quotations are synchronized, it's important that you update the following settings.</p>
<h3 id="setup-in-sales">Setup in Sales</h3>
<ul>
<li><p>Make sure that permissions are set up for the team that the user from your connection set in Sales is assigned to. If you're using demo data, the user usually has admin access, but the team doesn't have admin access. If the team doesn't have admin access when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</p>
<p>To set up permissions for the team, go to <strong>Settings</strong> &gt; <strong>Security</strong> &gt; <strong>Teams</strong>, and select the relevant team. Select <strong>Manage Roles</strong>, and then select a role that has the desired permissions, such as <strong>System Administrator</strong>.</p>
</li>
<li><p>Go to <strong>Settings</strong> &gt; <strong>Administration</strong> &gt; <strong>System settings</strong> &gt; <strong>Sales</strong>, and make sure that the following settings are used:</p>
<ul>
<li>The <strong>Use system prizing calculation system</strong> option is set to <strong>Yes</strong>.</li>
<li>The <strong>Discount calculation method</strong> field is set to <strong>Line item</strong>.</li>
</ul>
</li>
</ul>
<h3 id="setup-in-the-data-integration-project">Setup in the Data integration project</h3>
<h4 id="quoteheader">QuoteHeader</h4>
<ul>
<li><p>Make sure that the required mapping exists for <strong>Shipto_country</strong> to <strong>DeliveryAddressCountryRegionISOCode</strong>. In the value map, you can define a default value that is used if the value is left blank. Just leave the left side blank, and set the right side to the desired country or region. In this way, you don't have to type the country or region for national orders.</p>
<p>The template value is a value map where several countries or regions are mapped, and where a blank value equals a value of <strong>US</strong>.</p>
</li>
</ul>
<h4 id="quoteline">QuoteLine</h4>
<ul>
<li><p>Make sure that the required value map exists for <strong>SalesUnitSymbol</strong> in Supply Chain Management.</p>
</li>
<li><p>Make sure that the required units are defined in Sales.</p>
<p>A template value that has a value map is defined for <strong>oumid.name</strong> to <strong>SalesUnitSymbol</strong>.</p>
</li>
<li><p>Optional: You can add the following mappings to help guarantee that sales quotation lines are imported into Supply Chain Management if there is no default information from either the customer or the product:</p>
<ul>
<li><strong>SiteId</strong> – A site is required in order to generate quotations and sales order lines in Supply Chain Management. There is no default template value for <strong>SiteId</strong>.</li>
<li><strong>WarehouseId</strong> – A warehouse is required in order to process quotations and sales order lines in Supply Chain Management. There is no default template value for <strong>WarehouseId</strong>.</li>
</ul>
</li>
</ul>
<h2 id="template-mapping-in-data-integrator">Template mapping in data integrator</h2>
<div class="NOTE">
<h5>Note</h5>
<ul>
<li>The <strong>Discount</strong>, <strong>Charges</strong>, and <strong>Tax</strong> fields are controlled by a complex setup in Supply Chain Management. Currently, this setup doesn't support integration mapping. In the current design, the <strong>Price</strong>, <strong>Discount</strong>, <strong>Charge</strong>, and <strong>Tax</strong> fields are handled by Supply Chain Management.</li>
<li>The <strong>Payment terms</strong>, <strong>Freight terms</strong>, <strong>Delivery terms</strong>, <strong>Shipping method</strong>, and <strong>Delivery mode</strong> fields aren't part of the default mappings. To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</li>
</ul>
</div>
<p>The following illustrations show an example of a template mapping in data integrator.</p>
<h3 id="quoteheader-1">QuoteHeader</h3>
<p><img src="media/sales-quotation-direct-template-mapping-data-integrator-1.png" alt="Template mapping in data integrator"></p>
<h3 id="quoteline-1">QuoteLine</h3>
<p><img src="media/sales-quotation-direct-template-mapping-data-integrator-2.png" alt="Template mapping in data integrator"></p>
<h2 id="related-topics">Related topics</h2>
<p><a href="prospect-to-cash.html">Prospect to cash</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/togoAIO/d365Doku/blob/main/articles/supply-chain/sales-marketing/sales-quotation-template-mapping-sales-fin.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
