<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Inventory availability in dual-write | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Inventory availability in dual-write | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../../index.html">
                <img id="logo" class="svg" src="../../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="inventory-availability-in-dual-write">Inventory availability in dual-write</h1>


<p>By using inventory availability, you can check your inventory before you add a product to the <strong>Quotations</strong>, <strong>Orders</strong>, or <strong>Invoices</strong> page in Microsoft Dynamics 365 Sales. For example, you check inventory and determine a fulfillment date as one key task in the <a href="dual-write-prospect-to-cash.html">prospect-to-cash</a> process.</p>
<p>If you don't have enough inventory, you can estimate a delivery date, based on projected inventory receipts and issues. You can also check the product's available-to-promise (ATP) information, where you can find the ATP quantity in the predefined time fence.</p>
<h2 id="on-hand-inventory">On-hand inventory</h2>
<p>In Dynamics 365 Sales, a new <strong>On-hand Inventory</strong> button has been added to the header of the <strong>Quotes</strong>, <strong>Orders</strong>, and <strong>Invoices</strong> pages. When you select this button, a dialog box appears, where you can specify the company and the product that you want to check the on-hand inventory for. This dialog box shows the same information as <a href="../../../../supply-chain/inventory/tasks/check-availability-stock.html">On-hand inventory</a>.</p>
<p>The dialog box returns the inventory information from Dynamics 365 Supply Chain Management. This information includes the following quantities:</p>
<ul>
<li>On-hand quantity</li>
<li>Reserved on-hand quantity</li>
<li>Available on-hand quantity</li>
<li>Ordered quantity</li>
<li>On-order quantity</li>
<li>Reserved ordered quantity</li>
<li>Total available quantity</li>
</ul>
<h2 id="atp-information">ATP information</h2>
<p>In Sales, a new <strong>ATP Information</strong> button has been added to line items on the <strong>Quotes</strong>, <strong>Orders</strong>, and <strong>Invoices</strong> pages. When you select this button, a dialog box appears, where you can specify the company, product, inventory site, inventory warehouse, and order quantity. This dialog box has the same settings that are described in <a href="../../../../supply-chain/sales-marketing/delivery-dates-available-promise-calculations.html#atp-calculations">Order promising</a>.</p>
<p>The dialog box returns the ATP information from Supply Chain Management. This information includes the following quantities:</p>
<ul>
<li>ATP quantity</li>
<li>Receipt quantity</li>
<li>Issue quantity</li>
<li>On-hand quantity</li>
</ul>
<h2 id="how-it-works">How it works</h2>
<p>When you select the <strong>On-hand Inventory</strong> button on the <strong>Quotes</strong>, <strong>Orders</strong>, or <strong>Invoices</strong> page, a live dual-write call is made to the <strong>Onhand inventory</strong> API. The API calculates the on-hand inventory for the given product. The result is stored in the <strong>InventCDSInventoryOnHandRequestEntity</strong> and <strong>InventCDSInventoryOnHandEntryEntity</strong> tables, and then is written to Dataverse by dual-write. To use this functionality, you need to run the following dual-write maps. Skip initial synchronization when you run the maps.</p>
<ul>
<li>CDS inventory on-hand entries (msdyn_inventoryonhandentries)</li>
<li>CDS inventory on-hand requests (msdyn_inventoryonhandrequests)</li>
</ul>
<h2 id="templates">Templates</h2>
<p>The following templates are available for the exposing the onhand inventory data.</p>
<table>
<thead>
<tr>
<th>Finance and Operations apps</th>
<th>Customer engagement app</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#145">CDS inventory on-hand entries</a></td>
<td>msdyn_inventoryonhandentries</td>
<td></td>
</tr>
<tr>
<td><a href="#147">CDS inventory on-hand requests</a></td>
<td>msdyn_inventoryonhandrequests</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="mapping-tables">Mapping tables</h2>
<h3 id="mapping-types">Mapping types</h3>
<p>There are several different mapping types. The following table explains the symbols used in the template tables.</p>
<table>
<thead>
<tr>
<th>Symbol</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>&gt;</td>
<td>One-way</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>One-way, and data is transformed in the process.</td>
</tr>
<tr>
<td>=</td>
<td>Bidirectional</td>
</tr>
<tr>
<td>&gt;&lt;</td>
<td>Bidirectional, and data is transformed in the process.</td>
</tr>
<tr>
<td>&lt;&lt;</td>
<td>One-way, and data is transformed in the process.</td>
</tr>
</tbody>
</table>
<h3 id="filters">Filters</h3>
<p>The source filter and reverse source filter determine which rows are synchronized.</p>
<h3 id="default-values">Default values</h3>
<p>If a synchronized field does not exist in either the Finance and Operations table or the other Dynamics 365 table, then a default value is assigned in the synchronized table. In some cases, the default value is an integer that is a lookup to an attribute value in the Common Data Model. For example, in the Contacts table of the Common Data Model, the default value of <a href="customer-mapping.html#customers-v3-to-contacts"><strong>address1_addresstypecode</strong></a> is <strong>3</strong>. In the Common Data Model, for <a href="https://docs.microsoft.com/common-data-model/schema/core/applicationcommon/foundationcommon/contact#address1AddressTypeCode">address1AddressTypeCode</a> the value of <strong>3</strong> is <strong>Primary address</strong>.</p>
<h3 id="145">CDS inventory on-hand entries (msdyn_inventoryonhandentries)</h3>
<p>This template synchronizes data between Finance and Operations apps and Dataverse.</p>
<table>
<thead>
<tr>
<th>Finance and Operations field</th>
<th>Map type</th>
<th>Customer engagement field</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REQUESTID</code></td>
<td>=</td>
<td><code>msdyn_request.msdyn_requestid</code></td>
<td></td>
</tr>
<tr>
<td><code>INVENTORYSITEID</code></td>
<td>=</td>
<td><code>msdyn_inventorysite.msdyn_siteid</code></td>
<td></td>
</tr>
<tr>
<td><code>INVENTORYWAREHOUSEID</code></td>
<td>=</td>
<td><code>msdyn_inventorywarehouse.msdyn_warehouseidentifier</code></td>
<td></td>
</tr>
<tr>
<td><code>AVAILABLEONHANDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_availableonhandquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>AVAILABLEORDEREDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_availableorderedquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>ONHANDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_onhandquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>ONORDERQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_onorderquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>ORDEREDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_orderedquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>RESERVEDONHANDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_reservedonhandquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>RESERVEDORDEREDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_reservedorderedquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>TOTALAVAILABLEQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_totalavailablequantity</code></td>
<td></td>
</tr>
<tr>
<td><code>ATPDATE</code></td>
<td>=</td>
<td><code>msdyn_atpdate</code></td>
<td></td>
</tr>
<tr>
<td><code>ATPQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_atpquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>PROJECTEDISSUEQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_projectedissuequantity</code></td>
<td></td>
</tr>
<tr>
<td><code>PROJECTEDONHANDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_projectedonhandquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>PROJECTEDRECEIPTQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_projectedreceiptquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>ORDERQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_orderquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>UNAVAILABLEONHANDQUANTITY</code></td>
<td>&gt;</td>
<td><code>msdyn_unavailableonhandquantity</code></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="147">CDS inventory on-hand requests (msdyn_inventoryonhandrequests)</h3>
<p>This template synchronizes data between Finance and Operations apps and Dataverse.</p>
<table>
<thead>
<tr>
<th>Finance and Operations field</th>
<th>Map type</th>
<th>Customer engagement field</th>
<th>Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REQUESTID</code></td>
<td>=</td>
<td><code>msdyn_requestid</code></td>
<td></td>
</tr>
<tr>
<td><code>PRODUCTNUMBER</code></td>
<td>&lt;</td>
<td><code>msdyn_product.msdyn_productnumber</code></td>
<td></td>
</tr>
<tr>
<td><code>ISATPCALCULATION</code></td>
<td>&lt;&lt;</td>
<td><code>msdyn_isatpcalculation</code></td>
<td></td>
</tr>
<tr>
<td><code>ORDERQUANTITY</code></td>
<td>&lt;</td>
<td><code>msdyn_orderquantity</code></td>
<td></td>
</tr>
<tr>
<td><code>INVENTORYSITEID</code></td>
<td>&lt;</td>
<td><code>msdyn_inventorysite.msdyn_siteid</code></td>
<td></td>
</tr>
<tr>
<td><code>INVENTORYWAREHOUSEID</code></td>
<td>&lt;</td>
<td><code>msdyn_inventorywarehouse.msdyn_warehouseidentifier</code></td>
<td></td>
</tr>
<tr>
<td><code>REFERENCENUMBER</code></td>
<td>&lt;</td>
<td><code>msdyn_referencenumber</code></td>
<td></td>
</tr>
<tr>
<td><code>LINECREATIONSEQUENCENUMBER</code></td>
<td>&lt;</td>
<td><code>msdyn_linecreationsequencenumber</code></td>
<td></td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../../styles/main.js"></script>
  </body>
</html>
