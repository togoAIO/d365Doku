<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Manage several derived mappings for a single model root | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Manage several derived mappings for a single model root | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../finance/TOC.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="manage-several-derived-mappings-for-a-single-model-root">Manage several derived mappings for a single model root</h1>


<p>An <a href="general-electronic-reporting.html">Electronic reporting (ER)</a> data <a href="general-electronic-reporting.html#data-model-and-model-mapping-components">model</a> component is used in every configured ER <a href="general-electronic-reporting.html#FormatComponentOutbound">format</a> component as the data source to generate outbound documents. To describe a single business domain, configure a data model component that has many root definitions.</p>
<p>Every root definition lets you represent data of that domain in the way that is best suited to specific reporting purposes. For every root definition, you can configure an ER <a href="general-electronic-reporting.html#data-model-and-model-mapping-components">model mapping</a> component as the Microsoft Dynamics 365 Finance–specific implementation of your data model. In this way, you describe how your data model will be filled in at runtime.</p>
<p>ER model mapping components can reside in ER data model <a href="general-electronic-reporting.html#Configuration">configurations</a> and ER model mapping configurations. A single ER configuration can contain many mapping components, each of which is configured for a single root definition. Alternatively, a single ER configuration can contain just one mapping component that is configured for a single root definition.</p>
<p>Many configuration providers might offer ER model mapping configurations for the same ER data model. Those model mapping configurations might contain mapping components for different root definitions. You might use a model mapping for one root definition that is offered by one <a href="general-electronic-reporting.html#Provider">provider</a> and use a model mapping for another root definition that is offered by another provider.</p>
<p>The procedures in this topic explain how to manage multiple ER model mapping configurations of an ER data model when they contain different model mapping components configured for the same root definition.</p>
<p>To complete the procedures in this topic, you must be assigned to the System administrator or Electronic reporting developer role.</p>
<p>All the following procedures can be done in the USMF company. No coding is required.</p>
<h2 id="configure-the-er-framework">Configure the ER framework</h2>
<p>As a user in the Electronic reporting developer role, <a href="er-quick-start2-customize-report.html#ConfigureFramework">configure the minimal set</a> of ER parameters before you use the ER framework to generate business documents.</p>
<h2 id="import-the-standard-er-format-configurations">Import the standard ER format configurations</h2>
<p>To add the standard ER configurations to your current instance of Finance, you must import them from the ER repository that was configured for that instance. Follow the steps in <a href="er-download-configurations-global-repo.html">Download ER configurations from the Global repository of Configuration service</a> to import the following ER format configurations:</p>
<ul>
<li><strong>Free text invoice (Excel)</strong>, version 220.106</li>
<li><strong>Project invoice (Excel)</strong>, version 226.27</li>
</ul>
<h2 id="review-the-imported-er-configurations">Review the imported ER configurations</h2>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</p>
</li>
<li><p>On the <strong>Localization configurations</strong> page, in the <strong>Configurations</strong> section, select the <strong>Reporting configurations</strong> tile.</p>
</li>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, expand <strong>Invoice model</strong>.</p>
<p><img src="media/er-multiple-model-mappings-image1.png" alt="Reviewing the imported configurations on the Configurations page"></p>
</li>
<li><p>Review the <strong>Free text invoice (Excel)</strong> format:</p>
<ol>
<li><p>In the configuration tree in the left pane, select <strong>Free text invoice (Excel)</strong>.</p>
</li>
<li><p>On the Action Pane, select <strong>Designer</strong>.</p>
</li>
<li><p>On the <strong>Format designer</strong> page, on the <strong>Mapping</strong> tab, in the data sources list, select <strong>Model</strong>.</p>
</li>
<li><p>Select <strong>View</strong>.</p>
<p>Thecurrent ER format is configured to use the <strong>InvoiceCustomer</strong> root definition of <strong>Invoice model</strong>. When this format is run, and the <strong>Model</strong> data source is called, the model mapping that is configured for the <strong>InvoiceCustomer</strong> root definition is used to access application data and fill in the data model.</p>
<p><img src="media/er-multiple-model-mappings-image2.png" alt="Reviewing the model data source on the Format designer page"></p>
</li>
<li><p>Close the <strong>Format designer</strong> page.</p>
</li>
</ol>
</li>
<li><p>Review the content of the <strong>Invoice model mapping</strong> configuration:</p>
<ol>
<li><p>In the configuration tree in the left pane, select <strong>Invoice model mapping</strong>.</p>
</li>
<li><p>On the Action Pane, select <strong>Designer</strong>.</p>
</li>
<li><p>On the <strong>Model to datasource mapping</strong> page, notice that the current ER model mapping configuration contains several model mapping components:</p>
<ul>
<li>The <strong>Customer Invoice</strong> model mapping is configured for the <strong>InvoiceCustomer</strong> root definition of <strong>Invoice model</strong>. Therefore, when the <strong>Free text invoice (Excel)</strong> ER format is run, the <strong>Customer Invoice</strong> model mapping of this ER configuration can be chosen to access application data and fill in the data model.</li>
<li>The <strong>Project Invoice</strong> model mapping is configured for the <strong>InvoiceProject</strong> root definition of <strong>Invoice model</strong>. Therefore, when the <strong>Project invoice (Excel)</strong> ER format is run, the <strong>Project Invoice</strong> model mapping of this ER configuration can be chosen to access application data and fill in the data model.</li>
</ul>
<p><img src="media/er-multiple-model-mappings-image3.png" alt="Invoice model mapping on the Model to datasource mapping page"></p>
</li>
<li><p>Close the <strong>Model to datasource mapping</strong> page.</p>
</li>
<li><p>On the <strong>Versions</strong> FastTab, select <strong>Delete</strong> to delete all versions of this ER configuration that are later than version 240.175.</p>
</li>
</ol>
</li>
<li><p>Review the content of the <strong>Project invoice model mapping (RDP)</strong> configuration:</p>
<ol>
<li><p>In the configuration tree in the left pane, select <strong>Project invoice model mapping (RDP)</strong>.</p>
</li>
<li><p>On the Action Pane, select <strong>Designer</strong>.</p>
</li>
<li><p>On the <strong>Model to datasource mapping</strong> page, notice that the current ER model mapping configuration contains the <strong>InvoiceProject</strong> model mapping, and that this model mapping is configured for the <strong>InvoiceProject</strong> root definition of <strong>Invoice model</strong>. When the <strong>Project invoice (Excel)</strong> ER format is run, select the <strong>InvoiceProject</strong> model mapping of this ER configuration to access application data and fill in the data model.</p>
<p><img src="media/er-multiple-model-mappings-image4.png" alt="Project invoice model mapping on the Model to datasource mapping page"></p>
</li>
<li><p>Close the <strong>Model to datasource mapping</strong> page.</p>
</li>
<li><p>On the <strong>Versions</strong> FastTab, select <strong>Delete</strong> to delete all versions of this ER configuration that are later than version 226.35.</p>
</li>
</ol>
</li>
</ol>
<h2 id="customize-the-imported-er-configurations">Customize the imported ER configurations</h2>
<p>This section explains how to <a href="er-quick-start3-customize-report.html#customize-the-model-mapping-configuration">customize</a> the model mappings that are provided by Microsoft. For example, customization might be required to implement your custom logic or add missing bindings.</p>
<h3 id="customize-the-invoice-model-mapping-configuration">Customize the Invoice model mapping configuration</h3>
<ol>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, select <strong>Invoice model mapping</strong>.</p>
</li>
<li><p>On the Action Pane, select <strong>Create configuration</strong>.</p>
</li>
<li><p>In the <strong>Create configuration</strong> drop-down dialog box, in the <strong>New</strong> field, select <strong>Derive from Name: Invoice model mapping, Microsoft</strong>.</p>
</li>
<li><p>In the <strong>Name</strong> field, enter <strong>Invoice model mapping Litware</strong>.</p>
</li>
<li><p>Select <strong>Create configuration</strong>.</p>
</li>
<li><p><a href="er-quick-start2-customize-report.html#MarkFormatRunnable">Mark</a> the <a href="general-electronic-reporting.html#component-versioning">draft</a> version of the derived mapping as available for use at runtime:</p>
<ol>
<li>On the Action Pane, on the <strong>Configurations</strong> tab, in the <strong>Advanced settings</strong> group, select <strong>User parameters</strong>.</li>
<li>In the <strong>User parameters</strong> dialog box, set the <strong>Run settings</strong> option to <strong>Yes</strong>, and then select <strong>OK</strong>.</li>
<li>Select <strong>Edit</strong> to make the page editable, as required.</li>
<li>For the <strong>Invoice model mapping Litware</strong> configuration that is currently selected in the configuration tree, set the <strong>Run Draft</strong> option to <strong>Yes</strong>.</li>
</ol>
</li>
<li><p>On the Action Pane, select <strong>Designer</strong> to review the model mappings of this configuration.</p>
<p><img src="media/er-multiple-model-mappings-image5.png" alt="Reviewing the invoice model mappings on the Model to datasource mapping page"></p>
<div class="TIP">
<h5>Tip</h5>
<p>You can now open any of the ER model mapping components of this ER configuration in the designer to configure your custom logic. For more information, see <a href="er-quick-start3-customize-report.html#customize-the-model-mapping-configuration">Customize the model mapping configuration</a>.</p>
</div>
</li>
<li><p>Close the <strong>Model to datasource mapping</strong> page.</p>
</li>
</ol>
<p>You now have <strong>Invoice model mapping</strong> and <strong>Invoice model mapping Litware</strong> configurations, each of which has a model mapping that is configured for the <strong>InvoiceCustomer</strong> root definition. Explicitly assign one of the model mappings as the default model mapping that is used by any of the ER formats, such as the <strong>Free text invoice (Excel)</strong> format that contains a model data source that has the <strong>InvoiceCustomer</strong> root definition. Otherwise, when you run, edit, or validate one of the ER formats, the following exception is thrown to notify you that no default model mapping has been explicitly assigned:</p>
<blockquote>
<p>More than one model mapping exists for the '&lt;model name&gt; (&lt;root descriptor&gt;)' data model in the configurations &lt;configuration names separated by commas&gt;. Set one of the configurations as default.</p>
</blockquote>
<p><img src="media/er-multiple-model-mappings-image6.gif" alt="Opening the format for editing on the Configurations page"></p>
<h3 id="customize-the-project-invoice-model-mapping-rdp-configuration">Customize the Project invoice model mapping (RDP) configuration</h3>
<ol>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, select <strong>Project invoice model mapping (RDP)</strong>.</p>
</li>
<li><p>On the Action Pane, select <strong>Create configuration</strong>.</p>
</li>
<li><p>In the <strong>Create configuration</strong> dialog box, in the <strong>New</strong> field, select <strong>Derive from Name: Project invoice model mapping (RDP), Microsoft</strong>.</p>
</li>
<li><p>In the <strong>Name</strong> field, enter <strong>Project invoice model mapping Litware</strong>.</p>
</li>
<li><p>Select <strong>Create configuration</strong>.</p>
</li>
<li><p>For the <strong>Project invoice model mapping Litware</strong> configuration that is currently selected in the configuration tree, set the <strong>Run Draft</strong> option to <strong>Yes</strong>.</p>
</li>
<li><p>On the Action Pane, select <strong>Designer</strong> to review the model mappings of this configuration.</p>
<p><img src="media/er-multiple-model-mappings-image7.png" alt="Review the customized project invoice model mappings on the Model to datasource mapping page"></p>
</li>
<li><p>Close the <strong>Model to datasource mapping</strong> page.</p>
</li>
</ol>
<p>You now have <strong>Invoice model mapping</strong>, <strong>Project invoice model mapping (RDP)</strong>, and <strong>Project invoice model mapping Litware</strong> configurations. Each of these configurations has a model mapping configured for the <strong>InvoiceProject</strong> root definition. Explicitly assign one of the model mappings as the default model mapping that is used by any of the ER formats. For example, use the <strong>Project invoice (Excel)</strong> format that contains a model data source that has the <strong>InvoiceProject</strong> root definition. Otherwise, when you run or edit one of the ER formats, an exception is thrown to notify you that no default model mapping has been explicitly assigned.</p>
<h2 id="select-the-derived-invoice-model-mapping-litware-configuration-as-the-configuration-that-contains-default-model-mappings">Select the derived Invoice model mapping Litware configuration as the configuration that contains default model mappings</h2>
<ol>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, select <strong>Invoice model mapping Litware</strong>.</p>
</li>
<li><p>Set the <strong>Default for model mapping</strong> option to <strong>Yes</strong>.</p>
<p><img src="media/er-multiple-model-mappings-image8.png" alt="Setting the model mapping as the default model mapping on the Configurations page"></p>
<p>Because of this setting, the <strong>Customer Invoice Copy</strong> model mapping is used when you run the <strong>Free text invoice (Excel)</strong>, or when you edit or validate it. The <strong>Customer invoice</strong> model mapping from the <strong>Invoice model mapping</strong> configuration is ignored.</p>
<p>You can now open the <strong>Free text invoice (Excel)</strong> format for review in the format designer.</p>
</li>
</ol>
<h2 id="select-the-derived-project-invoice-model-mapping-litware-configuration-as-the-configuration-that-contains-default-model-mappings">Select the derived Project invoice model mapping Litware configuration as the configuration that contains default model mappings</h2>
<ol>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, select <strong>Project invoice model mapping Litware</strong>.</p>
</li>
<li><p>Set the <strong>Default for model mapping</strong> option to <strong>Yes</strong>.</p>
<p>In this case, unlike the case that is described for the <strong>Invoice model mapping Litware</strong> configuration in the previous section, you can't start to use the <strong>InvoiceProject Copy</strong> model mapping from the <strong>Project invoice model mapping Litware</strong> configuration. Two configurations that contain a model mapping for the <strong>InvoiceProject</strong> root definition are currently marked as the default configuration. Therefore, they have equal priority for use. To resolve this issue, complete the remaining steps of this procedure.</p>
</li>
<li><p>In the configuration tree in the left pane, select <strong>Invoice model mapping Litware</strong>.</p>
</li>
<li><p>On the Action Pane, select <strong>Designer</strong>.</p>
</li>
<li><p>On the <strong>Model to datasource mapping</strong> page, select <strong>Edit</strong> to make the page editable, as required.</p>
</li>
<li><p>Select the <strong>Project Invoice Copy</strong> model mapping, and then select the <strong>Is deleted</strong> check box for it.</p>
<p><img src="media/er-multiple-model-mappings-image9.png" alt="Setting the model mapping as virtually deleted on the Model to datasource mapping page"></p>
<p>Because of this setting, the <strong>Invoice model mapping Litware</strong> configuration is treated as though it has no model mapping for the <strong>InvoiceProject</strong> root definition. The <strong>InvoiceProject Copy</strong> model mapping issued by default. The configuration, <strong>Project invoice model mapping Litware</strong>, which contains this model mapping, is marked as the default configuration. Because it is marked as default, it has a higher priority than the <strong>InvoiceProject</strong> model mapping from the <strong>Project invoice model mapping (RDP)</strong> configuration.</p>
</li>
</ol>
<h2 id="other-considerations">Other considerations</h2>
<p>The <strong>InvoiceProject Copy</strong> model mapping of the <strong>Project invoice model mapping Litware</strong> configuration is designed to use the <strong>ReportDataProvider</strong> data source. The data source is part of the <em>Object</em> type that refers to the <strong>PsaProjInvoiceDP</strong> application class. This class is implemented as the data provider for the project invoice SQL Server Reporting Services (SSRS) report of the Print management framework. Select this data source as the ER <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/er-apis-app10-0-11">integration point (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a>. The current ER implementation for Print management reports takes this setting into account. For more details, review the source code of the <strong>ERPrintMgmtDataProviderReport</strong> application class. At runtime, the assignment of the <strong>ReportDataProvider</strong> data source as the model mapping integration point forces Finance to treat this mapping component with a higher priority than the <strong>InvoiceProject</strong> mapping component from the <strong>Project invoice model mapping (RDP)</strong> configuration.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="tasks/er-manage-model-mapping-configurations-july-2017.html">Manage ER model mapping in separate ER configurations</a></li>
<li><a href="er-country-dependent-model-mapping.html">Configure country context dependent ER model mappings</a></li>
<li><a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/er-apis-app10-0-11">Electronic reporting framework API changes (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/togoAIO/d365Doku/blob/main/articles/fin-ops-core/dev-itpro/analytics/er-multiple-model-mappings.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
