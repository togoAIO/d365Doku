<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Electronic reporting formula language | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Electronic reporting formula language | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../commerce/TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="electronic-reporting-formula-language">Electronic reporting formula language</h1>


<p>Electronic reporting (ER) provides a powerful data transformation experience. The language that is used to express the required data manipulations in the <a href="general-electronic-reporting-formula-designer.html">ER formula designer</a> resembles the formula language in Microsoft Excel.</p>
<h2 id="basic-syntax">Basic syntax</h2>
<p>ER expressions can contain any or all of the following elements:</p>
<ul>
<li><a href="#Constants">Constants</a></li>
<li><a href="#Operators">Operators</a></li>
<li><a href="#References">References</a></li>
<li><a href="#Paths">Paths</a></li>
<li><a href="#Functions">Functions</a></li>
</ul>
<h2 id="constants"><a name="Constants">Constants</a></h2>
<p>When you design expressions, you can use text and numeric constants (that is, values that aren't calculated). For example, the expression <code>VALUE (&quot;100&quot;) + 20</code> uses the numeric constant <strong>20</strong> and the string constant <strong>&quot;100&quot;</strong>, and it returns the numeric value <strong>120</strong>.</p>
<p>The ER formula designer supports escape sequences. Therefore, you can specify an expression string that should be handled differently. For example, the expression <code>&quot;Leo Tolstoy &quot;&quot;War and Peace&quot;&quot; Volume 1&quot;</code> returns the text string <strong>Leo Tolstoy &quot;War and Peace&quot; Volume 1</strong>.</p>
<h2 id="operators"><a name="Operators">Operators</a></h2>
<p>The following table shows the arithmetic operators that you can use to do basic mathematical operations, such as addition, subtraction, multiplication, and division.</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>Addition</td>
<td><code>1+2</code></td>
</tr>
<tr>
<td>-</td>
<td>Subtraction, negation</td>
<td><code>5-2</code>, <code>-1</code></td>
</tr>
<tr>
<td>*</td>
<td>Multiplication</td>
<td><code>7\*8</code></td>
</tr>
<tr>
<td>/</td>
<td>Division</td>
<td><code>9/3</code></td>
</tr>
</tbody>
</table>
<p>The following table shows the comparison operators that are supported. You can use these operators to compare two values.</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>Equal</td>
<td><code>X=Y</code></td>
</tr>
<tr>
<td>&gt;</td>
<td>Greater than</td>
<td><code>X&gt;Y</code></td>
</tr>
<tr>
<td>&lt;</td>
<td>Less than</td>
<td><code>X&lt;Y</code></td>
</tr>
<tr>
<td>&gt;=</td>
<td>Greater than or equal to</td>
<td><code>X&gt;=Y</code></td>
</tr>
<tr>
<td>&lt;=</td>
<td>Less than or equal to</td>
<td><code>X&lt;=Y</code></td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>Not equal to</td>
<td><code>X&lt;&gt;Y</code></td>
</tr>
</tbody>
</table>
<p>Additionally, you can use an ampersand (&amp;) as a text concatenation operator. In this way, you can join, or concatenate, one or more text strings into a single piece of text.</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>Concatenate</td>
<td><code>&quot;Nothing to print:&quot; &amp; &quot; &quot; &amp; &quot;no records found&quot;</code></td>
</tr>
</tbody>
</table>
<h3 id="operator-precedence">Operator precedence</h3>
<p>The order in which the parts of a compound expression are evaluated is important. For example, the result of the expression <code>1 + 4 / 2</code> varies, depending on whether the addition or division operation is done first. You can use parentheses to explicitly define how an expression is evaluated. For example, to indicate that the addition operation should be done first, you can change the preceding expression to <code>(1 + 4) / 2</code>. If you don't explicitly indicate the order of operations in an expression, the order is based on the default precedence that is assigned to the supported operators. The following table shows the precedence that is assigned to each operator. Operators that have a higher precedence (for example, 7) are evaluated before operators that have a lower precedence (for example, 1).</p>
<table>
<thead>
<tr>
<th>Precedence</th>
<th>Operators</th>
<th>Syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td>7</td>
<td>Grouping</td>
<td>( … )</td>
</tr>
<tr>
<td>6</td>
<td>Member access</td>
<td>… . …</td>
</tr>
<tr>
<td>5</td>
<td>Function call</td>
<td>… ( … )</td>
</tr>
<tr>
<td>4</td>
<td>Multiplicative</td>
<td>… * …<br>… / …</td>
</tr>
<tr>
<td>3</td>
<td>Additive</td>
<td>… + …<br>… - …</td>
</tr>
<tr>
<td>2</td>
<td>Comparison</td>
<td>… &lt; …<br>… &lt;= …<br>… =&gt; …<br>… &gt; …<br>… = …<br>… &lt;&gt; …</td>
</tr>
<tr>
<td>1</td>
<td>Separation</td>
<td>… , …</td>
</tr>
</tbody>
</table>
<p>If an expression includes multiple consecutive operators that have the same precedence, those operations are evaluated from left to right. For example, the expression <code>1 + 6 / 2 \* 3 &gt; 5</code> returns <strong>true</strong>. We recommend that you use parentheses to explicitly indicate the desired order of operations in expressions, so that the expressions are easier to read and maintain.</p>
<h2 id="references"><a name="References">References</a></h2>
<p>All data sources of the current ER component that are available during the design of an expression can be used as named references. The current ER component can be either a model mapping or a format. For example, the current ER model mapping contains the <strong>ReportingDate</strong> data source, which returns a value of the <em>DateTime</em> data type. To correctly format that value in the generating document, you can reference the data source in the expression as <code>DATETIMEFORMAT (ReportingDate, &quot;dd-MM-yyyy&quot;)</code>.</p>
<p>All characters in the name of a referencing data source that don't represent a letter of the alphabet must be preceded by a single quotation mark ('). If the name of a referencing data source contains at least one symbol that doesn't represent a letter of the alphabet, the name must be enclosed in single quotation marks. For example, these non-alphabetic symbols can be punctuation marks or other written symbols. Here are some examples:</p>
<ul>
<li>The <strong>Today's date &amp; time</strong> data source must be referred to in an ER expression as <code>'Today''s date &amp; time'</code>.</li>
<li>The <strong>name()</strong> method of the <strong>Customers</strong> data source must be referred to in an ER expression as <code>Customers.'name()'</code>.</li>
</ul>
<p>If the methods of application data sources have parameters, the following syntax is used to call those methods:</p>
<ul>
<li>If the <strong>isLanguageRTL</strong> method of the <strong>System</strong> data source has an <strong>EN-US</strong> parameter of the <em>String</em> data type, this method must be referred to in an ER expression as <code>System.isLanguageRTL(&quot;EN-US&quot;)</code>.</li>
<li>Quotation marks aren't required when a method name contains only alphanumeric symbols. However, they are required for a method of a table if the name includes brackets.</li>
</ul>
<p>When the <strong>System</strong> data source is added to an ER mapping that refers to the <strong>Global</strong> application class, the expression <code>System.isLanguageRTL(&quot;EN-US &quot;)</code> returns the <em>Boolean</em> value <strong>FALSE</strong>. The modified expression <code>System.isLanguageRTL(&quot;AR&quot;)</code> returns the <em>Boolean</em> value <strong>TRUE</strong>.</p>
<p>You can limit the way that values are passed to the parameters of this type of method:</p>
<ul>
<li>Only constants can be passed to methods of this type. The values of the constants are defined at design time.</li>
<li>Only primitive (basic) data types are supported for parameters of this type. The primitive data types include <em>Integer</em>, <em>Real</em>, <em>Boolean</em>, and <em>String</em>.</li>
</ul>
<h2 id="paths"><a name="Paths">Paths</a></h2>
<p>When an expression references a structured data source, you can use the path definition to select a specific primitive element of that data source. A dot character (.) is used to separate individual elements of a structured data source. For example, the current ER model mapping contains the <strong>InvoiceTransactions</strong> data source, and this data source returns a list of records. The <strong>InvoiceTransactions</strong> record structure contains the <strong>AmountDebit</strong> and <strong>AmountCredit</strong> fields, and both these fields return numeric values. Therefore, you can design the following expression to calculate the invoiced amount: <code>InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit</code>. The <code>InvoiceTransactions.AmountDebit</code> construction in this expression is the path that is used to access the <strong>AmountDebit</strong> field of the <strong>InvoiceTransactions</strong> data source of the <em>Record list</em> type.</p>
<h3 id="relative-path">Relative path</h3>
<p>If the path of a structured data source starts with an &quot;at&quot; sign (@), it's a relative path. The &quot;at&quot; sign is shown instead of the remaining part of the absolute path of the hierarchical tree structure that is used. The following illustration shows an example. Here, the absolute path <code>Ledger.'accountingCurrency()'</code> indicates that the accounting currency value from the <strong>Ledger</strong> data source is entered in the <strong>AccountingCurrency</strong> field of the data model.</p>
<p><img src="./media/ER-FormulaLanguage-AbsolutePath.png" alt="Example of an absolute path on the ER model mapping designer page"></p>
<p>The example in the following illustration shows how a relative path is used. The relative path <code>@.AccountNum</code> indicates that the <strong>AccountNum</strong> field of the <strong>Intrastat</strong> data source (which appears one level above the <strong>AccountNum</strong> field in the data model's hierarchical tree) is used to enter the customer or vendor account number in the data model's <strong>AccountNum</strong> field.</p>
<p><img src="./media/ER-FormulaLanguage-RelativePath1.png" alt="Example of a relative path on the ER model mapping designer page"></p>
<p>The remaining part of the absolute path is also shown in the <a href="general-electronic-reporting-formula-designer.html">ER formula editor</a>.</p>
<p><img src="./media/ER-FormulaLanguage-RelativePath2.png" alt="Remaining part of the absolute path on the ER formula designer page"></p>
<p>For more information, see <a href="relative-path-data-bindings-er-models-format.html">Use a relative path in data bindings of ER models and formats</a>.</p>
<h2 id="functions"><a name="Functions">Functions</a></h2>
<p>ER built-in functions can be used in ER expressions. All data sources of the expression context (that is, the current ER model mapping or ER format) can be used as parameters of calling functions, in accordance with the list of arguments for calling functions. Constants can also be used as parameters of calling functions. For example, the current ER model mapping contains the <strong>InvoiceTransactions</strong> data source, and this data source returns a list of records. The <strong>InvoiceTransactions</strong> record structure contains the <strong>AmountDebit</strong> and <strong>AmountCredit</strong> fields, and both these fields return numeric values. Therefore, to calculate the invoiced amount, you can design the following expression that uses the built-in ER rounding function: <code>ROUND (InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit, 2)</code>.</p>
<p>When you design ER model mappings and ER reports, you can use ER functions from the following categories:</p>
<ul>
<li><a href="er-functions-category-datetime.html">Date and time functions</a></li>
<li><a href="er-functions-category-list.html">List functions</a></li>
<li><a href="er-functions-category-logical.html">Logical functions</a></li>
<li><a href="er-functions-category-mathematical.html">Mathematical functions</a></li>
<li><a href="er-functions-category-record.html">Record functions</a></li>
<li><a href="er-functions-category-text.html">Text functions</a></li>
<li><a href="er-functions-category-data-collection.html">Data collection functions</a></li>
<li><a href="er-functions-category-other.html">Other (business domain–specific) functions</a></li>
<li><a href="er-functions-category-type-conversion.html">Type conversion functions</a></li>
</ul>
<h2 id="functions-list-extension">Functions list extension</h2>
<p>ER lets you extend the list of functions that are used in ER expressions. Some engineering effort is required. For detailed information, see <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/general-electronic-reporting-formulas-list-extension">Extend the list of Electronic reporting (ER) functions (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a>.</p>
<h2 id="compound-expressions">Compound expressions</h2>
<p>You can create compound expressions that use functions from different categories, provided that the data types match. When you use functions together, match the data type of the output from one function to the input data type that is required by another function. For example, to avoid a possible &quot;list-is-empty&quot; error in a binding of a field to an ER format element, combine functions from the <a href="er-functions-category-list.html">List</a> category with a function from the <a href="er-functions-category-logical.html">Logical</a> category, as the following example shows. Here, the formula uses the <a href="er-functions-logical-if.html">IF</a> function to test whether the <strong>IntrastatTotals</strong> list is empty before it returns the value of the required aggregation from that list. If the <strong>IntrastatTotals</strong> list is empty, the formula returns <strong>0</strong> (zero).</p>
<pre><code class="lang-vb">IF(ISEMPTY(IntrastatTotals), 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
</code></pre>
<h2 id="multiple-solutions">Multiple solutions</h2>
<p>Often, you can get the same data transformation result in multiple ways, by using functions from different categories or different functions from the same category. For example, the previous expression can also be configured by using the <a href="er-functions-list-count.html">COUNT</a> function from the <a href="er-functions-category-list.html">List</a> category.</p>
<pre><code class="lang-vb">IF(COUNT (IntrastatTotals)=0, 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
</code></pre>
<h2 id="additional-resources">Additional resources</h2>
<p><a href="general-electronic-reporting.html">Electronic Reporting overview</a></p>
<p><a href="general-electronic-reporting-formula-designer.html">Formula designer in Electronic reporting</a></p>
<p><a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/general-electronic-reporting-formulas-list-extension">Extend the list of Electronic reporting functions (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
