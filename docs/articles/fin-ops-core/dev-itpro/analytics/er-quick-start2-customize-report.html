<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Adjust an ER format to generate a custom electronic document | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Adjust an ER format to generate a custom electronic document | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../finance/TOC.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="adjust-an-er-format-to-generate-a-custom-electronic-document">Adjust an ER format to generate a custom electronic document</h1>


<p>The procedures in this topic explain how a user in the System Administrator or Electronic Reporting Functional Consultant role can perform these tasks:</p>
<ul>
<li>Configure parameters for the <a href="general-electronic-reporting.html">Electronic reporting (ER) framework</a>.</li>
<li>Import ER configurations that are provided by Microsoft and used to generate a payment file while a <a href="../../../finance/cash-bank-management/tasks/vendor-payment-overview.html">vendor payment</a> is being processed.</li>
<li>Create a custom version of a standard ER format configuration that is provided by Microsoft.</li>
<li>Modify the custom ER format configuration so that it generates payment files that meets the requirements of a specific bank.</li>
<li>Adopt changes that are made to the standard ER format configuration in the custom ER format configuration.</li>
</ul>
<p>All the following procedures can be done in the <strong>GBSI</strong> company. No coding is required.</p>
<ul>
<li><p><a href="#ConfigureFramework">Configure the ER framework</a></p>
<ul>
<li><p><a href="#ConfigureParameters">Configure ER parameters</a></p>
</li>
<li><p><a href="#ActivateProvider">Activate an ER configuration provider</a></p>
<ul>
<li><a href="#ReviewProvidersList">Review the list of ER configuration providers</a></li>
<li><a href="#ActivateProvider">Add a new ER configuration provider</a></li>
<li><a href="#ActivateAddedProvider">Activate an ER configuration provider</a></li>
</ul>
</li>
</ul>
</li>
<li><p><a href="#ImportERSolution1">Import the standard ER format configurations</a></p>
<ul>
<li><a href="#ImportERFormat1">Import the standard ER configurations</a></li>
<li><a href="#ReviewImportedERSolution">Review the imported ER configurations</a></li>
</ul>
</li>
<li><p><a href="#PrepareVendorPayment">Prepare a vendor payment for processing</a></p>
<ul>
<li><a href="#AddBankAccount">Add bank information for a vendor account</a></li>
<li><a href="#EnterVendorPayment">Enter a vendor payment</a></li>
</ul>
</li>
<li><p><a href="#ProcessVendorPayment1">Process a vendor payment by using the standard ER format</a></p>
<ul>
<li><a href="#ConfigureMethodOfPayment1">Set up the electronic payment method</a></li>
<li><a href="#ProcessPayment1">Process a vendor payment</a></li>
</ul>
</li>
<li><p><a href="#CustomizeProvidedFormat">Customize the standard ER format</a></p>
<ul>
<li><a href="#DeriveProvidedFormat">Create a custom format</a></li>
<li><a href="#ConfigureDerivedFormat">Edit a custom format</a></li>
<li><a href="#MarkFormatRunnable">Mark a custom format as runnable</a></li>
</ul>
</li>
<li><p><a href="#ProcessVendorPayment2">Process a vendor payment by using the custom ER format</a></p>
<ul>
<li><a href="#ConfigureMethodOfPayment2">Set up the electronic payment method</a></li>
<li><a href="#ProcessPayment2">Process a vendor payment</a></li>
</ul>
</li>
<li><p><a href="#ImportERSolution2">Import new versions of the standard ER format configurations</a></p>
<ul>
<li><a href="#ImportERFormat2">Import new versions of the standard ER configurations</a></li>
<li><a href="#ReviewImportedERFormat">Review the imported ER format configurations</a></li>
</ul>
</li>
<li><p><a href="#AdoptNewBaseVersion">Adopt the changes in the new version of an imported format in a custom format</a></p>
<ul>
<li><a href="#CompleteDerivedFormat">Complete the current draft version of a custom format</a></li>
<li><a href="#RebaseDerivedFormat">Rebase a custom format to a new base version</a></li>
<li><a href="#ProcessPayment3">Process a vendor payment by using a rebased ER format</a></li>
</ul>
</li>
<li><p><a href="#References">Additional resources</a></p>
</li>
</ul>
<h2 id="ConfigureFramework">Configure the ER framework</h2>
<p>As a user in the Electronic Reporting Functional Consultant role, you must configure the minimal set of ER parameters before you can start to use the ER framework to design a custom version of a standard ER format.</p>
<h3 id="ConfigureParameters">Configure ER parameters</h3>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</p>
</li>
<li><p>On the <strong>Localization configurations</strong> page, in the <strong>Related links</strong> section, select <strong>Electronic reporting parameters</strong>.</p>
</li>
<li><p>On the <strong>Electronic reporting parameters</strong> page, on the <strong>General</strong> tab, set the <strong>Enable design mode</strong> option to <strong>Yes</strong>.</p>
</li>
<li><p>On the <strong>Attachments</strong> tab, set the following parameters:</p>
<ul>
<li>In the <strong>Configurations</strong> field, select the <strong>File</strong> type for the <strong>USMF</strong> company.</li>
<li>In the <strong>Job archive</strong>, <strong>Temporary</strong>, <strong>Baseline</strong>, and <strong>Others</strong> fields, select the <strong>File</strong> type.</li>
</ul>
</li>
</ol>
<p>For more information about ER parameters, see <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/electronic-reporting-er-configure-parameters">Configure the ER framework (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a>.</p>
<h3 id="ActivateProvider">Activate an ER configuration provider</h3>
<p>Every ER configuration that is added is marked as owned by an ER configuration provider. The ER configuration provider that is activated in the <strong>Electronic reporting</strong> workspace is used for this purpose. Therefore, you must activate an ER configuration provider in the <strong>Electronic reporting</strong> workspace before you start to add or edit ER configurations.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Only the owner of an ER configuration can edit it. Therefore, before an ER configuration can be edited, the appropriate ER configuration provider must be activated in the <strong>Electronic reporting</strong> workspace.</p>
</div>
<h4 id="ReviewProvidersList">Review the list of ER configuration providers</h4>
<ol>
<li>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</li>
<li>On the <strong>Localization configurations</strong> page, in the <strong>Related links</strong> section, select <strong>Configuration providers</strong>.</li>
<li>On the <strong>Configuration provider table</strong> page, each provider record has a unique name and URL. Review the contents of this page. If a record for <strong>Litware, Inc.</strong> (<code>https://www.litware.com</code>) already exists, skip the next procedure, <a href="#ActivateProvider">Add a new ER configuration provider</a>.</li>
</ol>
<h4 id="ActivateProvider">Add a new ER configuration provider</h4>
<ol>
<li>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</li>
<li>On the <strong>Localization configurations</strong> page, in the <strong>Related links</strong> section, select <strong>Configuration providers</strong>.</li>
<li>On the <strong>Configuration providers</strong> page, select <strong>New</strong>.</li>
<li>In the <strong>Name</strong> field, enter <strong>Litware, Inc.</strong></li>
<li>In the <strong>Internet address</strong> field, enter <code>https://www.litware.com</code>.</li>
<li>Select <strong>Save</strong>.</li>
</ol>
<h4 id="ActivateAddedProvider">Activate an ER configuration provider</h4>
<ol>
<li>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</li>
<li>On the <strong>Localization configurations</strong> page, in the <strong>Configuration providers</strong> section, select the <strong>Litware, Inc.</strong> tile, and then select <strong>Set active</strong>.</li>
</ol>
<p>For more information about ER configuration providers, see <a href="tasks/er-configuration-provider-mark-it-active-2016-11.html">Create configuration providers and mark them as active</a>.</p>
<h2 id="ImportERSolution1">Import the standard ER format configurations</h2>
<h3 id="ImportERFormat1">Import the standard ER configurations</h3>
<p>To add the standard ER configurations to your current instance of Microsoft Dynamics 365 Finance, you must import them from the ER <a href="general-electronic-reporting.html#Repository">repository</a> that was configured for that instance.</p>
<ol>
<li>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</li>
<li>On the <strong>Localization configurations</strong> page, in the <strong>Configuration providers</strong> section, select the <strong>Microsoft</strong> tile, and then select <strong>Repositories</strong> to view the list of repositories for the Microsoft provider.</li>
<li>On the <strong>Configuration repositories</strong> page, select the repository of the <strong>Global</strong> type, and then select <strong>Open</strong>. If you're prompted for authorization to connect to Regulatory Configuration Service, follow the authorization instructions.</li>
<li>On the <strong>Configuration repository</strong> page, in the configuration tree in the left pane, select the <strong>BACS (UK)</strong> format configuration.</li>
<li>On the <strong>Versions</strong> FastTab, select version <strong>1.1</strong> of the selected ER format configuration.</li>
<li>Select <strong>Import</strong> to download the selected version from the Global repository to the current Finance instance.</li>
</ol>
<p><img src="media/er-quick-start2-import-solution1.png" alt="Configuration repository page"></p>
<div class="TIP">
<h5>Tip</h5>
<p>If you have trouble accessing the <a href="er-download-configurations-global-repo.html">Global repository</a>, you can <a href="download-electronic-reporting-configuration-lcs.html">download configurations</a> from Microsoft Dynamics Lifecycle Services (LCS) instead.</p>
</div>
<h3 id="ReviewImportedERSolution">Review the imported ER configurations</h3>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</p>
</li>
<li><p>On the <strong>Localization configurations</strong> page, in the <strong>Configurations</strong> section, select the <strong>Reporting configurations</strong> tile.</p>
</li>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, expand <strong>Payment model</strong>.</p>
</li>
<li><p>Notice that, in addition to the selected <strong>BACS (UK)</strong> ER format, other required ER configurations were imported. Make sure that the following ER configurations are available in the configuration tree:</p>
<ul>
<li><strong>Payment model</strong> – This configuration contains the <a href="general-electronic-reporting.html#data-model-and-model-mapping-components">data model</a> ER component that represents the data structure of the payment business domain.</li>
<li><strong>Payment model mapping 1611</strong> – This configuration contains the <a href="general-electronic-reporting.html#data-model-and-model-mapping-components">model mapping</a> ER component that describes how the data model is filled in with application data at runtime.</li>
<li><strong>BACS (UK)</strong> – This configuration contains the <a href="general-electronic-reporting.html#FormatComponentOutbound">format</a> and format mapping ER components. The format component specifies the report layout. The format mapping component contains the model data source and specifies how the report layout is filled in by using this data source at runtime.</li>
</ul>
</li>
</ol>
<p><img src="media/er-quick-start2-imported-solution1.png" alt="Configurations page"></p>
<h2 id="PrepareVendorPayment">Prepare a vendor payment for processing</h2>
<h3 id="AddBankAccount">Add bank information for a vendor account</h3>
<p>You must add bank information for a vendor account that will be referred to later in a registered payment.</p>
<ol>
<li><p>Go to <strong>Accounts payable</strong> &gt; <strong>Vendors</strong> &gt; <strong>All vendors</strong>.</p>
</li>
<li><p>On the <strong>All vendors</strong> page, select the <strong>GB_SI_000001</strong> vendor account, and then, on the Action Pane, on the <strong>Vendor</strong> tab, in the <strong>Set up</strong> group, select <strong>Bank accounts</strong>.</p>
</li>
<li><p>On the <strong>Vendor bank accounts</strong> page, select <strong>New</strong>, and then enter the following information:</p>
<ol>
<li>In the <strong>Bank account</strong> field, enter <strong>GBP OPER</strong>.</li>
<li>In the <strong>Bank groups</strong> field, select <strong>BankGBP</strong>.</li>
<li>In the <strong>Bank account number</strong> field, enter <strong>202015</strong>.</li>
<li>In the <strong>SWIFT code</strong> field, enter <a id="DefineSWIFTCode"></a><strong>CHASDEFXXXX</strong>.</li>
<li>In the <strong>IBAN</strong> field, enter <strong>GB33BUKB20201555555555</strong>.</li>
<li>In the <strong>Routing number</strong> field, keep the default value, <a id="DefineRoutingNumber"></a><strong>123456</strong>.</li>
</ol>
<p><img src="media/er-quick-start2-bank-account.png" alt="Vendor bank accounts page"></p>
</li>
<li><p>Select <strong>Save</strong>.</p>
</li>
<li><p>Close the page.</p>
</li>
<li><p>On the <strong>All vendors</strong> page, open the <strong>GB_SI_000001</strong> vendor account.</p>
</li>
<li><p>On the vendor details page, select <strong>Edit</strong> to make the page editable, if required.</p>
</li>
<li><p>On the <strong>Payment</strong> FastTab, in the <strong>Bank account</strong> field, select <strong>GBP OPER</strong>.</p>
<p><img src="media/er-quick-start2-bank-account-reference.png" alt="Vendor details page"></p>
</li>
<li><p>Select <strong>Save</strong>.</p>
</li>
<li><p>Close the page.</p>
</li>
</ol>
<h3 id="EnterVendorPayment">Enter a vendor payment</h3>
<p>You must enter a new vendor payment by using a <a href="https://docs.microsoft.com/dynamics365/finance/accounts-payable/create-vendor-payments-payment-proposal">payment proposal</a>.</p>
<ol>
<li><p>Go to <strong>Accounts payable</strong> &gt; <strong>Payments</strong> &gt; <strong>Vendor payment journal</strong>.</p>
</li>
<li><p>On the <strong>Vendor payment journal</strong> page, select <strong>New</strong>.</p>
</li>
<li><p>In the <strong>Name</strong> field, select <strong>VendPay</strong>.</p>
</li>
<li><p>Select <strong>Lines</strong>.</p>
</li>
<li><p>Select <strong>Payment proposal</strong> &gt; <strong>Create payment proposal</strong>.</p>
</li>
<li><p>In the <strong>Vendor payment proposal</strong> dialog box, configure conditions to filter for records for the <strong>GB_SI_000001</strong> vendor account only, and then select <strong>OK</strong>.</p>
</li>
<li><p>Select the line for the <strong>00000007_Inv</strong> invoice, and then select <strong>Create payment</strong>.</p>
<p><img src="media/er-quick-start2-payment-proposal.png" alt="Vendor payment proposal dialog box"></p>
</li>
<li><p>Verify that the payment that is entered is configured to use the <strong>Electronic</strong> method of payment.</p>
<p><img src="media/er-quick-start2-payment-line.png" alt="Vendor payments page"></p>
</li>
</ol>
<h2 id="ProcessVendorPayment1">Process a vendor payment by using the standard ER format</h2>
<h3 id="ConfigureMethodOfPayment1">Set up the electronic payment method</h3>
<p>You must configure the electronic method of payment so that it uses the imported ER format configuration.</p>
<ol>
<li><p>Go to <strong>Accounts payable</strong> &gt; <strong>Payment setup</strong> &gt; <strong>Methods of payment</strong>.</p>
</li>
<li><p>On the <strong>Methods of payment - vendors</strong> page, select the <strong>Electronic</strong> method of payment in the left pane.</p>
</li>
<li><p>Select <strong>Edit</strong>.</p>
</li>
<li><p>On the <strong>File formats</strong> FastTab, set the <strong>General electronic Export format</strong> option to <strong>Yes</strong>.</p>
</li>
<li><p>In the <strong>Export format configuration</strong> field, select the <strong>BACS (UK)</strong> format configuration.</p>
<p><img src="media/er-quick-start2-method-of-payment1.png" alt="Methods of payment - vendors page"></p>
</li>
<li><p>Select <strong>Save</strong>.</p>
</li>
</ol>
<h3 id="ProcessPayment1">Process a vendor payment</h3>
<ol>
<li><p>Go to <strong>Accounts payable</strong> &gt; <strong>Payments</strong> &gt; <strong>Vendor payment journal</strong>.</p>
</li>
<li><p>On the <strong>Vendor payment journal</strong> page, select the payment journal that you added earlier, and then select <strong>Lines</strong>.</p>
</li>
<li><p>On the <strong>Vendor payments</strong> page, select <strong>Generate payments</strong>.</p>
</li>
<li><p>In the <strong>Generate payments</strong> dialog box, enter the following information:</p>
<ul>
<li>In the <strong>Method of payment</strong> field, select <strong>Electronic</strong>.</li>
<li>In the <strong>Bank account</strong> field, select <strong>GBSI OPER</strong>.</li>
</ul>
</li>
<li><p>Select <strong>OK</strong>.</p>
</li>
<li><p>In the <strong>Electronic report parameters</strong> dialog box, set the <strong>Print control report</strong> option to <strong>Yes</strong>, and then select <strong>OK</strong>.</p>
<p><img src="media/er-quick-start2-payment-dialog1.png" alt="Electronic report parameters dialog page"></p>
<div class="NOTE">
<h5>Note</h5>
<p>In addition to the payment file, you can now generate the control report.</p>
</div>
</li>
<li><p>Download the zip file, and then extract the following files from it:</p>
<ul>
<li><p>The control report in Excel format</p>
</li>
<li><p>The payment file in TXT format</p>
<p>Notice that, in accordance with the <a href="#PositionRoutingNumber">structure</a> of the provided ER format, the payment line in the generated file starts with the routing number that was <a href="#DefineRoutingNumber">defined</a> for the configured bank account.</p>
<p><img src="media/er-quick-start2-payment-file1.png" alt="Payment file in TXT format"></p>
</li>
</ul>
</li>
</ol>
<h2 id="CustomizeProvidedFormat">Customize the standard ER format</h2>
<p>For the example that is shown in this section, you want to use the ER configurations that are provided by Microsoft to generate vendor payment files in BACS format, but you must add a customization to support the requirements of a specific bank. You also want to be able to upgrade your custom format when new versions of ER configurations become available. However, you want to be able to do the upgrade at the lowest cost.</p>
<p>In this case, as the representative of Litware, Inc., you must create (derive) a new ER format configuration by using the <strong>BACS (UK)</strong> Microsoft-provided configuration as a base.</p>
<h3 id="DeriveProvidedFormat">Create a custom format</h3>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Electronic reporting</strong> &gt; <strong>Configurations</strong>.</p>
</li>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, expand <strong>Payment model</strong>, and then select <strong>BACS (UK)</strong>. Litware, Inc. will use version 1.1 of this ER format configuration as the base for the custom version.</p>
</li>
<li><p>Select <strong>Create configuration</strong> to open the drop-down dialog box. You can use this dialog box to create a new configuration for a custom payment format.</p>
</li>
<li><p>In the <strong>New</strong> field group, select the <strong>Derive from Name: BACS (UK), Microsoft</strong> option.</p>
</li>
<li><p>In the <strong>Name</strong> field, enter <strong>BACS (UK custom)</strong>.</p>
<p><img src="media/er-quick-start2-add-derived-format.png" alt="Create configuration drop-down dialog box"></p>
</li>
<li><p>Select <strong>Create configuration</strong>.</p>
</li>
</ol>
<p>Version 1.1.1 of the <strong>BACS (UK custom)</strong> ER format configuration is created. This version has a <a href="general-electronic-reporting.html#component-versioning">status</a> of <strong>Draft</strong> and can be edited. The current content of your custom ER format matches the content of the format that is provided by Microsoft.</p>
<p><img src="media/er-quick-start2-derived-format-configuration1.png" alt="Configurations page"></p>
<h3 id="ConfigureDerivedFormat">Edit a custom format</h3>
<p>You must configure your custom format so that it meets bank-specific requirements. For example, a bank might require that payment files that are generated include the Society for Worldwide Interbank Financial Telecommunication (SWIFT) code of a bank that is assigned the agent role in the processed vendor payment. SWIFT codes are international bank codes that identify specific banks worldwide. They are also known as Bank Identifier Codes (BICs). The SWIFT code must be 11 characters long, and it must be entered at the beginning of every payment line in a generated payment file.</p>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Electronic reporting</strong> &gt; <strong>Configurations</strong>.</p>
</li>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, expand <strong>Payment model</strong>, and then select <strong>BACS (UK custom)</strong>.</p>
</li>
<li><p>On the <strong>Versions</strong> FastTab, select version <strong>1.1.1</strong> of the selected configuration.</p>
</li>
<li><p>Select <strong>Designer</strong>.</p>
</li>
<li><p>On the <strong>Format designer</strong> page, select <strong>Show details</strong> to view more information about the format elements.</p>
</li>
<li><p>Expand and review the following elements:</p>
<ul>
<li>The <strong>BACSReportsFolder</strong> element of the <strong>Folder</strong> type. This element is used to generate output in ZIP format.</li>
<li>The <strong>file</strong> element of the <strong>File</strong> type. This element is used to generate a payment file in TXT format.</li>
<li>The <strong>transactions</strong> element of the <strong>Sequence</strong> type. This element is used to generate a single payment line in a payment file.</li>
<li>The <strong>transaction</strong> element of the <strong>Sequence</strong> type. This element is used to generate individual fields of a single payment line.</li>
</ul>
</li>
<li><p>Select the <strong>transaction</strong> element.</p>
<p><img src="media/er-quick-start2-derived-format0.png" alt="Transaction element in the ER Operations designer"></p>
<div class="NOTE">
<h5>Note</h5>
<p>The provided report is configured so that <a id="PositionRoutingNumber"></a>every payment line starts with the bank routing number. The <strong>vendBankRouteNum</strong> format element is used for this purpose.</p>
</div>
</li>
<li><p>Select <strong>Add</strong>, and then select the <strong>Text\String</strong> type of the format element that you're adding:</p>
<ol>
<li>In the <strong>Name</strong> field, enter <strong>vendBankSWIFT</strong>.</li>
<li>In the <strong>Minimum length</strong> field, enter <strong>11</strong>.</li>
<li>In the <strong>Maximum length</strong> field, enter <strong>11</strong>.</li>
<li>Select <strong>OK</strong>.</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>The <strong>vendBankSWIFT</strong> element will be used to enter the SWIFT code of a vendor bank in generated files.</p>
</div>
</li>
<li><p>In the format structure tree, select <strong>vendBankSWIFT</strong>.</p>
</li>
<li><p>Select <strong>Move up</strong> to move the selected format element up one level. Repeat this step until the <strong>vendBankSWIFT</strong> element is the <a id="PositionSWIFTCode"></a>first element under the parent <strong>transaction</strong> element.</p>
<p><img src="media/er-quick-start2-derived-format1.png" alt="VendBankSWIFT as the first element under transaction in the ER Operations designer"></p>
</li>
<li><p>While the <strong>vendBankSWIFT</strong> is still selected in the format structure tree, select the <strong>Mapping</strong> tab, and then expand the <strong>model</strong> data source.</p>
</li>
<li><p>Expand <strong>model.Payment</strong> &gt; <strong>model.Payment.CreditorAgent</strong>, and select the <strong>model.Payment.CreditorAgent.BICFI</strong> data source field. This data source field exposes the SWIFT code of a vendor bank that is assigned the agent role in the processed vendor payment.</p>
</li>
<li><p>Select <strong>Bind</strong>. The <strong>vendBankSWIFT</strong> format element is now bound with the <strong>model.Payment.CreditorAgent.BICFI</strong> data source field, so that SWIFT codes will be entered in generated payment files.</p>
<p><img src="media/er-quick-start2-derived-format2.png" alt="vendBankSWIFT format element bound with the model.Payment.CreditorAgent.BICFI data source field in the ER Operations designer"></p>
</li>
<li><p>Select <strong>Save</strong>.</p>
</li>
<li><p>Close the designer page.</p>
</li>
</ol>
<h3 id="MarkFormatRunnable">Mark a custom format as runnable</h3>
<p>Now that the first version of your custom format has been created and has a status of <strong>Draft</strong>, you can run it for testing purposes. To run the report, you must process a vendor payment by using the payment method that refers to your custom ER format. By default, when you call an ER format from the application, only versions that have a status of <strong>Completed</strong> or <strong>Shared</strong> are <a href="general-electronic-reporting.html#component-versioning">considered</a>. This behavior helps prevent ER formats that have unfinished designs from being used. However, for your test runs, you can force the application to use the version of your ER format that has a status of <strong>Draft</strong>. In this way, you can adjust the current format version if any modifications are required. For more information, see <a href="electronic-reporting-destinations.html#applicability">Applicability</a>.</p>
<p>To use the draft version of an ER format, you must explicitly mark the ER format.</p>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Electronic reporting</strong> &gt; <strong>Configurations</strong>.</p>
</li>
<li><p>On the <strong>Configurations</strong> page, on the Action Pane, on the <strong>Configurations</strong> tab, in the <strong>Advanced settings</strong> group, select <strong>User parameters</strong>.</p>
</li>
<li><p>In the <strong>User parameters</strong> dialog box, set the <strong>Run settings</strong> option to <strong>Yes</strong>, and then select <strong>OK</strong>.</p>
</li>
<li><p>Select <strong>Edit</strong> to make the current page editable, as required.</p>
</li>
<li><p>In the configuration tree in the left pane, select <strong>BACS (UK custom)</strong>.</p>
</li>
<li><p>Set the <strong>Run Draft</strong> option to <strong>Yes</strong>.</p>
<p><img src="media/er-quick-start2-derived-format-configuration2.png" alt="Run Draft option on the Configurations page"></p>
</li>
</ol>
<h2 id="ProcessVendorPayment2">Process a vendor payment by using the custom ER format</h2>
<h3 id="ConfigureMethodOfPayment2">Set up the electronic payment method</h3>
<p>You must configure the electronic method of payment so that your custom ER format is used to process vendor payments.</p>
<ol>
<li><p>Go to <strong>Accounts payable</strong> &gt; <strong>Payment setup</strong> &gt; <strong>Methods of payment</strong>.</p>
</li>
<li><p>On the <strong>Methods of payment - vendors</strong> page, select the <strong>Electronic</strong> method of payment in the left pane.</p>
</li>
<li><p>Select <strong>Edit</strong>.</p>
</li>
<li><p>On the <strong>File format</strong> FastTab, set the <strong>General electronic export format</strong> option to <strong>Yes</strong>.</p>
</li>
<li><p>In the <strong>Export format configuration</strong> field, select the <strong>BACS (UK custom)</strong> format configuration.</p>
<p><img src="media/er-quick-start2-method-of-payment2.png" alt="Methods of payment - vendors page"></p>
</li>
<li><p>Select <strong>Save</strong>.</p>
</li>
</ol>
<h3 id="ProcessPayment2">Process a vendor payment</h3>
<ol>
<li><p>Go to <strong>Accounts payable</strong> &gt; <strong>Payments</strong> &gt; <strong>Vendor payment journal</strong>.</p>
</li>
<li><p>On the <strong>Vendor payment journal</strong> page, select the payment journal that you created earlier.</p>
</li>
<li><p>Select <strong>Lines</strong>.</p>
</li>
<li><p>On the <strong>Vendor payments</strong> page, above the grid, select <strong>Payment status</strong> &gt; <strong>None</strong>.</p>
</li>
<li><p>Select <strong>Generate payment</strong>.</p>
</li>
<li><p>In the <strong>Generate payments</strong> dialog box, enter the following information:</p>
<ul>
<li>In the <strong>Method of payment</strong> field, select <strong>Electronic</strong>.</li>
<li>In the <strong>Bank account</strong> field, select <strong>GBSI OPER</strong>.</li>
</ul>
</li>
<li><p>Select <strong>OK</strong>.</p>
</li>
<li><p>In the <strong>Electronic report parameters</strong> dialog box, set the <strong>Print control report</strong> option to <strong>Yes</strong>, and then select <strong>OK</strong>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>In addition to the payment file, you can generate only the control report.</p>
</div>
</li>
<li><p>Download the zip file, and then extract the following files from it:</p>
<ul>
<li><p>The control report in Excel format</p>
</li>
<li><p>The payment file in TXT format</p>
<p>Notice that, in accordance with the structure of your custom ER format, the payment line in the generated file now <a href="#PositionSWIFTCode">starts</a> with the SWIFT code that was <a href="#DefineSWIFTCode">entered</a> for the bank account of the vendor whose payment has been processed.</p>
<p><img src="media/er-quick-start2-payment-file2.png" alt="Payment file in TXT format"></p>
</li>
</ul>
</li>
</ol>
<h2 id="ImportERSolution2">Import new versions of the standard ER format configurations</h2>
<p>For the example that is shown in this section, you receive a notification about Knowledge Base article <a href="https://fix.lcs.dynamics.com/Issue/Details?kb=3182046">KB3763330</a>. This notification informs you about the new version of the <strong>BACS (UK)</strong> ER format that has been published by Microsoft. In addition to the control report, this new version lets users generate the payment advice report and the attending note report while a vendor payment is being processed. You want to start to use that functionality.</p>
<h3 id="ImportERFormat2">Import new versions of the standard ER configurations</h3>
<p>To add new versions of the ER configurations to the current Finance instance, you must import them from the ER <a href="general-electronic-reporting.html#Repository">repository</a> that you've configured.</p>
<ol>
<li>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</li>
<li>On the <strong>Localization configurations</strong> page, in the <strong>Configuration providers</strong> section, select the <strong>Microsoft</strong> tile, and then select <strong>Repositories</strong> to view the list of repositories for the Microsoft provider.</li>
<li>On the <strong>Configuration repositories</strong> page, select the repository of the <strong>Global</strong> type, and then select <strong>Open</strong>. If you're prompted for authorization to connect to Regulatory Configuration Service, follow the authorization instructions.</li>
<li>On the <strong>Configuration repository</strong> page, in the configuration tree in the left pane, select the <strong>BACS (UK)</strong> format configuration.</li>
<li>On the <strong>Versions</strong> FastTab, select version <strong>3.3</strong> of the selected ER format configuration.</li>
<li>Select <strong>Import</strong> to download the selected version from the Global repository to the current Finance instance.</li>
</ol>
<p><img src="media/er-quick-start2-import-solution2.png" alt="Configuration repository page"></p>
<div class="TIP">
<h5>Tip</h5>
<p>If you have trouble accessing the <a href="er-download-configurations-global-repo.html">Global repository</a>, you can <a href="download-electronic-reporting-configuration-lcs.html">download configurations</a> from LCS instead.</p>
</div>
<h3 id="ReviewImportedERFormat">Review the imported ER format configurations</h3>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</p>
</li>
<li><p>On the <strong>Localization configurations</strong> page, in the <strong>Configurations</strong> section, select the <strong>Reporting configurations</strong> tile.</p>
</li>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, expand <strong>Payment model</strong>, and then select <strong>BACS (UK)</strong>.</p>
</li>
<li><p>On the <strong>Versions</strong> FastTab, select version <strong>3.3</strong>.</p>
</li>
<li><p>Select <strong>Designer</strong>.</p>
</li>
<li><p>On the <strong>Format designer</strong> page, expand the <strong>BACSReportsFolder</strong> format element.</p>
</li>
<li><p>Notice that version 3.3 contains the <strong>PaymentAdviceReport</strong> format element that is used to generate a payment advice report when a vendor payment is processed.</p>
<p><img src="media/er-quick-start2-imported-solution2.png" alt="PaymentAdviceReport format element in the ER Operations designer"></p>
</li>
<li><p>Close the designer page.</p>
</li>
</ol>
<h2 id="AdoptNewBaseVersion">Adopt the changes in the new version of an imported format in a custom format</h2>
<h3 id="CompleteDerivedFormat">Complete the current draft version of a custom format</h3>
<p>If you want to keep the current state of your custom format, complete the draft version 1.1.1 by changing its status from <strong>Draft</strong> to <strong>Completed</strong>.</p>
<ol>
<li>Go to <strong>Organization administration</strong> &gt; <strong>Workspaces</strong> &gt; <strong>Electronic reporting</strong>.</li>
<li>On the <strong>Localization configurations</strong> page, in the <strong>Configurations</strong> section, select the <strong>Reporting configurations</strong> tile.</li>
<li>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, expand <strong>Payment model</strong>, expand <strong>BACS (UK)</strong>, and then select <strong>BACS (UK custom)</strong>.</li>
<li>On the <strong>Versions</strong> FastTab, select <strong>Change status</strong> &gt; <strong>Complete</strong>, and then select <strong>OK</strong>.</li>
</ol>
<p>The status of version 1.1.1 is changed from <strong>Draft</strong> to <strong>Completed</strong>, and the version becomes read-only. A new editable version, 1.1.2, has been added and has a status of <strong>Draft</strong>. You can use this version to make further changes in your custom ER format.</p>
<h3 id="RebaseDerivedFormat">Rebase a custom format to a new base version</h3>
<p>To start to use the new functionality of version 3.3 of the <strong>BACS (UK)</strong> format in your customization, you must change the base configuration version for the custom configuration, <strong>BACS (UK custom)</strong>. This process is known as <a href="general-electronic-reporting.html#upgrading-a-format-selecting-a-new-version-of-base-format-rebase">rebasing</a>. Instead of version 1.1 of <strong>BACS (UK)</strong>, use version 3.3.</p>
<ol>
<li><p>Go to <strong>Organization administration</strong> &gt; <strong>Electronic reporting</strong> &gt; <strong>Configurations</strong>.</p>
</li>
<li><p>On the <strong>Configurations</strong> page, in the configuration tree in the left pane, expand <strong>Payment model</strong>, and then select <strong>BACS (UK custom)</strong>.</p>
</li>
<li><p>On the <strong>Versions</strong> FastTab, select version <strong>1.1.2</strong>, and then select <strong>Rebase</strong>.</p>
</li>
<li><p>In the <strong>Rebase</strong> dialog box, in the <strong>Target version</strong> field, select version <strong>3.3</strong> of the base configuration to apply it as the new base and use it to update the configuration.</p>
<p><img src="media/er-quick-start2-rebase1.png" alt="Rebase dialog box"></p>
</li>
<li><p>Select <strong>OK</strong>.</p>
</li>
<li><p>Notice that the number of the draft version has been changed from <strong>1.1.2</strong> to <strong>3.3.2</strong> to reflect the change in the base version.</p>
<p>When the custom version and a new base version are merged, some conflicts might be discovered because of format changes that can't be merged automatically.</p>
<p><img src="media/er-quick-start2-rebase2.png" alt="Rebased configuration with conflicts on the Configurations page"></p>
<p>If conflicts are discovered, they must be manually resolved in the format designer.</p>
</li>
<li><p>On the <strong>Versions</strong> FastTab, select version <strong>3.3.2</strong>.</p>
</li>
<li><p>Select <strong>Designer</strong>.</p>
</li>
<li><p>On the <strong>Format designer</strong> page, on the <strong>Details</strong> FastTab, select a rebase conflict record, and then select <strong>Apply base value</strong>.</p>
<p><img src="media/er-quick-start2-rebase3.png" alt="Rebase conflict record in the ER Operations designer"></p>
</li>
<li><p>Select <strong>Save</strong>.</p>
<p>The rebase conflict record should no longer appear on the <strong>Details</strong> FastTab.</p>
<p><img src="media/er-quick-start2-rebase4.png" alt="Conflict resolved in the ER Operations designer"></p>
<div class="NOTE">
<h5>Note</h5>
<p>You resolved the conflict by confirming that version 3 of the base model must be used in this ER format.</p>
</div>
</li>
<li><p>Expand <strong>BACSReportsFolder</strong> &gt; <strong>file</strong> &gt; <strong>transactions</strong> &gt; <strong>transaction</strong>.</p>
</li>
<li><p>On the <strong>Mapping</strong> tab, notice that version 3.3.2 of your custom ER format contains both your customization (the <strong>vendBankSWIFT</strong> format element and its binding) and the new functionality of version 3.3 of the base ER format that was provided by Microsoft (the <strong>PaymentAdviceReport</strong> format element together with its nested elements and configured bindings). In just a few mouse clicks, you adopted the modifications of a new base version by merging them with your customization.</p>
<p><img src="media/er-quick-start2-rebase5.png" alt="Merged format in the ER Operations designer"></p>
</li>
<li><p>Close the designer page.</p>
</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>The rebase action is reversible. To cancel this rebase, select version <strong>1.1.1</strong> of the <strong>BACS (UK custom)</strong> format on the <strong>Versions</strong> FastTab, and then select <strong>Get this version</strong>. Version 3.3.2 will then be renumbered 1.1.2, and the content of draft version 1.1.2 will match the content of version 1.1.1.</p>
</div>
<h3 id="ProcessPayment3">Process a vendor payment by using a rebased ER format</h3>
<ol>
<li><p>Go to <strong>Accounts payable</strong> &gt; <strong>Payments</strong> &gt; <strong>Vendor payment journal</strong>.</p>
</li>
<li><p>On the <strong>Vendor payment journal</strong> page, select the payment journal that you created earlier.</p>
</li>
<li><p>Select <strong>Lines</strong>.</p>
</li>
<li><p>On the <strong>Vendor payments</strong> page, above the grid, select <strong>Payment status</strong> &gt; <strong>None</strong>.</p>
</li>
<li><p>Select <strong>Generate payment</strong>.</p>
</li>
<li><p>In the <strong>Generate payments</strong> dialog box, enter the following information:</p>
<ul>
<li>In the <strong>Method of payment</strong> field, select <strong>Electronic</strong>.</li>
<li>In the <strong>Bank account</strong> field, select <strong>GBSI OPER</strong>.</li>
</ul>
</li>
<li><p>Select <strong>OK</strong>.</p>
</li>
<li><p>In the <strong>Electronic report parameters</strong> dialog box, enter the following information:</p>
<ul>
<li>Set the <strong>Print control report</strong> option to <strong>Yes</strong>.</li>
<li>Set the <strong>Print payment advice</strong> option to <strong>Yes</strong>.</li>
</ul>
<p><img src="media/er-quick-start2-payment-dialog2.png" alt="Electronic report parameters dialog box"></p>
<div class="NOTE">
<h5>Note</h5>
<p>In addition to the payment file, you can now generate both the control report and the payment advice report.</p>
</div>
</li>
<li><p>Select <strong>OK</strong>.</p>
</li>
<li><p>Download the zip file, and then extract the following files from it:</p>
<ul>
<li><p>The control report in Excel format</p>
</li>
<li><p>The payment advice report in Excel format</p>
<p><img src="media/er-quick-start2-payment-advice-report.png" alt="Payment advice report in Excel format"></p>
</li>
<li><p>The payment file in TXT format</p>
<p>Notice that the payment line in the generated file starts  with the SWIFT code that was entered for the bank account of a vendor whose payment has been processed.</p>
<p><img src="media/er-quick-start2-payment-file3.png" alt="Payment file in TXT format"></p>
</li>
</ul>
</li>
</ol>
<h2 id="References">Additional resources</h2>
<ul>
<li><a href="general-electronic-reporting.html">Electronic Reporting overview</a></li>
<li><a href="download-electronic-reporting-configuration-lcs.html">Download ER configurations from Lifecycle Services</a></li>
<li><a href="er-download-configurations-global-repo.html">Download ER configurations from Global repository of Configuration service</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/togoAIO/d365Doku/blob/main/articles/fin-ops-core/dev-itpro/analytics/er-quick-start2-customize-report.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
