<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>&#220;bersicht Omni-Channel-Zahlungen | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="&#220;bersicht Omni-Channel-Zahlungen | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="omni-channel-payments-overview">Übersicht Omni-Channel-Zahlungen</h1>

<div class="IMPORTANT">
<h5>Important</h5>
<p>Dynamics 365 for Finance and Operations hat sich zu speziell entwickelten Anwendungen entwickelt, mit denen Sie bestimmte Geschäftsfunktionen verwalten können. Weitere Informationen zu diesen Änderungen finden Sie im <a href="https://go.microsoft.com/fwlink/?LinkId=866544">Dynamics 365-Lizenzierungshandbuch</a>.</p>
</div>

<p>Dieses Thema bietet einen Überblick über die Omni-Kanalzahlungen in Dynamics 365 Commerce. Er umfasst eine umfangreiche Liste von unterstützten Szenarien, Informationen über Funktionalität und Problembehandlung und Beschreibungen einige typischer Probleme.</p>
<h2 id="key-terms">Schlüsselbegriffe</h2>
<table>
<thead>
<tr>
<th>Zeitdauer</th>
<th>Beschreibung</th>
</tr>
</thead>
<tbody>
<tr>
<td>Token</td>
<td>Eine Zeichenfolge von Daten, die ein Zahlungsprozessor als Referenz bereitstellt. Tokens können Zahlungs-Kartennummern, Zahlungsautorisierungen oder früheren Zahlungserfassungen darstellen. Token sind wichtig, da sie beitragen, sensible Daten vom Verkaufsstellen-System (POS) fernzuhalten. Sie werden manchmal auch als <em>Referenzen</em> bezeichnet.</td>
</tr>
<tr>
<td>Kartentoken</td>
<td>Ein Token, den ein Zahlungsprozessor zum Aufbewahren im POS-System angegeben hat. Ein Kartentoken kann nur von dem Einzelhändler verwendet werden, der ihn erhält. Kartentoken werden manchmal auch als <em>Kartenreferenzen</em> bezeichnet.</td>
</tr>
<tr>
<td>Autorisierungstoken (auth)</td>
<td>Eine eindeutige Kennung, die ein Zahlungsvorgang als Antwort bereitstellt, die an ein POS-System übermittelt wird, nachdem das POS-System einen Autorisierungsantrag stellt. Ein Autorisierungstoken kann später verwendet werden, wenn der Prozessor aufgerufen wird, um Aktivitäten wie Stornieren oder Stornieren der Autorisierung auszuführen. Oftmals werden sie dazu verwendet, Fonds zu erfassen, wenn ein Auftrag erfüllt oder eine Trasaktion abgeschlossen ist. Authorisierungstoken werden manchmal auch als <em>Authorisierungsreferenzen</em> bezeichnet.</td>
</tr>
<tr>
<td>Token erfassen</td>
<td>Eine Referenz, die ein Zahlungsprozessor einem POS-System bereitstellt, wenn eine Zahlung abgeschlossen oder aufgezeichnet wird. Das Erfassungstoken kann dann verwendet werden, um auf die Zahlung in nachfolgenden Arbeitsgängen wie Rückerstattungsanforderungen zu erfassen.</td>
</tr>
<tr>
<td>Karte nicht vorhanden</td>
<td>Eine Bedingung, die sich auf eine Zahlungsbuchungen bezieht, wenn keine physische Karte vorhanden ist. Beispielsweise können diese Transaktionen in E-Commerce- oder Callcenterszenarien auftreten. Für diese Transaktionen werden die den Zahlungen zugeordneten Informationen manuell auf eine E-Commerce-Website, in einen Callcenterfluss oder im POS oder Zahlungsterminal eingegeben.</td>
</tr>
<tr>
<td>Karte vorhanden</td>
<td>Eine Bedingung, die sich auf Zahlungstransaktionen bezieht, in denen eine physischen Karte auf einem Zahlungsterminal vorgewiesen und verwendet wird, der mit dem Microsoft Dynamics 365 POS-System verbunden ist.</td>
</tr>
</tbody>
</table>
<h2 id="overview">Übersicht</h2>
<p>Im Allgemeinen beschreibt der Begriff <em>Omni-Kanal-Zahlungen</em> die Möglichkeit, einen Auftrag in einem Kanal zu erstellen und diesen in einem anderen Kanal zu erfüllen. Der Schlüssel zur Omni-Kanal-Zahlungunterstützung behält Zahlungsdetails zusammen mit den Restbetrag der Auftragsdetails und verwendet dann jene Zahlungsdetails, wenn der Auftrag zurückgerufen oder in einem anderen Kanal verarbeitet wird. Ein klassisches Beispiel ist das Szenarion „Einkauf online, Abholen im Geschäft“. In diesem Szenario werden die Zahlungsdetails hinzugefügt, wenn der Auftrag online erstellt wird. Sie werden dann am POS erneut aufgerufen, um die Zahlungskarte des Debitors bei der Abholung zu belasten.</p>
<p>Alle Szenarien, die in diesem Thema beschrieben werden, können implementiert werden, wenn das Standardzahlungs-Software-Development Kit (SDK) verwendet wird, das mit Commerce bereitgestellt wird. Die <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3">Dynamics 365 Zahlungsverbindung für Adyen</a> stellt eine vordefinierte Implementierung jedes Szenarios zur Verfügung, das hier beschrieben wird.</p>
<h3 id="prerequisites">Voraussetzungen</h3>
<p>Alle Szenarien, die in diesem Thema beschrieben werden, benötigen einen Zahlungskonnektor, der Omni-Kanalzahlungen unterstützt. Der vordefinierte Adyen-Konnektor kann auch verwendet werden, weil er die Szenarien unterstützt, die über das Zahlungen SDK bereitgestellt werden. Weitere Informationen dazu, wie Zahlungskonnektoren implementiert werden und Informationen zu Retail SDK im Allgemeinen finden Sie unter <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors">Retail für It Pros und Entwickler-Startseite.</a>.</p>
<h4 id="supported-versions">Unterstützten Versionen</h4>
<p>Die Omnikanal-Zahlungsfunktionen, die in diesem Thema beschrieben sind, wurden im Rahmen der Microsoft Dynamics 365 for Retail Version 8.1.3 freigegeben.</p>
<h4 id="card-present-and-card-not-present-connectors">„Karte vorhanden“ und „Karte nicht vorhanden“ Verbindungen</h4>
<p>Das Zahlungen-SDK basiert auf zwei Sätzen von Anwendungsprogrammierschnittstellen (APIs) für Zahlungen. Das erste Set von APIs nennt man <strong>iPaymentProcessor</strong>. Sie wird verwendet, um „Karte nicht vorhandene“ Zahlungskonnektoren zu implementieren, die in Callcentern und der Microsoft Dynamics e-Commerce-Plattform verwendet werden können. Weitere Informationen zur <strong>iPaymentProcessor</strong> Schnittstelle finden Sie im <a href="https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf">Implementieren Sie einen Zahlungskonnektor und ein Zahlungsgerät</a> Whitepaper, das Zahlungen umfasst.</p>
<p>Das zweite Set von APIs nennt man <strong>iNamedRequestHandler</strong>. Er unterstützt die Implementierung von „Karte vorhandenen“ Zahlungsintegrationen, die als Zahlungsterminal verwendet werden. Weitere Informationen zur <strong>iNamedRequestHandler</strong>-Schnittstelle finden Sie unter <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension">Erstellen Sie eine Zahlungsintegration für ein Zahlungsterminal</a>.</p>
<h3 id="setup-and-configuration">Einrichtung und Konfiguration</h3>
<p>Die folgenden Komponenten und Einrichtungsschritte sind erforderlich:</p>
<ul>
<li><strong>eCommerce Integration:</strong> Eine Integration mit Commerce ist erforderlich, um Szenarien zu unterstützen, in denen ein Auftrag aus einem Online-Geschäft stammt. Weitere Informationen zu Retail-E-Commerce SDK finden Sie unter <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk">E-Commerce-Plattform-Software Development Kit (SDK)</a>. In einer Vorführungsumgebung unterstützt das Bezugsschaufenster das Omnikanal-Zahlungsszenarien.</li>
<li><strong>Online-Zahlungskonfiguration:</strong> Die Einstellung des Online-Kanals muss einen Zahlungskonnektor enthalten, der aktualisiert wurde, um Omnikanalzahlungen zu unterstützen. Alternativ kann der vordefinierten Zahlungskonnektor verwendet werden. Informationen darüber, wie der für Adyen-Zahlungskonnektor für Onlineshops konfiguriert wird, finden Sie unter. <a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce">Adyen-Zahlungskonnektor</a> Zusätzlich zum Einrichtungsschritt für eCommerce, der in diesem Thema beschrieben sind, muss der Parameter <strong>Speichern von Zahlungsinformationen in eCommerce zulassen</strong> auf <strong>Wahr</strong> in den Einstellungen für den Adyen-Konnektor festgelegt werden.</li>
<li><strong>Omnikanal-Zahlungskonfiguration:</strong> Im Back Office gehen Sie zu <strong>Retail und Commerce &gt; Headquarters Einstellung &gt; Parameter &gt; Freigegebene Commerce-Parameter</strong>. Legen Sie anschließend auf der Registerkarte <strong>Omnikanal-Zahlungen</strong> die Option <strong>Omnikanal-Zahlungen verwenden</strong> auf <strong>Ja</strong> fest. Ab der Commerce-Version 10.0.12 befindet sich diese Einstellung im Arbeitsbereich <strong>Funktionsverwaltung</strong>. Wählen Sie die Funktion <strong>Omnikanal-Zahlungen</strong> und klicken Sie auf <strong>Jetzt aktivieren</strong>.</li>
<li><strong>Zahlungsdienstleistungen:</strong> Das Callcenter verwendet den Standardzahlungskonnektor auf der Seite <strong>Zahlungsdienste</strong> um Zahlungen zu verarbeiten. Um Szenarien wie „Einkauf im Callcenter, Abholung im Shop“ zu unterstützen, muss dieser Standardzahlungskonnektor der Adyen-Zahlungskonnektor oder ein Zahlungskonnektor sein, der die Implementierungsbedingungen für Omnikanal-Zahlungen erfüllt.</li>
<li><strong>Überweisungs-Dienstleistungen:</strong> Zahlungen über einen Zahlungsterminal müssen im Inforegsiter <strong>Elektronische Überweisung</strong> des Hardwareprofils eingerichtet werden. Der Adyen-Konnektor unterstützt Omnikanal-Zahlungs-Szenariostandards. Andere Zahlungskonnektoren, die die Schnittstelle <strong>iNamedRequestHandler</strong> unterstützen, können auch verwendet werden, wenn sie Omnikanal-Zahlungen unterstützen.</li>
<li><strong>Zahlungskonnektorverfügbarkeit:</strong> Wenn ein Auftrag erneut aufgerufen wird, enthalten die Zahlungsmittelpositionen, die zusammen mit dem Auftrag aufgerufen werden, den Namen des Zahlungskonnektors, der verwendet wurde, um die Autorisierungen zu erstellen, die diesem Auftrag zugeordnet sind. Wenn der Auftrag abgeschlossen ist, versucht das SDK Zahlungen, den gleichen Konnektor zu verwenden, der verwendet wurde, um die ursprüngliche Autorisierung zu erstellen. Daher muss ein Zahlungskonnektor, der dieselben Handelseigenschaften hat, zur ERfassung verfügbar sein.</li>
<li><strong>Kartentypen:</strong> Damit Omnikanal-Szenarien einwandfrei funktionieren, muss jeder Kanal die gleiche Einstellung für Zahlungsmitteltypen haben, die für Omnikanal verwendet werden können. Diese Einstellung beinhaltet Zahlungsmethoden-Kennungen und Kartentyp-Kennungen. Wenn beispielsweise der Zahlungsmitteltyp <strong>Karten</strong> eine Kennung <strong>2</strong> in der Onlineshopeinstellung hat, sollten sie dieselbe Kennung in der Ladengeschäftseinstellung haben. Dieselbe Anforderung gilt für Kartentyp-Kennungen. Wenn die Kartennummer <strong>12</strong> auf <strong>VISUM</strong> im Onlineshop festgelegt wurde, muss dieselbe Kennung für den Retail Shop eingerichtet werden.</li>
<li>Retail Modern POS für Windows oder Android mit einer integrierten Hardwarestation oder</li>
<li>Modern POS für iOS oder Cloud POS mit verbundener gemeinsam genutzter Hardwarestation.</li>
</ul>
<h3 id="basic-principle-supporting-omni-channel-payments">Grundlegende Prinzipien, die Omnikanal-Zahlungen unterstützen</h3>
<p>Zahlungskonnektoren und Zahlungsverarbeitungsstellen verwenden Token oder Referenzen, um auf Interaktionen zu verweisen, die den Kartenzahlungen zugeordnet werden. Wenn beispielsweise eine Zahlungsautorisierung angefordert wird, wird eine Referenz zu dieser Autorisierung bereitgestellt. Daher kann später auf die Autorisierung verwiesen werden, wenn Mitteln zum Zeitpunkt der Erfüllung erfasst werden. Diese Autorisierung ist für den Einzelhändler, den Zahlungskonnektor und den Prozessor eindeutig.</p>
<p>Wenn ein Auftrag, der online erstellt wurde, im Shop abgeholt wird, müssen dieselben Zahlungsdetails für diesen Auftrag erneut aufgerufen und verwendet werden. Wenn die Originaldetails als Teil der Anforderung, eine Zahlung durch die ursprüngliche Autorisierung aufzuzeichnen, bereitgestellt werden, ist der Zahlungsprozessor in der Lage, die Anforderung zu bearbeiten und die Zahlung zu erfassen.</p>
<p>Um auf die Onlinebestellung korrekt zu verweisen, muss ein Zahlungskonnektor „Karte nicht vorhanden“, der denselben Prozessor unterstützt, auch verfügbar sein. Auf diese Weise kann das POS-System einen Prozessor für Zahlungen „Karte vorhanden“ haben, aber er kann auch auf andere Zahlungsahlungskonnektoren zugreifen, damit er Aufträge erfüllen kann, die in anderen Kanälen erstellt werden, indem verschiedene Zahlungsverarbeitungsstellen verwendet werden.</p>
<h2 id="supported-scenarios">Unterstützte Szenarien</h2>
<p>Die folgenden Omnikanal-Zahlungsszenarien werden unterstützt:</p>
<ul>
<li><p>Online kaufen und im Shop abholen</p>
</li>
<li><p>Im Callcenter kaufen und In einem Shop abholen</p>
</li>
<li><p>Im Callcenter kaufen und Im Shop B abholen</p>
</li>
<li><p>Im Shop A kaufen und an den Debitor versenden</p>
<div class="NOTE">
<h5>Note</h5>
<p>Im Callcenter getätigte Zahlungen, die der Zahlungsfunktion „Normal“ zugeordnet sind, müssen als <strong>Vorab bezahlen</strong> = <strong>Ja</strong> gekennzeichnet sein, um in dem fälligen Betrag berücksichtigt zu werden, wenn die Bestellung am POS zurückgerufen wird. Nicht im Voraus bezahlte Zahlungen vom Typ „Normal“ werden nicht erfasst, wenn die Bestellung am POS zurückgerufen wird.</p>
</div>
</li>
</ul>
<p>Abweichungen dieser Szenarien werden ebenfalls unterstützt. So kann eine Onlinebestellung beide Positionen umfassen nämlich jene, die an den Debitor versendet wird und jene, die im Shop abgeholt wird. Alle Auftragserfüllungsoptionen werden über Omnikanal-Zahlungen unterstützt.</p>
<p>In den folgenden Abschnitten werden die Schritte für jedes Szenario beschrieben und es wird aufgezeigt, wie die Szenarien mithilfe von Demodaten verwendet werden.</p>
<h3 id="buy-online-pick-up-in-store">Online kaufen und im Shop abholen</h3>
<p>Bevor Sie starten, stellen Sie sicher, dass die folgenden Voraussetzungen erfüllt sind:</p>
<ul>
<li>Sie haben ein Bezugsschaufenster, in dem der Adyen-Konnektor konfiguriert wird.</li>
<li>Die Option <strong>Omnikanal-Zahlungen</strong> auf der Seite <strong>Freigegebene Commerce Parameter</strong> wird auf <strong>Wahr</strong> festgelegt. In späteren Versionen ist diese Einstellung in den Arbeitsbereich <strong>Funktionsverwaltung</strong> verschoben, wo Sie die Funktion <strong>Omnikanal-Zahlungen</strong> auswählen und auf <strong>Jetzt aktivieren</strong> klicken können.</li>
<li>Der Adyen-Zahlungskonnektor wird für das Houston-POS-Register konfiguriert.</li>
<li>Retail Modern POS für Windows oder Android mit einer integrierten Hardwarestation oder</li>
<li>Modern POS für iOS oder Cloud POS mit verbundener gemeinsam genutzter Hardwarestation.</li>
</ul>
<p>Um das Szenario auszuführen, führen Sie folgende Schritte aus:</p>
<ol>
<li><p>Im Bezugsschaufenster erstellen Sie einen Auftrag für eine Abholung im Shop. Achten Sie darauf, das Sie den Shop <strong>Houston</strong> auswählen.</p>
</li>
<li><p>Führen Sie die Zahlungsschritte aus und bezahlen Sie, indem Sie eine Testkreditkartennummer verwenden. Sie können finden Testkreditkartennummern auf der <a href="https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description">Adyen-Test-Kartennummerseite</a>.</p>
</li>
<li><p>In Commerce verwenden Sie den Stapelverarbeitungsauftrag <strong>Aufträge synchronisieren</strong> und den <strong>P-001</strong> Verteilungszeitplan, um die Aufträge im Back Office zu erstellen.</p>
</li>
<li><p>Im POS auf der Willkommensseite wählen Sie den Vorgang <strong>Aufträge zur Abholung</strong> aus, um die Aufträge zur Abholung im Shop anzuzeigen.</p>
</li>
<li><p>Wählen Sie eine oder mehrere Zeilen aus dem Auftrag auf, der im Bezugsschaufenster erstellt wurde, und wählen Sie dann <strong>Abholen</strong>.</p>
<p>Der Auftrag wird im Back Office abgerufen.</p>
</li>
<li><p>Wenn die Auftragspositionsdetails im Back Office abgerufen werden und eine Kartenzahlung, die für Omnikanal verwendet werden kann erkannt wurde, Sie darüber informieren, dass eine Zahlungsmethode verfügbar ist.</p>
</li>
<li><p>Wählen Sie <strong>Verfügbare Zahlungsmethode</strong>, um die Buchung ausführen, indem die Kartendetails verwenden, die in das Bezugsschaufenster eingegeben wurden.</p>
<p>Die Auftragspositionen werden auf der Transaktionsseite geladen und der fällige Saldo ist 0 (null).</p>
</li>
<li><p>Wählen Sie die Registerkarte <strong>Zahlungen</strong> aus, um die Positionsbeträge anzuzeigen, die aus der Onlinebestellung gezogen wurden.</p>
</li>
<li><p>Wählen Sie eine beliebige Zahlungsmethode aus, um die Transaktion abzuschließen.</p>
</li>
</ol>
<h3 id="buy-in-call-center-pick-up-in-store">Im Callcenter kaufen und In einem Shop abholen</h3>
<ol>
<li><p>In Commerce auf der Seite <strong>Kundendienst</strong> geben Sie <strong>Karen-Berg</strong> in der Suchenleiste ein, und wählen Sie dann <strong>Suchen</strong>.</p>
</li>
<li><p>Wählen Sie <strong>Karen-Berg</strong> in den Suchergebnisse aus.</p>
</li>
<li><p>Nachdem Karen auf der Seite <strong>Kundendienst</strong> geladen ist, wählen Sie <strong>Neuer Auftrag</strong> aus.</p>
</li>
<li><p>Wählen Sie auf der Seite „Neuer Auftrag“ die <strong>Kopfzeile</strong>, um den Bestellkopf anzuzeigen.</p>
</li>
<li><p>Auf der Seite <strong>Auftragskopf</strong> können Sie den Standort auf <strong>Zentral</strong> und den Lagerort auf <strong>Houston</strong> festlegen.</p>
</li>
<li><p>Auf der Registerkarte <strong>Liefern</strong> muss das Datum im Feld <strong>Lieferart</strong> für Debitorenaufnahme auf <strong>60</strong> festgelegt werden.</p>
</li>
<li><p>Wählen Sie <strong>Positionen</strong> aus und fügen Sie anschließend eine oder mehrere Position im Auftrag hinzu.</p>
</li>
<li><p>Wählen Sie <strong>Vollständig</strong>, um den Auftragsabschlussfluss einzugeben.</p>
</li>
<li><p>Navigieren Sie nach unten zum Zahlungsabschnitt, wählen Sie <strong>Hinzufügen</strong> und wählen Sie dann eine Position aus, in der die Zahlungsmethode auf <strong>Karten</strong> festgelegt wird.</p>
</li>
<li><p>Wählen Sie das Pluszeichen (<strong>+</strong>) um eine Kartenzahlung hinzuzufügen.</p>
</li>
<li><p>Hier können Sie die Details für eine Testkreditkartennummer eingeben, die Sie auf der <a href="https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description">Adyen-Test-Kartennummerseite</a> gefunden haben und dann wählen Sie <strong>OK</strong>.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Wenn die Kartenmarke für die Kartennummer, die Sie eingegeben haben, von der Marke abweicht, die ausgewählt wurde, als die Zahlung ausgelöst wurde, wird die Zahlung dennoch ausgeführt. Allerdings wird sie auf die Konten gebucht, die der Kartenmarke zugeordnet werden, die Sie in Schritt 10 ausgewählt haben.</p>
</div>
</li>
<li><p>Wählen Sie <strong>OK</strong> aus, um das Dialogfeld <strong>Auftragsabschlusszahlungen</strong> zu schließen.</p>
</li>
<li><p>Wählen Sie auf der Seite <strong>Auftragszusammenfassung</strong> <strong>Übermitteln</strong> aus.</p>
</li>
<li><p>Im POS auf der Willkommensseite wählen Sie den Vorgang <strong>Aufträge zur Abholung</strong> aus, um die Aufträge zur Abholung im Shop anzuzeigen.</p>
</li>
<li><p>Wählen Sie eine oder mehrere Zeilen aus dem Auftrag auf, der im Bezugsschaufenster erstellt wurde, und wählen Sie dann <strong>Abholen</strong>.</p>
<p>Der Auftrag wird im Back Office abgerufen.</p>
</li>
<li><p>Wenn die Auftragspositionsdetails im Back Office abgerufen werden und eine Kartenzahlung, die für Omnikanal verwendet werden kann erkannt wurde, Sie darüber informieren, dass eine Zahlungsmethode verfügbar ist.</p>
</li>
<li><p>Wählen Sie <strong>Verfügbare Zahlungsmethode</strong>, um die Buchung ausführen, indem die Kartendetails verwenden, die in das Bezugsschaufenster eingegeben wurden.</p>
<p>Die Auftragspositionen werden auf der Transaktionsseite geladen und der fällige Saldo ist 0 (null).</p>
</li>
<li><p>Wählen Sie die Registerkarte <strong>Zahlungen</strong> aus, um die Positionsbeträge anzuzeigen, die aus der Onlinebestellung gezogen wurden.</p>
</li>
<li><p>Wählen Sie eine beliebige Zahlungsmethode aus, um die Transaktion abzuschließen.</p>
</li>
</ol>
<h3 id="buy-in-store-a-pick-up-in-store-b">Im Callcenter kaufen und Im Shop B abholen</h3>
<ol>
<li><p>Starten Sie den POS für den Houston-Shop.</p>
</li>
<li><p>Auf der Seite <strong>Transakltion</strong> fügen Sie Karen Berg der Transaktion hinzu, indem Sie die Nummerauflage verwenden, um <strong>2001</strong> einzugeben.</p>
</li>
<li><p>Fügen Sie eine oder mehrere Zeilen der Transaktion hinzu.</p>
</li>
<li><p>Wählen Sie <strong>Aufträge</strong>, um die Auftragsoptionen anzuzeigen.</p>
</li>
<li><p>Wählen Sie <strong>Alle abholen</strong> und dann aus, wenn Sie dazu aufgefordert werden, wählen Sie <strong>Debitorenauftrag</strong> aus.</p>
</li>
<li><p>In der Suchenleiste geben Sie <strong>Seattle</strong> ein und wählen anschließend den Shop <strong>Seattle</strong> für die Abholung aus.</p>
</li>
<li><p>Wählen Sie <strong>OK</strong>, um das aktuelle Datum als Datum der Abholung zu akzeptieren.</p>
</li>
<li><p>Wählen Sie <strong>Mit Karte bezahlen</strong> aus, um die Zahlung auszulösen.</p>
</li>
<li><p>Zahlungsmittel Kartenzahlung für den Betrag, der für die Anzahlung fällig ist.</p>
</li>
<li><p>Beenden Sie die Einzahlung am Zahlungsterminal.</p>
</li>
<li><p>Nachdem die Summe bezahlt ist, wählen Sie die Option, die selbe Karte für Erfüllung nutzen und warten Sie, bis der Auftrag abgeschlossen ist.</p>
</li>
<li><p>Starten Sie den POS für den Seattle-Shop.</p>
</li>
<li><p>Im POS auf der Willkommensseite wählen Sie den Vorgang <strong>Aufträge zur Abholung</strong> aus, um die Aufträge zur Abholung im Shop anzuzeigen.</p>
</li>
<li><p>Wählen Sie eine oder mehrere Zeilen aus dem Auftrag auf, der im Bezugsschaufenster erstellt wurde, und wählen Sie dann <strong>Abholen</strong>.</p>
<p>Der Auftrag wird im Back Office abgerufen.</p>
</li>
<li><p>Wenn die Auftragspositionsdetails im Back Office abgerufen werden und eine Kartenzahlung, die für Omnikanal verwendet werden kann erkannt wurde, Sie darüber informieren, dass eine Zahlungsmethode verfügbar ist.</p>
</li>
<li><p>Wählen Sie <strong>Verfügbare Zahlungsmethode</strong>, um die Buchung ausführen, indem die Kartendetails verwenden, die in das Bezugsschaufenster eingegeben wurden.</p>
<p>Die Auftragspositionen werden auf der Transaktionsseite geladen und der fällige Saldo ist 0 (null).</p>
</li>
<li><p>Wählen Sie die Registerkarte <strong>Zahlungen</strong> aus, um die Positionsbeträge anzuzeigen, die aus der Onlinebestellung gezogen wurden.</p>
</li>
<li><p>Wählen Sie eine beliebige Zahlungsmethode aus, um die Transaktion abzuschließen.</p>
</li>
</ol>
<h3 id="buy-in-store-a-ship-to-customer">Im Shop A kaufen und an den Debitor versenden</h3>
<ol>
<li>Starten Sie den POS für den Houston-Shop.</li>
<li>Auf der Seite <strong>Transakltion</strong> fügen Sie Karen Berg der Transaktion hinzu, indem Sie die Nummerauflage verwenden, um <strong>2001</strong> einzugeben.</li>
<li>Fügen Sie eine oder mehrere Zeilen der Transaktion hinzu.</li>
<li>Wählen Sie <strong>Aufträge</strong>, um die Auftragsoptionen anzuzeigen.</li>
<li>Wählen Sie <strong>Alles versenden</strong> und dann, wenn Sie dazu aufgefordert werden, wählen Sie <strong>Debitorenauftrag</strong> aus.</li>
<li>Wählen Sie auf der Seite Versandart die Option aus <strong>Standard über Nacht</strong> und dann <strong>OK</strong> aus, um das heutige Datum als Versanddatum zu akzeptieren.</li>
<li>Wählen Sie <strong>OK</strong>, um das aktuelle Datum als Datum der Abholung zu akzeptieren.</li>
<li>Wählen Sie <strong>Mit Karte bezahlen</strong> aus, um die Zahlung auszulösen.</li>
<li>Zahlungsmittel Kartenzahlung für den Betrag, der für die Anzahlung fällig ist.</li>
<li>Beenden Sie die Einzahlung am Zahlungsterminal.</li>
<li>Nachdem die Summe bezahlt ist, wählen Sie die Option, die selbe Karte für Erfüllung nutzen und warten Sie, bis der Auftrag abgeschlossen ist.</li>
</ol>
<p>Wenn der Auftrag im Back Office entnommen, verpackt und fakturiert wurde, werden die Zahlungsdetails, die am POS bereitgestellt werden verwendet, um die Ressourcen für die Waren zu erfassen, die an den Debitor gesendet werden.</p>
<h2 id="scenario-details">Szenariodetails</h2>
<p>Neben den grundlegenden Szenarien, die derzeit beschrieben wurden, wurden einige Erweiterungen für die SDK Zahlungen vorgenommen, um die Omnikanal-Zahlungen zu unterstützen.</p>
<h3 id="pos">POS</h3>
<h4 id="single-swipedip-for-customer-orders">Einzelne Karte durch Lesegerät ziehen / Karte hineinstecken für Kundenufträge</h4>
<p>Bevor die Omnikanal-Zahlungsfunktion implementiert wurde, mussten Debitorenbestellung, die Einzahlungen umfassten, am POS erstellt werden, Debitoren mussten ihre Karte zweimal durch das Lesegerät ziehen (oder hineinstecken), um die Anzahlung zu leisten und einmal, um die Karte zur nachträglichen Auftragserfüllung zu zerlegen. Wenn die Omnikanal-Tokenisierungsfunktion aktiviert ist, müssen Debitoren ihre Karte nur einmal durch das Lesegerät ziehen, um die Anzahlung zu bezahlen und den Betrag zu autorisieren, der für Waren fällig ist, die später erfüllt werden. Zum Zeitpunkt der Erfüllung wird die autorisierte Deckung aufgezeichnet. Bevor die Omnikanal-Tokenisierungsfunktion implementiert wurde, konnte nur ein wiederkehrendes Kartentoken für nachfolgende Auftragserfüllung erstellt wurde. Daher wurden die Mittel für die ausstehende Erfüllung nicht autorisiert und weil diese Mittel nicht für diese bestimmte Bestellung vorgesehen war, war es weniger wahrscheinlich, dass sie später aufgezeichnet werden konnten.</p>
<div class="NOTE">
<h5>Note</h5>
<p>Karte nur einmal durch das Lesegerät ziehen ist in Retail Version 8.1.3 nicht unterstützt. Debitorenaufträge in Version 8.1.3 verwenden den gleichen Ablauf, der verwendet wurde, bevor die Omnikanal-Tokenisierungsfunktion implementiert wurde.</p>
</div>
<h3 id="cards-that-cant-issue-recurring-card-tokens">Karten, die keine wiederkehrenden Kartentoken ausgeben können</h3>
<p>Einige Karten können nicht für Omnikanal-Zahlungen verwendet werden, da sie keine wiederkehrende Kartentoken unterstützen. Wenn ein Auftrag am POS erstellt wird, wenn die Anzahlung vorgenommen wird, indem eine Karte verwendet wird, die keine wiederkehrende Kartentoken unterstützt, wird der vorherige Kartentokenisierungsfluss verwendet. Daher muss ein Debitor, der eine Zahlung bereitstellen möchte,, die für die nachfolgende Auftragserfüllung verwendet wird, eine zweite Karte vorweisen. Wenn die zweite Karte keine wiederkehrenden Kartentoken unterstützt, wird die Tokenisierungsaktivität abgelehnt, und der Kassierer wird aufgefordert, den Debitor zu bitten, eine andere Karte bereitzustellen.</p>
<h3 id="using-a-different-card">Eine andere Karte verwenden</h3>
<p>Ein Debitor, der in den Shop kommt, um den Auftrag abzuohlen, hat die Option, eine andere zu verwenden. Wenn der Kassierer zum Zeitpunkt der Abolung der Bestellung die Aufforderung erhält <strong>Verfügbare Zahlungsmethode verwenden</strong> kann er oder sie den Kunden fragen, ob er die selbe Karte verwenden möchte. Wenn der Debitor die Karte verloren hat, die verwendet wurde, um einen Auftrag zu erstellen und für den Auftrag bezahlt möchte, indem er eine andere Karte verwendet, kann der Kassierer <strong>Eine andere Zahlungsmethode verwenden</strong> auswählen. Wenn der Kunde später zurückkehrt, um mehr Artikel für denselben Auftrag abzuholen, kann der Kassier, wenn die ursprüngliche Kartenautorisierung noch gültig ist, erneut fragen, ob der Debitor diese Karte verwenden möchte.</p>
<h3 id="invalid-authorizations">Ungültige Autorisierungen</h3>
<p>Wenn die Karte, die verwendet wurde, um einen Auftrag zu erstellen, nicht mehr gültig ist, wenn Produkte für die Abholung ausgewählt werden, wird die Zahlungs-Anforderung fehlschlagen. Der POS-Zahlungskonnektor versucht dann, eine neue Autorisierung aufzuzeichnen und zu erstellen, indem er die gleichen Kartendetails verwendet. Wenn die neue Autorisierung oder Erfassung fehlschlägt, wird der Kassierer informiert, dass die Zahlung nicht verarbeitet werden kann. Der Kassierer muss dann eine neue Zahlung vom Debitor erhalten.</p>
<h3 id="multiple-available-payments">Mehrere verfügbare Zahlungen</h3>
<p>Wenn ein Auftrag, der mehrere Zahlungsmittel und mehrere Positionen beinhaltet, verarbeitet wird, wird der Kassierer aufgefordert zuerst die <strong>Verfügbare Zahlungsmethode zu verwenden</strong>. Sind mehrere Karten vorhanden, wenn der Kassierer <strong>Verfügbare Zahlungsmethode verwenden</strong> auswählt, werden bestehende Karten (Zahlungsmittel) erfasst, bis der Saldo für die Waren, die abgeholt werden, ausgeglichen ist. Der Kassierer hat nicht die Option, die Karte auszuwählen, die für die Waren verwendet werden soll, die abgeholt werden.</p>
<h2 id="related-topics">Verwandte Themen</h2>
<ul>
<li><a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail">FAQs zu Zahlungen</a></li>
<li><a href="https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3">Zahlungskonnektor von Dynamics 365 für Adyen</a></li>
<li><a href="https://docs.microsoft.com/dynamics365/commerce/cpe-bopis">BOPIS in einer Dynamics 365 Commerce-Auswertungsumgebung konfigurieren</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
