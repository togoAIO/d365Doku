<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Fiscal printer integration sample for Italy | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Fiscal printer integration sample for Italy | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="fiscal-printer-integration-sample-for-italy" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="29">Fiscal printer integration sample for Italy</h1>

<h2 id="introduction" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="33">Introduction</h2>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="35">The Commerce functionality for Italy includes a sample integration of the point of sale (POS) with a fiscal printer. The sample extends the <a href="fiscal-integration-for-retail-channel.html" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="35">fiscal integration functionality</a> so that it works with <a href="https://www.epson.it/products/sd/pos-printer/epson-fp-90iii-series" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="35">Epson FP-90III Series</a> printers from Epson, and it enables communication with a fiscal printer in the web server mode via the EpsonFPMate web-service using Fiscal ePOS-Print API. The sample supports the Registratore Telematico (RT) mode only. The sample is provided in the form of source code and is part of the Retail software development kit (SDK).</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="37">Microsoft doesn't release any hardware, software, or documentation from Epson. For information about how to get the fiscal printer and operate it, contact <a href="https://www.epson.it" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="37">Epson Italia S.p.A</a>.</p>
<h2 id="scenarios" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="39">Scenarios</h2>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="41">The following scenarios are covered by the fiscal printer integration sample for Italy:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="43">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="43"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="43">Sales scenarios:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="45">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="45"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="45">Print a fiscal receipt for cash-and-carry sales and returns.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="46"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="46">Capture a response from the fiscal printer, and store it in the channel database.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="47"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="47">Taxes:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="49">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="49">Map to the fiscal printer's tax codes (departments).</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="50">Transfer mapped tax data to the fiscal printer.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="51">Print taxes on a fiscal receipt.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="53"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="53">Payments:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="55">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="55">Map to the fiscal printer's methods of payment.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="56">Print payments on a fiscal receipt.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="57">Print change information.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="59"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="59">Print line discounts.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="60"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="60">Gift cards:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="62">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="62">Exclude an issued/re-charged gift card line from a fiscal receipt for a sale.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="63">Print a payment that uses a gift card as a regular method of payment.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="65"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="65">Print fiscal receipts for customer order operations:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="67">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="67">A fiscal receipt isn't printed for a customer order deposit.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="68">Print a fiscal receipt for carry-out lines of a hybrid customer order.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="69">Print a fiscal receipt for the pickup operation for a customer order.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="70">Print a fiscal receipt for a return order.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="72"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="72">Print a bar code for the receipt number on a fiscal receipt.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="73"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="73">Print the <a href="emea-ita-customer-information.html" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="73">customer information</a> that is specified for a sales transaction on a fiscal receipt. An example of this information is the customer's lottery code.</p>
</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="75"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="75">End of day statements (fiscal X and fiscal Z reports).</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="76"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="76">Error handling, such as the following options:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="78">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="78">Retry fiscal registration if a retry is possible, such as if the fiscal printer isn't connected, isn't ready or isn't responding, the printer is out of paper, or there is a paper jam.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="79">Postpone fiscal registration.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="80">Skip fiscal registration, or mark the transaction as registered, and include info codes to capture the reason for the failure and additional information.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="81">Check the availability of the fiscal printer before a new sales transaction is opened or a sales transaction is finalized.</li>
</ul>
</li>
</ul>
<h3 id="default-data-mapping" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="83">Default data mapping</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="85">The following default data mapping is included in the fiscal document provider configuration that is provided as part of the fiscal integration sample:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="87">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="87"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="87">Value-added tax (VAT) rates mapping:</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="89"><em sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="89">1 : 22.00 ; 2 : 10.00 ; 3 : 4.00 ; 4 : 0.00</em></p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="91"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="91">Tender type mapping:</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="93"><em sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="93">1 : 0 ; 2 : 1 ; 3 : 2 ; 4 : 2 ; 5 : 0 ; 6 : 0 ; 7 : 0 ; 8 : 2 ; 9 : 0 ; 10 : 2 ; 11 : 1</em></p>
</li>
</ul>
<h3 id="gift-cards" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="95">Gift cards</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="97">The fiscal printer integration sample implements the following rules that are related to gift cards:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="99">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="99">Exclude sales lines that are related to the <em sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="99">Issue gift card</em> and <em sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="99">Add to gift card</em> operations from the fiscal receipt.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="100">Don't print a fiscal receipt if it consists only of gift card lines.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="101">Deduct the total amount of gift cards that are issued or re-charged in a transaction from payment lines of the fiscal receipt.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="102">Save calculated adjustments of payment lines in the channel database with a reference to a corresponding fiscal transaction.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="103">Payment by gift card is considered a regular payment.</li>
</ul>
<h3 id="customer-deposits-and-customer-order-deposits" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="105">Customer deposits and customer order deposits</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="107">The fiscal printer integration sample implements the following rules that are related to customer deposits and customer order deposits:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="109">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="109">Don't print a fiscal receipt if a transaction is a customer deposit.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="110">Don't print a fiscal receipt if a transaction contains only a customer order deposit or a customer order deposit refund.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="111">Print the amount of the previously paid deposit on a fiscal receipt for a customer order pickup operation.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="112">Deduct the customer order deposit amount from payment lines when a hybrid customer order is created.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="113">Save calculated adjustments of payment lines in the channel database with a reference to a fiscal transaction for a hybrid customer order.</li>
</ul>
<h3 id="limitations-of-the-sample" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="115">Limitations of the sample</h3>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="117">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="117">The fiscal printer supports only scenarios where sales tax is included in the price. Therefore, the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="117">Price include sales tax</strong> option must be set to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="117">Yes</strong> for both stores and customers.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="118">Daily reports (fiscal X and fiscal Z) are printed by using the format that is embedded in the fiscal printer's firmware.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="119">The fiscal printer doesn't support mixed transactions. The <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="119">Prohibit mixing sales and returns in one receipt</strong> option should be set to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="119">Yes</strong> in POS functionality profiles.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="120">The sample supports integration only with a fiscal printer that is working in the RT (Registratore Telematico) mode.</li>
</ul>
<h2 id="set-up-commerce-for-italy" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="122">Set up Commerce for Italy</h2>
<h3 id="configure-fiscal-integration" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="124">Configure fiscal integration</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="126">Complete the fiscal integration setup steps as described in <a href="setting-up-fiscal-integration-for-retail-channel.html" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="126">Set up the fiscal integration for Commerce channels</a>:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="128">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="128"><a href="setting-up-fiscal-integration-for-retail-channel.html#set-up-a-fiscal-registration-process" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="128">Set up a fiscal registration process</a>. Note also the settings for the fiscal registration process that are <a href="#set-up-the-registration-process" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="128">specific to this fiscal printer integration sample</a>.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="129"><a href="setting-up-fiscal-integration-for-retail-channel.html#set-up-fiscal-texts-for-discounts" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="129">Set up fiscal texts for discounts</a>.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="130"><a href="setting-up-fiscal-integration-for-retail-channel.html#set-error-handling-settings" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="130">Set error handling settings</a>.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="131"><a href="setting-up-fiscal-integration-for-retail-channel.html#set-up-fiscal-xz-reports-from-the-pos" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="131">Set up fiscal X/Z reports from the POS</a>.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="132"><a href="setting-up-fiscal-integration-for-retail-channel.html#enable-manual-execution-of-postponed-fiscal-registration" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="132">Enable manual execution of postponed fiscal registration</a>.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="133"><a href="emea-ita-customer-information.html#setup" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="133">Set up the functionality for management of customer information in POS</a></li>
</ul>
<h3 id="enable-extensions" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="135">Enable extensions</h3>
<h4 id="commerce-runtime-extension-components" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="137">Commerce runtime extension components</h4>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="139">The Commerce runtime extension components are included in the Retail SDK. To complete the following procedures, open the CRT solution, <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="139">CommerceRuntimeSamples.sln</strong>, under <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="139">RetailSdk\SampleExtensions\CommerceRuntime</strong>.</p>
<ol sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="141">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="141"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="141">Find the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="141">Runtime.Extensions.DocumentProvider.EpsonFP90IIISample</strong> project, and build it.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="142"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="142">In the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="142">Extensions.DocumentProvider.EpsonFP90IIISample\bin\Debug</strong> folder, find the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="142">Contoso.Commerce.Runtime.DocumentProvider.EpsonFP90IIISample.dll</strong> assembly file.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="143"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="143">Copy the assembly file to the CRT extensions folder:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="145">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="145"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="145">Commerce Scale Unit:</strong> Copy the assembly to the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="145">\bin\ext</strong> folder under the Microsoft Internet Information Services (IIS) Commerce Scale Unit site location.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="146"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="146">Local CRT on Modern POS:</strong> Copy the assembly to the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="146">\ext</strong> folder under the local CRT client broker location.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="148"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="148">Find the extensions configuration file for CRT:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="150">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="150"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="150">Commerce Scale Uni:</strong> The file is named <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="150">commerceruntime.ext.config</strong>, and it's in the bin\ext folder under the IIS Commerce Scale Uni site location.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="151"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="151">Local CRT on Modern POS:</strong> The file is named <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="151">CommerceRuntime.MPOSOffline.Ext.config</strong>, and it's under the local CRT client broker location.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="153"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="153">Register the CRT change in the extensions configuration file. Add <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="153">source=&quot;assembly&quot; value=&quot;Contoso.Commerce.Runtime.DocumentProvider.EpsonFP90IIISample&quot;</strong>.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="154"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="154">Restart the Commerce Scale Unit:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="156">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="156"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="156">Commerce Scale Uni:</strong> Restart the Commerce Scale Uni site from IIS Manager.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="157"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="157">Client broker:</strong> End the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="157">dllhost.exe</strong> process in Task Manager, and then restart Modern POS.</li>
</ul>
</li>
</ol>
<h4 id="hardware-station-extension-components" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="159">Hardware station extension components</h4>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="161">The Hardware station extension components are included in the Retail SDK. To complete the following procedures, open the Hardware Station solution, <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="161">HardwareStationSamples.sln</strong>, under <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="161">RetailSdk\SampleExtensions\HardwareStation</strong>.</p>
<ol sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="163">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="163"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="163">Find the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="163">HardwareStation.Extensions.EpsonFP90IIIFiscalDeviceSample</strong> project, and build it.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="164"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="164">In the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="164">Extensions.EpsonFP90IIIFiscalDeviceSample\bin\Debug</strong> folder, find the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="164">Contoso.Commerce.HardwareStation.EpsonFP90IIIFiscalDeviceSample.dll</strong> assembly file.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="165"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="165">Copy the files to a deployed Hardware station machine:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="167">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="167"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="167">Remote Hardware station:</strong> Copy the files to the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="167">bin</strong> folder under the IIS Hardware station site location.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="168"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="168">Local Hardware station:</strong> Copy the files to the Modern POS client broker location.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="170"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="170">Find the configuration file for the Hardware station's extensions. The file is named <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="170">HardwareStation.Extension.config</strong>:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="172">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="172"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="172">Remote Hardware station:</strong> The file is located under the IIS Hardware station site location.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="173"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="173">Local Hardware station:</strong> The file is located under the Modern POS client broker location.</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="175"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="175">Add the following section to the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="175">composition</strong> section of the config file.</p>
<pre><code class="lang-xml" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="177">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.HardwareStation.Extension.EpsonFP90IIIFiscalDeviceSample&quot; /&gt;
</code></pre>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="181"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="181">Restart the Hardware station service:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="183">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="183"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="183">Remote Hardware station:</strong> Restart the Hardware station site from IIS Manager.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="184"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="184">Local Hardware station:</strong> End the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="184">dllhost.exe</strong> process in Task Manager, and then restart Modern POS.</li>
</ul>
</li>
</ol>
<h3 id="set-up-the-registration-process" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="186">Set up the registration process</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="188">To enable the registration process, follow these steps to set up Headquarters. For more details, see <a href="setting-up-fiscal-integration-for-retail-channel.html#set-up-a-fiscal-registration-process" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="188">Set up a fiscal registration process</a>.</p>
<ol sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="190">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="190">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="190">Retail and Commerce &gt; Channel Setup &gt; Fiscal Integration &gt; Fiscal Connectors</strong>. Import the configuration from <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="190">RetailSdk\SampleExtensions\HardwareStation\Entension.EpsonFP90IIIFiscalDeviceSample\Configuration\ConnectorEpsonFP90IIISample.xml</strong>.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="191">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="191">Retail and Commerce &gt; Channel Setup &gt; Fiscal Integration &gt; Fiscal Document providers</strong>. Import the configuration from <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="191">RetailSdk\SampleExtensions\CommerceRuntime\Entension.DocumentProvider.EpsonFP90IIISample\Configuration\DocumentProviderEpsonFP90IIISample.xml</strong>.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="192">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="192">Retail and Commerce &gt; Channel Setup &gt; Fiscal Integration &gt; Connector Technical profiles</strong>. Create a new profile, and select the loaded connector from the earlier step. Update the connection settings if an update is required.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="193">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="193">Retail and Commerce &gt; Channel Setup &gt; Fiscal Integration &gt; Connector Functional profiles</strong>. Create a new profile, and select the loaded connector and document provider from the earlier steps. Update data mapping settings if an update is required.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="194">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="194">Retail and Commerce &gt; Channel Setup &gt; Fiscal Integration &gt; Connector Functional group</strong>. Create a new group, and select the connector functional profile from the earlier step.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="195">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="195">Retail and Commerce &gt; Channel Setup &gt; Fiscal Integration &gt; Registration process</strong>. Create a new process, and select the connector functional group from the earlier step.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="196">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="196">Retail and Commerce &gt; Channel setup &gt; POS setup &gt; POS profiles &gt; Functionality profiles</strong>. Open the functionality profile that is linked to the store where the registration process should be activated. On the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="196">Fiscal registration process</strong> FastTab, select the registration process that was created earlier.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="197">Go to <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="197">Retail and Commerce &gt; Channel setup &gt; POS setup &gt; POS profiles &gt; Hardware profiles</strong>. Open the hardware profile that is linked to the Hardware station that the fiscal printer will be connected to. On the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="197">Fiscal peripherals</strong> FastTab, select the connector technical profile.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="198">Open the distribution schedule (<strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="198">Retail and Commerce &gt; Retail and Commerce IT &gt; Distribution schedule</strong>), and select jobs <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="198">1070</strong> and <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="198">1090</strong> to transfer data to the channel database.</li>
</ol>
<h3 id="production-environment" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="200">Production environment</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="202">Follow these steps to create deployable packages that contain Commerce components, and to apply those packages in a production environment.</p>
<ol sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="204">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="204"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="204">Complete the steps that are described in the <a href="#enable-extensions" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="204">Enable extensions</a> section earlier in this topic.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="205"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="205">Make the following changes in the package configuration files under the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="205">RetailSdk\Assets</strong> folder:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="207">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="207"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="207">In the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="207">commerceruntime.ext.config</strong> and <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="207">CommerceRuntime.MPOSOffline.Ext.config</strong> configuration files, add the following line to the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="207">composition</strong> section.</p>
<pre><code class="lang-xml" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="209">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.Runtime.DocumentProvider.EpsonFP90IIISample&quot; /&gt;
</code></pre>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="213"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="213">In the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="213">HardwareStation.Extension.config</strong> configuration file, add the following line to the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="213">composition</strong> section.</p>
<pre><code class="lang-xml" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="215">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.HardwareStation.Extension.EpsonFP90IIIFiscalDeviceSample&quot; /&gt;
</code></pre>
</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="219"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="219">Make the following changes in the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="219">BuildTools\Customization.settings</strong> package customization configuration file:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="221">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="221"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="221">Add the following line to include the CRT extension in the deployable packages.</p>
<pre><code class="lang-xml" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="223">&lt;ISV_CommerceRuntime_CustomizableFile Include=&quot;$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.EpsonFP90IIISample.dll&quot;/&gt;
</code></pre>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="227"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="227">Add the following line to include the Hardware station extension in the deployable packages.</p>
<pre><code class="lang-xml" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="229">&lt;ISV_HardwareStation_CustomizableFile Include=&quot;$(SdkReferencesPath)\Contoso.Commerce.HardwareStation.EpsonFP90IIIFiscalDeviceSample.dll&quot;/&gt;
</code></pre>
</li>
</ul>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="233"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="233">Start the MSBuild Command Prompt for Visual Studio utility, and run <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="233">msbuild</strong> under the Retail SDK folder to create deployable packages.</p>
</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="234"><p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="234">Apply the packages via Microsoft Dynamics Lifecycle Services (LCS) or manually. For more information, see <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/commerce/dev-itpro/retail-sdk/retail-sdk-packaging" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="234">Create deployable packages (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a>.</p>
</li>
</ol>
<h2 id="design-of-extensions" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="236">Design of extensions</h2>
<h3 id="commerce-runtime-extension-design" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="238">Commerce runtime extension design</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="240">The purpose of the extension that is a fiscal document provider is to generate printer-specific documents and handle responses from the fiscal printer.</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="242">The Commerce runtime extension is <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="242">Runtime.Extensions.DocumentProvider.EpsonFP90IIISample</strong>.</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="244">For more details about the design of the fiscal integration solution, see <a href="fiscal-integration-for-retail-channel.html#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="244">Fiscal registration process and fiscal integration samples for fiscal devices</a>.</p>
<h4 id="request-handler" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="246">Request handler</h4>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="248">The <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="248">DocumentProviderEpsonFP90III</strong> request handler is the entry point for the request to generate documents from the fiscal printer.</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="250">The handler is inherited from the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="250">INamedRequestHandler</strong> interface. The <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="250">HandlerName</strong> method is responsible for returning the name of the handler. The handler name should match the connector document provider name that is specified in Headquarters.</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="252">The connector supports the following requests:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="254">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="254"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="254">GetFiscalDocumentDocumentProviderRequest</strong> – This request contains information about what document should be generated. It returns a printer-specific document that should be registered in the fiscal printer.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="255"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="255">GetSupportedRegistrableEventsDocumentProviderRequest</strong> – This request returns the list of events to subscribe to. Currently, the following events are supported: sales, printing X report, and printing Z report.</li>
</ul>
<h4 id="configuration" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="257">Configuration</h4>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="259">The configuration file is located in the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="259">Configuration</strong> folder of the extension project. The purpose of the file is to enable settings for the document provider to be configured from Headquarters. The file format is aligned with the requirements for fiscal integration configuration. The following settings are added:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="261">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="261">VAT codes mapping</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="262">VAT rates mapping</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="263">Tender type mapping</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="264">Barcode type for receipt number</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="265">Deposit payment type</li>
</ul>
<h3 id="hardware-station-extension-design" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="267">Hardware station extension design</h3>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="269">The purpose of the extension that is a fiscal connector is to communicate with the fiscal printer.</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="271">The Hardware station extension is <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="271">HardwareStation.Extension.EpsonFP90IIIFiscalDeviceSample</strong>. This extension uses the HTTP protocol to submit documents that the Commerce runtime extension generates to the fiscal printer. It also handles the responses that are received from the fiscal printer.</p>
<h4 id="request-handler-1" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="273">Request handler</h4>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="275">The <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="275">EpsonFP90IIISample</strong> request handler is the entry point for handling request to the fiscal peripheral device.</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="277">The handler is inherited from the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="277">INamedRequestHandler</strong> interface. The <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="277">HandlerName</strong> method is responsible for returning the name of the handler. The handler name should match the fiscal connector name that is specified in Headquarters.</p>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="279">The connector supports the following requests:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="281">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="281"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="281">SubmitDocumentFiscalDeviceRequest</strong> – This request sends documents to printers and returns the response from the fiscal printer.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="282"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="282">IsReadyFiscalDeviceRequest</strong> – This request is used for a health check of the device.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="283"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="283">InitializeFiscalDeviceRequest</strong> – This request is used for printer initialization.</li>
</ul>
<h4 id="configuration-1" sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="285">Configuration</h4>
<p sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="287">The configuration file is located in the <strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="287">Configuration</strong> folder of the extension project. The purpose of the file is to enable settings for the connector to be configured from Headquarters. The file format is aligned with the requirements for fiscal integration configuration. The following settings are added:</p>
<ul sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="289">
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="289"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="289">Endpoint address</strong> – The URL of the printer.</li>
<li sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="290"><strong sourcefile="articles/commerce/localizations/emea-ita-fpi-sample.md" sourcestartlinenumber="290">Date and time synchronization</strong> – This setting specifies whether the date and time of the printer must be synced with the connected Hardware station.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
