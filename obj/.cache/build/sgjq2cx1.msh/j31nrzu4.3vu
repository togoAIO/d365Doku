<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Create an Azure storage account and a key vault | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Create an Azure storage account and a key vault | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="create-an-azure-storage-account-and-a-key-vault" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="32">Create an Azure storage account and a key vault</h1>


<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="38">The Electronic invoicing add-on service takes responsibility for storing all your business data in the Microsoft Azure resources that are owned by your company. To ensure that the service works correctly, and that all the business data that is needed for and generated by the Electronic invoicing add-on is accessed only by the add-on, you must create two main Azure resources:</p>
<ul sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="40">
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="40">An Azure storage account (Blob storage) to store electronic invoices</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="41">An Azure key vault to store certificates and the Uniform Resource Identifier (URI) of the storage account</li>
</ul>
<div class="NOTE" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="43">
<h5>Note</h5>
<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="44">A dedicated key vault resource and customer Blob storage must be allocated specifically for use with the Electronic invoicing add-on.</p>
</div>
<h2 id="prerequisites" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="46">Prerequisites</h2>
<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="48">Before you can complete the steps in this topic, you must make sure that the following tasks have been completed:</p>
<ul sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="50">
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="50">Create a key vault resource in Azure. For more information, see <a href="https://docs.microsoft.com/azure/key-vault/general/overview" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="50">About Azure Key Vault</a>.</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="51">Create an Azure storage account (Blob storage). For more information, see <a href="https://docs.microsoft.com/azure/storage/blobs/" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="51">Maintaining Azure Storage Account</a>.</li>
</ul>
<h2 id="overview" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="53">Overview</h2>
<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="55">In this topic, you will complete two main steps:</p>
<ul sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="57">
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="57">Set up the Azure storage account to get the storage account URI.</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="58">Set up the key vault to store the storage account URI.</li>
</ul>
<h2 id="set-up-the-azure-storage-account-to-get-the-storage-account-uri" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="60">Set up the Azure storage account to get the storage account URI</h2>
<ol sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="62">
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="62"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="62">Open the storage account that you plan to use with the Electronic invoicing add-on.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="63"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="63">Go to <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="63">Blob service</strong> &gt; <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="63">Containers</strong>, and create a new container.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="64"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="64">Enter a name for the container, and set the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="64">Public access level</strong> field to <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="64">Private (no anonymous access)</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="65"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="65">Open the container, and go to <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="65">Settings &gt; Access policy</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="66"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="66">Select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="66">Add policy</strong> to add a stored access policy.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="67"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="67">Set the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="67">Identifier</strong> and <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="67">Permissions</strong> fields as appropriate. In the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="67">Permissions</strong> field, you should select all permissions.</p>
<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="69"><img src="media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="69" alt="Granting Blob storage permission"></p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="71"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="71">Enter the start and expiry dates. The expiry date should be in future.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="72"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="72">Select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="72">OK</strong> to save the policy, and then save your changes to the container.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="73"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="73">Return to the storage account, and open <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="73">Storage Explorer (preview)</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="74"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="74">Right-click the container, and then select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="74">Get Shared Access Signature</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="75"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="75">In the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="75">Shared Access Signature</strong> dialog box, copy and store the value in the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="75">URI</strong> field. This value will be used in the next procedure and will be referred to as the <em sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="75">shared access signature URI</em>.</p>
<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="77"><img src="media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="77" alt="Selecting and copying the URI value"></p>
</li>
</ol>
<h2 id="set-up-the-key-vault-to-store-the-storage-account-uri" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="79">Set up the key vault to store the storage account URI</h2>
<ol sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="81">
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="81"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="81">Open the key vault that you intend to use with the Electronic invoicing add-on.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="82"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="82">Go to <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="82">Settings</strong> &gt; <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="82">Secrets</strong>, and then select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="82">Generate/Import</strong> to create a new secret.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="83"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="83">On the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="83">Create a secret</strong> page, in the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="83">Upload options</strong> field, select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="83">Manual</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="84"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="84">Enter the name of the secret. This name will be used during setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the <em sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="84">key vault secret name</em>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="85"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="85">In the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="85">Value</strong> field, select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="85">Shared Access Signature URI</strong>, and then select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="85">Create</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="86"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="86">Set up the access policy to grant the Electronic invoicing add-on the correct level of secure access to the secret you created. Go to <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="86">Settings &gt; Access policy</strong>, and select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="86">Add Access Policy</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="87"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="87">Set the secret permissions for the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="87">Get</strong> and <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="87">List</strong> operations.</p>
<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="89"><img src="media/e-Invoicing-services-create-azure-resources-grant-service-access.png" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="89" alt="Granting service access"></p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="91"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="91">Set the certificate permissions for <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="91">Get</strong> and <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="91">List</strong> operations.</p>
<p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="93"><img src="media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png" sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="93" alt="Granting certificate permission"></p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="95"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="95">In the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="95">Principal</strong> dialog box, select the principal by adding <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="95">Electronic invoicing add-on</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="96"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="96">Select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="96">Add</strong>, and then select <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="96">Save Key Vault changes</strong>.</p>
</li>
<li sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="97"><p sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="97">On the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="97">Overview</strong> page, copy the <strong sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="97">DNS name</strong> value for the key vault. This value will be used during setup of the service in RCS and will be referred as the <em sourcefile="articles/finance/localizations/e-invoicing-create-azure-storage-account-key-vault.md" sourcestartlinenumber="97">key vault URI</em>.</p>
</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
