<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Enable and configure auto charges by channel | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Enable and configure auto charges by channel | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="enable-and-configure-auto-charges-by-channel">Enable and configure auto charges by channel</h1>

<p>This topic explains how to enable and configure automatic charges (auto charges) by channel in Microsoft Dynamics 365 Commerce.</p>
<h2 id="overview">Overview</h2>
<p>You might have scenarios where recycling fees or other fees must be applied to a group of products that are sold in all or some stores in a specific state (for example, California). The <strong>Enable filter auto charges by channel</strong> feature in Commerce lets you specify auto charges by channel (for example, a specific brick-and-mortar channel). This feature is available in Dynamics 365 Commerce version 10.0.10 and later.</p>
<p>To enable and configure auto charges by channel, you must complete the following tasks:</p>
<ul>
<li>Turn on the <strong>Enable filter auto charges by channel</strong> feature.</li>
<li>Configure the organization hierarchy purpose.</li>
<li>Define auto charges by channel.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>The <strong>Enable filter auto charges by channel</strong> feature works only if the advanced auto charges feature is also turned on. For information about how to turn on the advanced auto charges feature, see <a href="omni-auto-charges.html">Omni-channel advanced auto charges</a>.</p>
</div>
<h2 id="turn-on-the-enable-filter-auto-charges-by-channel-feature">Turn on the Enable filter auto charges by channel feature</h2>
<p>To enable auto charges by channel in Commerce, follow these steps.</p>
<ol>
<li>Go to <strong>System administrator &gt; Workspaces &gt; Feature management</strong>.</li>
<li>On the <strong>Not enabled</strong> tab, in the <strong>Feature name</strong> list, find and select <strong>Enable filter auto charges by channel</strong>.</li>
<li>In the lower-right corner, select <strong>Enable now</strong>. After the feature has been turned on, it will appear in the list on the <strong>All</strong> tab.</li>
<li>Go to <strong>Retail and Commerce &gt; Retail and Commerce IT &gt; Distribution schedule</strong>.</li>
<li>In the left pane, find and select the <strong>1110</strong> (<strong>Global configuration</strong>) job.</li>
<li>On the Action Pane, select <strong>Run now</strong> to propagate the configuration changes.</li>
</ol>
<div class="WARNING">
<h5>Warning</h5>
<p>If you turn off the <strong>Enable filter auto charges by channel</strong> feature after you've already used it, the <strong>Retail channel relation</strong> field under <strong>Auto charges</strong> will no longer appear, and you will lose all existing configurations. If removal of the <strong>Retail channel relation</strong> configurations will cause auto charges rules to be duplicated, an attempt to turn off the feature will fail. Before you turn off the feature, be sure to review all auto charges rules and make any required changes.</p>
</div>
<h2 id="configure-the-organization-hierarchy-purpose">Configure the organization hierarchy purpose</h2>
<p>A new organization hierarchy purpose that is named <strong>Retail auto charge</strong> has been created to manage the hierarchy for auto charges by channel.</p>
<p>To assign a default hierarchy to an organization hierarchy purpose in Commerce, follow these steps.</p>
<ol>
<li>Go to <strong>Organization administration &gt; Organizations &gt; Organization hierarchy purposes</strong>.</li>
<li>In the left pane, select <strong>Retail auto charge</strong>.</li>
<li>Under <strong>Assigned hierarchies</strong>, select <strong>Add</strong>.</li>
<li>In the <strong>Organization hierarchies</strong> dialog box, select an organization hierarchy (for example, <strong>Retail Stores by Region</strong>), and then select <strong>OK</strong>.</li>
<li>Under <strong>Assigned hierarchies</strong>, select <strong>Set as default</strong>.</li>
<li>Go to <strong>Retail and Commerce &gt; Retail and Commerce IT &gt; Distribution schedule</strong>.</li>
<li>In the left pane, find and select the <strong>1040</strong> (<strong>Products</strong>) job.</li>
<li>On the Action Pane, select <strong>Run now</strong>.</li>
<li>Repeat the previous two steps to run the <strong>1070</strong> (<strong>Channel configuration</strong>) and <strong>1110</strong> (<strong>Global configuration</strong>) jobs.</li>
</ol>
<p><img src="media/Auto-charges-org-hierarchy-purpose.png" alt="Configuration of the Retail auto charge organization hierarchy purpose"></p>
<h2 id="define-auto-charges-by-channel">Define auto charges by channel</h2>
<p>After you've turned on the <strong>Enable filter auto charges by channel</strong> feature and configured the <strong>Retail auto charge</strong> organization hierarchy purpose, auto charges by channel can be defined at either the order header level or the order line level.</p>
<p>To define auto charges by channel in Commerce, follow these steps.</p>
<ol>
<li><p>Go to <strong>Accounts receivable &gt; Charges setup &gt; Auto charges</strong>.</p>
</li>
<li><p>In the left pane, in the <strong>Level</strong> field, select either <strong>Header</strong> or <strong>Line</strong>, depending on your business requirements.</p>
</li>
<li><p>In the <strong>Retail channel code</strong> field, select the appropriate channel code (for example, <strong>Table</strong> or <strong>Group</strong>). If the default setting, <strong>All</strong>, is used, charge rules are applied to all channels.</p>
<ul>
<li>If you select <strong>Group</strong>, make sure that a retail channel charges group is created at <strong>Retail and Commerce &gt; Channel setup &gt; Charges &gt; Retail channel charge groups</strong>.</li>
<li>If you select <strong>Table</strong>, you can select a specific channel (for example, <strong>San Francisco</strong>) in the <strong>Retail channel relation</strong> field.</li>
</ul>
</li>
<li><p>Go to <strong>Retail and Commerce &gt; Retail and Commerce IT &gt; Distribution schedule</strong>.</p>
</li>
<li><p>In the left pane, find and select the <strong>1040</strong> (<strong>Products</strong>) job.</p>
</li>
<li><p>On the Action Pane, select <strong>Run now</strong>.</p>
</li>
<li><p>Repeat the previous two steps to run the <strong>1070</strong> (<strong>Channel configuration</strong>) and <strong>1110</strong> (<strong>Global configuration</strong>) jobs.</p>
</li>
</ol>
<p><img src="media/Auto-charges-line-charge-by-channel.png" alt="Auto charges defined by channel"></p>
<h2 id="example-scenario">Example scenario</h2>
<p>The following example outlines the steps that are required to configure a product so that recycling fees are charged when the product is sold through a San Francisco brick-and-mortar channel. The example also shows how the auto charges appear in the Commerce point of sale (POS) application.</p>
<p>The organization defines a charges code that is named <strong>RECYCLE</strong>, as shown in the following illustration.</p>
<p><img src="media/Auto-charges-charge-code.png" alt="RECYCLE charges code"></p>
<p>An auto charge is created at the line level. It has the following configuration:</p>
<ul>
<li>The <strong>Account code</strong> field is set to <strong>All</strong>.</li>
<li>The <strong>Item code</strong> field is set to <strong>Table</strong>.</li>
<li>The <strong>Item relation</strong> field is set to product ID <strong>91001</strong>.</li>
<li>The <strong>Mode of delivery code</strong> field is set to <strong>All</strong>.</li>
<li>The <strong>Retail channel code</strong> field is set to <strong>Table</strong>.</li>
<li>The <strong>Retail channel relation</strong> field is set to the <strong>San Francisco</strong> store.</li>
</ul>
<p>An auto charges line is created. It has the following configuration:</p>
<ul>
<li>The <strong>Currency</strong> field is set to <strong>USD</strong>.</li>
<li>The <strong>Charges code</strong> field is set to <strong>RECYCLE</strong>.</li>
<li>The <strong>Category</strong> field is set to <strong>Fixed</strong>.</li>
<li>The <strong>Charges</strong> field is set to <strong>$6.25</strong>.</li>
</ul>
<p><img src="media/Auto-charges-recyclingfee-line-fee.png" alt="Configuration of the line-level auto charge and the auto charges line"></p>
<p>In the POS application, a sales order is created in the <strong>San Francisco</strong> store channel. The <strong>Charges</strong> line shows the recycling fee of <strong>$6.25</strong>.</p>
<p>By selecting <strong>Transaction options &gt; Charges &gt; Manage charges</strong> in the POS application, you can view the charges code and description for the recycling fee.</p>
<p><img src="media/pos-auto-charges-recyclingfee-line-fee.png" alt="Recycling fee in the POS application"></p>
<h2 id="additional-resources">Additional resources</h2>
<p><a href="omni-auto-charges.html">Omni-channel advanced auto charges</a></p>
<p><a href="pro-rate-charges-matching-lines.html">Prorate header charges to matching sales lines</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
