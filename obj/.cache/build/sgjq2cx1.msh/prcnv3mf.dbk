<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Enable Azure Data Lake Storage in a Dynamics 365 Commerce environment | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Enable Azure Data Lake Storage in a Dynamics 365 Commerce environment | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="enable-azure-data-lake-storage-in-a-dynamics-365-commerce-environment">Enable Azure Data Lake Storage in a Dynamics 365 Commerce environment</h1>


<p>This topic explains how to enable and test Azure Data Lake Storage for a Dynamics 365 Commerce environment, which is a prerequisite for enabling product recommendations.</p>
<h2 id="overview">Overview</h2>
<p>In the Dynamics 365 Commerce solution, all product and transaction information is tracked in the environment's Entity store. To make this data accessible to other Dynamics 365 services, such as data analytics, business intelligence, and personalized recommendations, it is necessary to connect the environment to a customer-owned Azure Data Lake Storage Gen 2 solution.</p>
<p>As Azure Data Lake Storage is configured in an environment, all necessary data is mirrored from the Entity store while still being protected and under customer's control.</p>
<p>If product recommendations or personalized recommendations are also enabled in the environment, then the product recommendations stack will be granted access to the dedicated folder in Azure Data Lake Storage to retrieve the customer’s data and compute recommendations based on it.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>Customers need to have Azure Data Lake Storage configured in an Azure subscription that they own. This topic does not cover the purchase of an Azure subscription or the setup of an Azure Data Lake Storage-enabled storage account.</p>
<p>For more information about Azure Data Lake Storage, see <a href="https://azure.microsoft.com/pricing/details/storage/data-lake">Azure Data Lake Storage Gen2 official documentation</a>.</p>
<h2 id="configuration-steps">Configuration steps</h2>
<p>This section covers the configuration steps necessary for enabling Azure Data Lake Storage in an environment as it relates to product recommendations.
For a more in-depth overview of the steps required to enable Azure Data Lake Storage, see <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/data-entities/entity-store-data-lake">Make entity store available as a Data Lake (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a>.</p>
<h3 id="enable-azure-data-lake-storage-in-the-environment">Enable Azure Data Lake Storage in the environment</h3>
<ol>
<li>Log in to the environment's back office portal.</li>
<li>Search for <strong>System Parameters</strong> and navigate to the <strong>Data connections</strong> tab.</li>
<li>Set <strong>Enable Data Lake integration</strong> to <strong>Yes</strong>.</li>
<li>Set <strong>Trickle update Data Lake</strong> to <strong>Yes</strong>.</li>
<li>Next, enter the following required information:
<ol>
<li><strong>Application ID</strong> // <strong>Application Secret</strong> // <strong>DNS Name</strong> - Needed to connect to KeyVault where the Azure Data Lake Storage secret is stored.</li>
<li><strong>Secret name</strong> - The secret name stored in KeyVault and used to authenticate with Azure Data Lake Storage.</li>
</ol>
</li>
<li>Save your changes in the top left corner of the page.</li>
</ol>
<p>The following image shows an example Azure Data Lake Storage configuration.</p>
<p><img src="./media/exampleADLSConfig1.png" alt="Example of Azure Data Lake Storage configuration"></p>
<h3 id="test-the-azure-data-lake-storage-connection">Test the Azure Data Lake Storage connection</h3>
<ol>
<li>Test the connection to KeyVault using the <strong>Test Azure Key Vault</strong> link.</li>
<li>Test the connection to Azure Data Lake Storage using the <strong>Test Azure Storage</strong> link.</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>If the tests fail, double-check that all of the KeyVault information added above is correct, then try again.</p>
</div>
<p>Once the connection tests are successful, you must enable automatic refresh for Entity store.</p>
<p>To enable automatic refresh for Entity store, follow these steps.</p>
<ol>
<li>Search for <strong>Entity Store</strong>.</li>
<li>In the list on the left, navigate to the <strong>RetailSales</strong> entry, and select <strong>Edit</strong>.</li>
<li>Ensure that <strong>Automatic Refresh Enabled</strong> is set to <strong>Yes</strong>, select <strong>Refresh</strong>, and then select <strong>Save</strong>.</li>
</ol>
<p>The following image shows an example of Entity store with automatic refresh enabled.</p>
<p><img src="./media/exampleADLSConfig2.png" alt="Example of Entity store with automatic refresh enabled"></p>
<p>Azure Data Lake Storage is now configured for the environment.</p>
<p>If not completed already, follow the steps for <a href="enable-product-recommendations.html">enabling product recommendations and personalization</a> for the environment.</p>
<h2 id="additional-resources">Additional resources</h2>
<p><a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/data-entities/entity-store-data-lake">Make entity store available as a data lake (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a></p>
<p><a href="product-recommendations.html">Product recommendations overview</a></p>
<p><a href="enable-product-recommendations.html">Enable product recommendations</a></p>
<p><a href="personalized-recommendations.html">Enable personalized recommendations</a></p>
<p><a href="personalization-gdpr.html">Opt out of personalized recommendations</a></p>
<p><a href="shop-similar-looks.html">Enable &quot;shop similar looks&quot; recommendations</a></p>
<p><a href="product.html">Add product recommendations on POS</a></p>
<p><a href="add-recommendations-control-pos-screen.html">Add recommendations to the transaction screen</a></p>
<p><a href="modify-product-recommendation-results.html">Adjust AI-ML recommendations results</a></p>
<p><a href="create-editorial-recommendation-lists.html">Manually create curated recommendations</a></p>
<p><a href="product-recommendations-demo-data.html">Create recommendations with demo data</a></p>
<p><a href="faq-recommendations.html">Product recommendations FAQ</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
