<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Inspect the configured ER component to prevent runtime issues | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Inspect the configured ER component to prevent runtime issues | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../finance/TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="inspect-the-configured-er-component-to-prevent-runtime-issues">Inspect the configured ER component to prevent runtime issues</h1>


<p>Every configured <a href="general-electronic-reporting.html">Electronic reporting (ER)</a> <a href="general-electronic-reporting.html#FormatComponentOutbound">format</a> and <a href="general-electronic-reporting.html#data-model-and-model-mapping-components">model mapping</a> component can be <a href="er-fillable-excel.html#validate-an-er-format">validated</a> at design time. During this validation, a consistency check runs to help prevent runtime issues that might occur, such as execution errors and performance degradation. For every issue found, the check provides the path of a problematic element. For some issues, an automatic fix is available.</p>
<p>By default, the validation is automatically applied in the following cases for an ER configuration that contains the previously mentioned ER components:</p>
<ul>
<li>You <a href="general-electronic-reporting.html#importing-an-er-component-from-lcs-to-use-it-internally">import</a> a new <a href="general-electronic-reporting.html#component-versioning">version</a> of an ER configuration into your instance of Microsoft Dynamics 365 Finance.</li>
<li>You change the <a href="general-electronic-reporting.html#component-versioning">status</a> of the editable ER configuration from <strong>Draft</strong> to <strong>Completed</strong>.</li>
<li>You <a href="general-electronic-reporting.html#upgrading-a-format-selecting-a-new-version-of-base-format-rebase">rebase</a> an editable ER configuration by applying a new base version.</li>
</ul>
<p>You can explicitly run this validation. Select one of the following three options, and follow the steps that are provided:</p>
<ul>
<li><p>Option 1:</p>
<ol>
<li>Go to <strong>Organization administration &gt; Electronic reporting &gt; Configurations</strong>.</li>
<li>In the configurations tree in the left pane, select the desired ER configuration that contains the ER format or ER model mapping component.</li>
<li>On the <strong>Versions</strong> FastTab, select the desired version of the selected ER configuration.</li>
<li>On the Action Pane, select <strong>Validate</strong>.</li>
</ol>
</li>
<li><p>Option 2, for an ER format:</p>
<ol>
<li>Go to <strong>Organization administration &gt; Electronic reporting &gt; Configurations</strong>.</li>
<li>In the configurations tree in the left pane, select the desired ER configuration that contains the ER format component.</li>
<li>On the <strong>Versions</strong> FastTab, select the desired version of the selected ER configuration.</li>
<li>On the Action Pane, select <strong>Designer</strong>.</li>
<li>On the <strong>Format designer</strong> page, on the Action Pane, select <strong>Validate</strong>.</li>
</ol>
</li>
<li><p>Option 3, for an ER model mapping:</p>
<ol>
<li>Go to <strong>Organization administration &gt; Electronic reporting &gt; Configurations</strong>.</li>
<li>In the configurations tree in the left pane, select the desired ER configuration that contains the ER model mapping component.</li>
<li>On the <strong>Versions</strong> FastTab, select the desired version of the selected ER configuration.</li>
<li>On the Action Pane, select <strong>Designer</strong>.</li>
<li>On the <strong>Model to datasource mapping</strong> page, on the Action Pane, select <strong>Designer</strong>.</li>
<li>On the <strong>Model mapping designer</strong> page, on the Action Pane, select <strong>Validate</strong>.</li>
</ol>
</li>
</ul>
<p>To skip the validation when the configuration is imported, follow these steps.</p>
<ol>
<li>Go to <strong>Organization administration &gt; Electronic reporting &gt; Configurations</strong>.</li>
<li>On the <strong>Configurations</strong> page, on the Action Pane, on the <strong>Configurations</strong> tab, in the <strong>Advanced settings</strong> group, select <strong>User parameters</strong>.</li>
<li>Set the <strong>Validate the configuration after importing</strong> option to <strong>No</strong>.</li>
</ol>
<p>To skip the validation when you change or rebase the version's status, follow these steps.</p>
<ol>
<li>Go to <strong>Organization administration &gt; Electronic reporting &gt; Configurations</strong>.</li>
<li>On the <strong>Configurations</strong> page, on the Action Pane, on the <strong>Configurations</strong> tab, in the <strong>Advanced settings</strong> group, select <strong>User parameters</strong>.</li>
<li>Set the <strong>Skip validation at configuration's status change and rebase</strong> option to <strong>Yes</strong>.</li>
</ol>
<p>ER uses the following categories to group consistency check inspections:</p>
<ul>
<li><strong>Executability</strong> – Inspections that detect critical issues that might happen at runtime. These issues are mostly at an <strong>Error</strong> level.</li>
<li><strong>Performance</strong> – Inspections that detect issues that might cause inefficient execution of configured ER components. These issues are mostly at a <strong>Warning</strong> level.</li>
<li><strong>Data integrity</strong> – Inspections that detect issues that might cause data loss or runtime issues. These issues are mostly at a <strong>Warning</strong> level.</li>
</ul>
<h2 id="list-of-inspections">List of inspections</h2>
<p>The following table provides an overview of the inspections that ER provides. For more information about these inspections, use the links in the first column to go to the relevant sections of this topic. Those sections explain the types of components that ER provides inspections for and how you can reconfigure ER components to help prevent issues.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Category</th>
<th>Level</th>
<th>Message</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href='#i1'>Type conversion</a></td>
<td>Executability</td>
<td>Error</td>
<td>
<p>Cannot convert expression of type &lt;type&gt; to field of type &lt;type&gt;.</p>
<p><b>Runtime error:</b> Exception for type</p>
</td>
</tr>
<tr>
<td><a href='#i2'>Type compatibility</a></td>
<td>Executability</td>
<td>Error</td>
<td>
<p>The configured expression cannot be used as the binding of the current format element to a data source as this expression returns value of the data type &lt;type&gt; that is beyond the scope of data types that are supported by the current format element of type &lt;type&gt;.</p>
<p><b>Runtime error:</b> Exception of type</p>
</td>
</tr>
<tr>
<td><a href='#i3'>Missing configuration element</a></td>
<td>Executability</td>
<td>Error</td>
<td>
<p>Path not found &lt;path&gt;.</p>
<p><b>Runtime error:</b> Element of the configuration &lt;path&gt; not found</p>
</td>
</tr>
<tr>
<td><a href='#i4'>Executability of an expression with FILTER function</a></td>
<td>Executability</td>
<td>Error</td>
<td>
<p>The list expression of FILTER function is not queryable.</p>
<p><b>Runtime error:</b> Filtering is not supported. Validate the configuration to get more details about this.</p>
</td>
</tr>
<tr>
<td rowspan='2'><a href='#i5'>Executability of a GROUPBY data source</a></td>
<td>Executability</td>
<td>Error</td>
<td>Path &lt;path&gt; does not support querying.</td>
</tr>
<tr>
<td>Executability</td>
<td>Error</td>
<td>
<p>Group by function cannot be executed with query.</p>
<p><b>Runtime error:</b> Group by function can't be executed with query.</p>
</td>
</tr>
<tr>
<td><a href='#i6'>Executability of a JOIN data source</a></td>
<td>Executability</td>
<td>Error</td>
<td>
<p>Cannot join a list &lt;path&gt; that is not a filter in query.</p>
<p><b>Runtime error:</b> Function Joined datasource should be a filter expression calculated field has been incorrectly called.</p>
</td>
</tr>
<tr>
<td><a href='#i7'>Preferability of FILTER vs WHERE function</a></td>
<td>Performance</td>
<td>Warning</td>
<td>Using FILTER function for the expression is preferable than WHERE from the performance perspective. Select Fix to replace it automatically.</td>
</tr>
<tr>
<td><a href='#i8'>Preferability of ALLITEMSQUERY vs ALLITEMS function</a></td>
<td>Performance</td>
<td>Warning</td>
<td>Using ALLITEMSQUERY function for the expression is preferable than ALLITEMS from the performance perspective. Select Fix to replace it automatically.</td>
</tr>
<tr>
<td><a href='#i9'>Consideration of empty list cases</a></td>
<td>Executability</td>
<td>Warning</td>
<td>
<p>List &lt;path&gt; does not have any check for empty list case, it can result an error at run time. Add a check for empty list case.</p>
<p><b>Runtime error:</b> List is empty at &lt;path&gt;</p>
<p><b><a href='#i9a'>Potential issue</a>:</b> Line is getting populated once while a data source it is populated from contains multiple records</p>
</td>
</tr>
<tr>
<td><a href='#i10'>Executability of an expression with FILTER function (caching)</a></td>
<td>Executability</td>
<td>Error</td>
<td>
<p>FILTER function cannot be applied to the selected type of data source. A data source of the Table records type is applicable only when it is not cached and has no manually added nested data sources.</p>
<p><b>Runtime error:</b> Filtering is not supported. Validate the configuration to get more details about this.</p>
</td>
</tr>
<tr>
<td><a href='#i11'>Missing binding</a></td>
<td>Executability</td>
<td>Warning</td>
<td>
<p>Path &lt;path&gt; has no binding to any datasource in using model's mapping.</p>
<p><b>Runtime error:</b> Path &lt;path&gt; is not bound</p>
</td>
</tr>
<tr>
<td><a href='#i12'>Not linked template</a></td>
<td>Data integrity</td>
<td>Warning</td>
<td>File &lt;name&gt; is linked to no file components and will be removed after changing status of configuration version.</td>
</tr>
<tr>
<td><a href='#i13'>Not synced format</a></td>
<td>Data integrity</td>
<td>Warning</td>
<td>Defined name &lt;component name&gt; does not exist in Excel sheet &lt;sheet name&gt;</td>
</tr>
</tbody>
</table>
<h2 id="i1">Type conversion</h2>
<p>ER checks whether the data type of a data model field is compatible with the data type of an expression that is configured as the binding of that field. If the data types are incompatible, a validation error occurs in the ER model-mapping designer. The message that you receive states that ER can't convert an expression of type A to a field of type B.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER data model and the ER model-mapping components simultaneously.</p>
</li>
<li><p>In the data model tree, add a field that is named <strong>X</strong>, and select <strong>Integer</strong> as the data type.</p>
<p><img src="./media/er-components-inspections-01.png" alt="X field and Integer data type added to the data mode tree on the Data model page"></p>
</li>
<li><p>In the model-mapping data sources pane, add a data source of the <strong>Calculated field</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Y</strong>, and configure it so that it contains the expression <code>INTVALUE(100)</code>.</p>
</li>
<li><p>Bind <strong>X</strong> to <strong>Y</strong>.</p>
</li>
<li><p>In the data model designer, change the data type of the <strong>X</strong> field from <strong>Integer</strong> to <strong>Int64</strong>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page.</p>
<p><img src="./media/er-components-inspections-01.gif" alt="validating the editable model-mapping component on the Model mapping designer page"></p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the model-mapping component of the selected ER configuration on the <strong>Configurations</strong> page.</p>
<p><img src="./media/er-components-inspections-01a.png" alt="Validate to inspect the model-mapping component on the Configurations page"></p>
</li>
<li><p>Notice that a validation error occurs. The message states that the value of the <strong>Integer</strong> type that the <code>INTVALUE(100)</code> expression of the <strong>Y</strong> data source returns can't be stored in the <strong>X</strong> data model field of the <strong>Int64</strong> type.</p>
</li>
</ol>
<p>The following illustration shows the runtime error that occurs if you ignore the warning and select <strong>Run</strong> to run a format that is configured to use the model-mapping.</p>
<p><img src="./media/er-components-inspections-01b.png" alt="Runtime errors on the Format designer page"></p>
<h3 id="automatic-resolution">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution">Manual resolution</h3>
<h4 id="option-1">Option 1</h4>
<p>Update the data model structure by changing the data type of the data model field so that it matches the data type of the expression that is configured for the binding of that field. For the preceding example, the data type of the <strong>X</strong> field must be changed back to <strong>Integer</strong>.</p>
<h4 id="option-2">Option 2</h4>
<p>Update the model-mapping by changing the expression of the data source that is bound with the data model field. For the preceding example, the expression of the <strong>Y</strong> data source must be changed to <code>INT64VALUE(100)</code>.</p>
<h2 id="i2">Type compatibility</h2>
<p>ER checks whether the data type of a format element is compatible with the data type of an expression that is configured as the binding of that format element. If the data types are incompatible, a validation error occurs in the ER Operations designer. The message that you receive states that the configured expression can't be used as the binding of the current format element to a data source, because the expression returns a value of data type A that is beyond the scope of the data types that are supported by the current format element of type B.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER data model and the ER format components simultaneously.</p>
</li>
<li><p>In the data model tree, add a field that is named <strong>X</strong>, and select <strong>Integer</strong> as the data type.</p>
</li>
<li><p>In the format structure tree, add a format element of the <strong>Numeric</strong> type.</p>
</li>
<li><p>Name the new format element <strong>Y</strong>. In the <strong>Numeric type</strong> field, select <strong>Integer</strong> as the data type.</p>
</li>
<li><p>Bind <strong>X</strong> to <strong>Y</strong>.</p>
</li>
<li><p>In the format structure tree, change the data type of the <strong>Y</strong> format element from <strong>Integer</strong> to <strong>Int64</strong>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable format component on the <strong>Format designer</strong> page.</p>
<p><img src="./media/er-components-inspections-02.gif" alt="Validating type compatibility on the Format designer page"></p>
</li>
<li><p>Notice that a validation error occurs. The message states that the configured expression can accept only <strong>Int64</strong> values. Therefore, the value of the <strong>X</strong> data model field of the <strong>Integer</strong> type can't be entered in the <strong>Y</strong> format element.</p>
</li>
</ol>
<h3 id="automatic-resolution-1">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-1">Manual resolution</h3>
<h4 id="option-1-1">Option 1</h4>
<p>Update the format structure by changing the data type of the <strong>Numeric</strong> format element so that it matches the data type of the expression that you configured for the binding of that element. In the preceding example, the <strong>Numeric type</strong> value of the <strong>X</strong> format element must be changed back to <strong>Integer</strong>.</p>
<h4 id="option-2-1">Option 2</h4>
<p>Update the format mapping of the <strong>X</strong> format element by changing the expression from <code>model.X</code> to <code>INT64VALUE(model.X)</code>.</p>
<h2 id="i3">Missing configuration element</h2>
<p>ER checks whether the binding expressions contain only data sources that are configured in the editable ER component. For every binding that contains a data source that is missing in the editable ER component, a validation error occurs in the ER Operations designer or the ER model-mapping designer.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER data model and the ER model-mapping components simultaneously.</p>
</li>
<li><p>In the data model tree, add a field that is named <strong>X</strong>, and select <strong>Integer</strong> as the data type.</p>
<p><img src="./media/er-components-inspections-01.png" alt="Data model tree with X field and Integer data type on the Data model page"></p>
</li>
<li><p>In the model-mapping data sources pane, add a data source of the <strong>Calculated field</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Y</strong>, and configure it so that it contains the expression <code>INTVALUE(100)</code>.</p>
</li>
<li><p>Bind <strong>X</strong> to <strong>Y</strong>.</p>
</li>
<li><p>In the model-mapping designer, in the data sources pane, delete the <strong>Y</strong> data source.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page.</p>
<p><img src="./media/er-components-inspections-03.gif" alt="Inspect teh editable ER model-mapping component on the Model mapping designer page"></p>
</li>
<li><p>Notice that a validation error occurs. The message states that the binding of the <strong>X</strong> data model field contains the path that refers to the <strong>Y</strong> data source, but this data source isn't found.</p>
</li>
</ol>
<h3 id="automatic-resolution-2">Automatic resolution</h3>
<p>Select <strong>Unbind</strong> to automatically fix this issue by removing the missing data source binding.</p>
<h3 id="manual-resolution-2">Manual resolution</h3>
<h4 id="option-1-2">Option 1</h4>
<p>Unbind the <strong>X</strong> data model field to stop referring to the nonexistent <strong>Y</strong> data source.</p>
<h4 id="option-2-2">Option 2</h4>
<p>In the data sources pane of the ER model-mapping designer, add the <strong>Y</strong> data source again.</p>
<h2 id="i4">Executability of an expression with FILTER function</h2>
<p>The built-in <a href="er-functions-list-filter.html">FILTER</a> ER function is used to access application tables, views, or data entities by placing a single SQL call to get the required data as a list of records. A data source of the <strong>Record list</strong> type is used as an argument of this function and specifies the application source for the call. ER checks whether a direct SQL query can be established to a data source that is referred to in the <code>FILTER</code> function. If a direct query can't be established, a validation error occurs in the ER model-mapping designer. The message that you receive states that the ER expression that includes the <code>FILTER</code> function can't be run at runtime.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER model-mapping component.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Vendor</strong>. In the <strong>Table</strong> field, select <strong>VendTable</strong> to specify that this data source will request the VendTable table.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type.</p>
</li>
<li><p>Name the new data source <strong>FilteredVendor</strong>, and configure it so that it contains the expression <code>FILTER(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page and verify that the <code>FILTER(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code> expression in the <strong>Vendor</strong> data source can be queried.</p>
</li>
<li><p>Modify the <strong>Vendor</strong> data source by adding a nested field of the <strong>Calculated field</strong> type to get the trimmed vendor account number.</p>
</li>
<li><p>Name the new nested field <strong>$AccNumber</strong>, and configure it so that it contains the expression <code>TRIM(Vendor.AccountNum)</code>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page and verify that the <code>FILTER(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code> expression in the <strong>Vendor</strong> data source can be queried.</p>
<p><img src="./media/er-components-inspections-04.gif" alt="Verifying the expression can be queried on the Model mapping designer page"></p>
</li>
<li><p>Notice that a validation error occurs, because the <strong>Vendor</strong> data source contains a nested field of the <strong>Calculated field</strong> type that doesn't allow the expression of the <strong>FilteredVendor</strong> data source to be translated to the direct SQL statement.</p>
</li>
</ol>
<p>The following illustration shows the runtime error that occurs if you ignore the warning and select <strong>Run</strong> to run a format that is configured to use the model-mapping.</p>
<p><img src="./media/er-components-inspections-04a.png" alt="Runtime errors that occur when you run the editable format on the Format designer page"></p>
<h3 id="automatic-resolution-3">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-3">Manual resolution</h3>
<h4 id="option-1-3">Option 1</h4>
<p>Instead of adding a nested field of the <strong>Calculated field</strong> type to the <strong>Vendor</strong> data source, add the <strong>$AccNumber</strong> nested field to the <strong>FilteredVendor</strong> data source, and configure it so that it contains the expression <code>TRIM(FilteredVendor.AccountNum)</code>. In this way, the <code>FILTER(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code> expression can be run at the SQL level and calculate the <strong>$AccNumber</strong> nested field afterward.</p>
<h4 id="option-2-3">Option 2</h4>
<p>Change the expression of the <strong>FilteredVendor</strong> data source from <code>FILTER(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code> to <code>WHERE(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code>. We don't recommend that you change the expression for a table that has a large volume of data (transactional table), because all records will be fetched, and selection of the required records will be done in memory. Therefore, this approach can cause poor performance. For more information, see <a href="er-functions-list-where.html">WHERE ER function</a>.</p>
<h2 id="i5">Executability of a GROUPBY data source</h2>
<p>The <strong>GROUPBY</strong> data source divides the query result into groups of records, usually for the purpose of doing one or more aggregations on each group. Every <strong>GROUPBY</strong> data source can be configured so that it's run either at the database level or in memory. When a <strong>GROUPBY</strong> data source is configured so that it's run at the database level, ER checks whether a direct SQL query can be established to a data source that is referred to in that data source. If a direct query can't be established, a validation error occurs in the ER model-mapping designer. The message that you receive states that the configured <strong>GROUPBY</strong> data source can't be run at runtime.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER model-mapping component.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Trans</strong>. In the <strong>Table</strong> field, select <strong>VendTrans</strong> to specify that this data source will request the VendTrans table.</p>
</li>
<li><p>Add a data source of the <strong>Group by</strong> type.</p>
</li>
<li><p>Name the new data source <strong>GroupedTrans</strong>, and configure it in the following way:</p>
<ul>
<li>Select the <strong>Trans</strong> data source as the source of records that should be grouped.</li>
<li>In the <strong>Execution location</strong> field, select <strong>Query</strong> to specify that you want to run this data source at the database level.</li>
</ul>
<p><img src="./media/er-components-inspections-05a.gif" alt="Configuring the data source on the Edit 'Group By' parameters page"></p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page and verify that the configured <strong>GroupedTrans</strong> data source can be queried.</p>
</li>
<li><p>Modify the <strong>Trans</strong> data source by adding a nested field of the <strong>Calculated field</strong> type to get the trimmed vendor account number.</p>
</li>
<li><p>Name the new data source <strong>$AccNumber</strong>, and configure it so that it contains the expression <code>TRIM(Trans.AccountNum)</code>.</p>
<p><img src="./media/er-components-inspections-05a.png" alt="Configuring the data source on the Model mapping designer page"></p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page and verify that the configured <strong>GroupedTrans</strong> data source can be queried.</p>
<p><img src="./media/er-components-inspections-05b.png" alt="Validate the ER model-mapping component and verify the configured data source, GroupedTrans can be queried on the Model mapping designer page"></p>
</li>
<li><p>Notice that a validation error occurs, because the <strong>Trans</strong> data source contains a nested field of the <strong>Calculated field</strong> type that doesn't allow the call for the <strong>GroupedTrans</strong> data source to be translated to the direct SQL statement.</p>
</li>
</ol>
<p>The following illustration shows the runtime error that occurs if you ignore the warning and select <strong>Run</strong> to run a format that is configured to use the model-mapping.</p>
<p><img src="./media/er-components-inspections-05c.png" alt="Run time errors that occur when the warning is ignored on the Format designer page"></p>
<h3 id="automatic-resolution-4">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-4">Manual resolution</h3>
<h4 id="option-1-4">Option 1</h4>
<p>Instead of adding a nested field of the <strong>Calculated field</strong> type to the <strong>Trans</strong> data source, add the <strong>$AccNumber</strong> nested field for the <strong>GroupedTrans.lines</strong> item of the <strong>GroupedTrans</strong> data source, and configure it so that it contains the expression <code>TRIM(GroupedTrans.lines.AccountNum)</code>. In this way, the <strong>GroupedTrans</strong> data source can be run at the SQL level and calculate the <strong>$AccNumber</strong> nested field afterward.</p>
<h4 id="option-2-4">Option 2</h4>
<p>Change the value of the <strong>Execution location</strong> field for the <strong>GroupedTrans</strong> data source from <strong>Query</strong> to <strong>In memory</strong>. We don't recommend that you change the value for a table that has a large volume of data (transactional table), because all records will be fetched, and grouping and aggregation will be done in memory. Therefore, this approach can cause poor performance.</p>
<h2 id="i6">Executability of a JOIN data source</h2>
<p>The <a href="er-join-data-sources.html">JOIN</a> data source combines records from two or more database tables, based on related fields. Every <strong>JOIN</strong> data source can be configured so that it's run either at the database level or in memory. When a <strong>JOIN</strong> data source is configured so that it's run at the database level, ER checks whether a direct SQL query can be established to data sources that are referred to in that data source. If a direct SQL query can't be established with at least one referenced data source, a validation error occurs in the ER model-mapping designer. The message that you receive states that the configured <strong>JOIN</strong> data source can't be run at runtime.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER model-mapping component.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Vendor</strong>. In the <strong>Table</strong> field, select <strong>VendTable</strong> to specify that this data source will request the VendTable table.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Trans</strong>. In the <strong>Table</strong> field, select <strong>VendTrans</strong> to specify that this data source will request the VendTrans table.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type as the nested field of the <strong>Vendor</strong> data source.</p>
</li>
<li><p>Name the new data source <strong>FilteredTrans</strong>, and configure it so that it contains the expression <code>FILTER(Trans, Trans.AccountNum=Vendor.AccountNum)</code>.</p>
</li>
<li><p>Add a data source of the <strong>Join</strong> type.</p>
</li>
<li><p>Name the new data source <strong>JoinedList</strong>, and configure it in the following way:</p>
<ol>
<li>Add the <strong>Vendor</strong> data source as the first set of records to join.</li>
<li>Add the <strong>Vendor.FilteredTrans</strong> data source as the second set of records to join. Select <strong>INNER</strong> as the type.</li>
<li>In the <strong>Execute</strong> field, select <strong>Query</strong> to specify that you want to run this data source at the database level.</li>
</ol>
<p><img src="./media/er-components-inspections-06a.gif" alt="Configuring the data source on the Join designer page"></p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page and verify that the configured <strong>JoinedList</strong> data source can be queried.</p>
</li>
<li><p>Change the expression of the <strong>Vendor.FilteredTrans</strong> data source from <code>FILTER(Trans, Trans.AccountNum=Vendor.AccountNum)</code> to <code>WHERE(Trans, Trans.AccountNum=Vendor.AccountNum)</code>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page and verify that the configured <strong>JoinedList</strong> data source can be queried.</p>
<p><img src="./media/er-components-inspections-06b.png" alt="Validate the editable model-mapping componenent and verify that the JoinedList data source can be queried on the Model mapping designer page"></p>
</li>
<li><p>Notice that a validation error occurs, because the expression of the <strong>Vendor.FilteredTrans</strong> data source can't be translated to the direct SQL call. Additionally, the direct SQL call doesn't allow the call for the <strong>JoinedList</strong> data source to be translated to the direct SQL statement.</p>
<p><img src="./media/er-components-inspections-06c.png" alt="Runtime errors from failed validation of JoinedList data source on the Model mapping designer page"></p>
</li>
</ol>
<p>The following illustration shows the runtime error that occurs if you ignore the warning and select <strong>Run</strong> to run a format that is configured to use the model-mapping.</p>
<p><img src="./media/er-components-inspections-06e.png" alt="Running the editable format on the Format designer page"></p>
<h3 id="automatic-resolution-5">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-5">Manual resolution</h3>
<h4 id="option-1-5">Option 1</h4>
<p>Change the expression of the <strong>Vendor.FilteredTrans</strong> data source from <code>WHERE(Trans, Trans.AccountNum=Vendor.AccountNum)</code> back to <code>FILTER(Trans, Trans.AccountNum=Vendor.AccountNum)</code>, as the warning advised.</p>
<p><img src="./media/er-components-inspections-06d.png" alt="Updated expression of data source on the Model mapping designer page"></p>
<h4 id="option-2-5">Option 2</h4>
<p>Change the value of the <strong>Execute</strong> field for the <strong>JoinedList</strong> data source from <strong>Query</strong> to <strong>In memory</strong>. We don't recommend that you change the value for a table that has a large volume of data (transactional table), because all records will be fetched, and the join occurs in memory. Therefore, this approach can cause poor performance. A validation warning is shown to inform you about this risk.</p>
<h2 id="i7">Preferability of FILTER vs WHERE function</h2>
<p>The built-in <a href="er-functions-list-filter.html">FILTER</a> ER function is used to access application tables, views, or data entities by placing a single SQL call to get the required data as a list of records. The <a href="er-functions-list-where.html">WHERE</a> function fetches all records from the given source and does record selection in memory. A data source of the <strong>Record list</strong> type is used as an argument of both functions and specifies a source for getting records. ER checks whether a direct SQL call can be established to a data source that is referred to in the <strong>WHERE</strong> function. If a direct call can be established, a validation warning occurs in the ER model-mapping designer. The message that you receive recommends that you use the <strong>FILTER</strong> function instead of the <strong>WHERE</strong> function to help improve efficiency.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER model-mapping component.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Trans</strong>. In the <strong>Table</strong> field, select <strong>VendTrans</strong> to specify that this data source will request the VendTrans table.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type as the nested field of the <strong>Vendor</strong> data source.</p>
</li>
<li><p>Name the new data source <strong>FilteredTrans</strong>, and configure it so that it contains the expression <code>WHERE(Trans, Trans.AccountNum=&quot;US-101&quot;)</code>.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Vendor</strong>. In the <strong>Table</strong> field, select <strong>VendTable</strong> to specify that this data source will request the VendTable table.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type.</p>
</li>
<li><p>Name the new data source <strong>FilteredVendor</strong>, and configure it so that it contains the expression <code>WHERE(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page.</p>
<p><img src="./media/er-components-inspections-07a.png" alt="Validate to inspect the editable model-mapping component on the Model mapping designer page"></p>
</li>
<li><p>Notice that validation warnings recommend that you use the <strong>FILTER</strong> function instead of the <strong>WHERE</strong> function for the <strong>FilteredVendor</strong> and <strong>FilteredTrans</strong> data sources.</p>
<p><img src="./media/er-components-inspections-07b.png" alt="Validation warnings recommending filter function instead of where function on the Model mapping designer page"></p>
</li>
</ol>
<h3 id="automatic-resolution-6">Automatic resolution</h3>
<p>Select <strong>Fix</strong> to automatically replace the <strong>WHERE</strong> function with the <strong>FILTER</strong> function in the expression of all data sources that appear in the grid on the <strong>Warnings</strong> tab for this type of inspection.</p>
<p>Alternatively, you can select the row for a single warning in the grid and then select <strong>Fix selected</strong>. In this case, the expression is automatically changed only in the data source that is mentioned in the selected warning.</p>
<p><img src="./media/er-components-inspections-07c.png" alt="Select Fix to automatiocally replace the where function with the filter function on the Model mapping designer page"></p>
<h3 id="manual-resolution-6">Manual resolution</h3>
<p>You can manually adjust the expressions of all the data sources in the validation grid by replacing the <strong>WHERE</strong> function with the <strong>FILTER</strong> function.</p>
<h2 id="i8">Preferability of ALLITEMSQUERY vs ALLITEMS function</h2>
<p>The built-in <a href="er-functions-list-allitems.html">ALLITEMS</a> and <a href="er-functions-list-allitemsquery.html">ALLITEMSQUERY</a> ER functions return a flattened <strong>Record list</strong> value that consists of a list of records that represent all items that match the specified path. ER checks whether a direct SQL call can be established to a data source that is referred to in the <strong>ALLITEMS</strong> function. If a direct call can be established, a validation warning occurs in the ER model-mapping designer. The message that you receive recommends that you use the <strong>ALLITEMSQUERY</strong> function instead of the <strong>ALLITEMS</strong> function to help improve efficiency.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER model-mapping component.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Vendor</strong>. In the <strong>Table</strong> field, select <strong>VendTable</strong> to specify that this data source will request the VendTable table.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type to get records for several vendors.</p>
</li>
<li><p>Name the new data source <strong>FilteredVendor</strong>, and configure it so that it contains the expression <code>FILTER(Vendor, OR(Vendor.AccountNum=&quot;US-101&quot;,Vendor.AccountNum=&quot;US-102&quot;))</code>.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type to get transactions of all filtered vendors.</p>
</li>
<li><p>Name the new data source <strong>FilteredVendorTrans</strong>, and configure it so that it contains the expression <code>ALLITEMS(FilteredVendor.'&lt;Relations'.'VendTrans.VendTable_AccountNum')</code>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page.</p>
<p><img src="./media/er-components-inspections-08a.png" alt="Model mapping designer page, Validate button"></p>
</li>
<li><p>Notice that a validation warning occurs. The message recommends that you use the <strong>ALLITEMSQUERY</strong> function instead of the <strong>ALLITEMS</strong> function for the <strong>FilteredVendorTrans</strong> data source.</p>
<p><img src="./media/er-components-inspections-08b.png" alt="Validatiion warning to use ALLITEMSQUERY function instead of ALLITEMS function on the ER model mapping component on the Model mapping designer page"></p>
</li>
</ol>
<h3 id="automatic-resolution-7">Automatic resolution</h3>
<p>Select <strong>Fix</strong> to automatically replace the <strong>ALLITEMS</strong> function with the <strong>ALLITEMSQUERY</strong> function in the expression of all data sources that appear in the grid on the <strong>Warnings</strong> tab for this type of inspection.</p>
<p>Alternatively, you can select the row for a single warning in the grid and then select <strong>Fix selected</strong>. In this case, the expression is automatically changed only in the data source that is mentioned in the selected warning.</p>
<p><img src="./media/er-components-inspections-08c.png" alt="Model mapping designer page, select Fix selected"></p>
<h3 id="manual-resolution-7">Manual resolution</h3>
<p>You can manually adjust the expressions of all the data sources that are mentioned in the validation grid by replacing the <strong>ALLITEMS</strong> function with the <strong>ALLITEMSQUERY</strong> function.</p>
<h2 id="i9">Consideration of empty list cases</h2>
<p>You can configure your ER format or model-mapping component to get the field value of a data source of the <strong>Record list</strong> type. ER checks whether your design considers the case where a data source that is called contains no records (that is, it's empty), to prevent runtime errors when a value is fetched from a field of a nonexistent record.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER data model, the ER model-mapping, and the ER format components simultaneously.</p>
</li>
<li><p>In the data model tree, add a root item that is named <strong>Root3</strong>.</p>
</li>
<li><p>Modify the <strong>Root3</strong> item by adding a nested item of the <strong>Record list</strong> type.</p>
</li>
<li><p>Name the new nested item <strong>Vendor</strong>.</p>
</li>
<li><p>Modify the <strong>Vendor</strong> item in the following way:</p>
<ul>
<li>Add a nested field of the <strong>String</strong> type, and name it <strong>Name</strong>.</li>
<li>Add a nested field of the <strong>String</strong> type, and name it <strong>AccountNumber</strong>.</li>
</ul>
<p><img src="./media/er-components-inspections-09a.png" alt="Adding nested fields on the Data model page"></p>
</li>
<li><p>In the model-mapping data sources pane, add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Vendor</strong>. In the <strong>Table</strong> field, select <strong>VendTable</strong> to specify that this data source will request the VendTable table.</p>
</li>
<li><p>Add a data source of the <strong>General \ User input parameter</strong> type to search for a vendor account in the runtime dialog box.</p>
</li>
<li><p>Name the new data source <strong>RequestedAccountNum</strong>. In the <strong>Label</strong> field, enter <strong>Vendor account number</strong>. In the <strong>Operations data type name</strong> field, leave the default value, <strong>Description</strong>.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type to filter a vendor that is inquired about.</p>
</li>
<li><p>Name the new data source <strong>FilteredVendor</strong>, and configure it so that it contains the expression <code>FILTER(Vendor, Vendor.AccountNum=RequestedAccountNum)</code>.</p>
</li>
<li><p>Bind the data model items to configured data sources in the following way:</p>
<ul>
<li>Bind <strong>FilteredVendor</strong> to <strong>Vendor</strong>.</li>
<li>Bind <strong>FilteredVendor.AccountNum</strong> to <strong>Vendor.AccountNumber</strong>.</li>
<li>Bind <strong>FilteredVendor.'name()'</strong> to <strong>Vendor.Name</strong>.</li>
</ul>
<p><img src="./media/er-components-inspections-09b.png" alt="Binding data model items on the Model mapping designer page"></p>
</li>
<li><p>In the format structure tree, add the following items to generate an outbound document in XML format that contains the vendor details:</p>
<ol>
<li><p>Add the <strong>Statement</strong> root XML element.</p>
</li>
<li><p>For the <strong>Statement</strong> XML element, add the nested <strong>Party</strong> XML element.</p>
</li>
<li><p>For the <strong>Party</strong> XML element, add the following nested XML attributes:</p>
<ul>
<li>Name</li>
<li>AccountNum</li>
</ul>
</li>
</ol>
</li>
<li><p>Bind format elements to provided data sources in the following way:</p>
<ul>
<li>Bind the <strong>Statement\Party\Name</strong> format element to the <strong>model.Vendor.Name</strong> data source field.</li>
<li>Bind the <strong>Statement\Party\AccountNum</strong> format element to the <strong>model.Vendor.AccountNumber</strong> data source field.</li>
</ul>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable format component on the <strong>Format designer</strong> page.</p>
<p><img src="./media/er-components-inspections-09c.png" alt="Validate the format elements you bound to data sources on the Format designer page"></p>
</li>
<li><p>Notice that a validation error occurs. The message states that an error might be thrown for the configured <strong>Statement\Party\Name</strong> and <strong>Statement\Party\AccountNum</strong> format components at runtime if the <code>model.Vendor</code> list is empty.</p>
<p><img src="./media/er-components-inspections-09d.png" alt="Validation error that notifies of potential error for the configured format compontents"></p>
</li>
</ol>
<p>The following illustration shows the runtime error that occurs if you ignore the warning, select <strong>Run</strong> to run the format, and select the account number of a nonexistent vendor. Because the requested vendor doesn't exist, the <code>model.Vendor</code> list will be empty (that is, it will contain no records).</p>
<p><img src="./media/er-components-inspections-09e.png" alt="Runtime errors because that occurred during the format mapping run"></p>
<h3 id="automatic-resolution-8">Automatic resolution</h3>
<p>For the selected row in the grid on the <strong>Warnings</strong> tab, you can select <strong>Unbind</strong>. The binding that is pointed to in the <strong>Path</strong> column is automatically removed from the format elements.</p>
<h3 id="manual-resolution-8">Manual resolution</h3>
<h4 id="option-1-6">Option 1</h4>
<p>You can bind the <strong>Statement\Party\Name</strong> format element to the <code>model.Vendor</code> data source item. At runtime, this binding calls the <code>model.Vendor</code> data source first. When <code>model.Vendor</code> returns an empty record list, the nested format elements aren't run. Therefore, no validation warnings occur for this format configuration.</p>
<p><img src="./media/er-components-inspections-09e.gif" alt="Bind the format element to the data source item on the Format designer page"></p>
<h4 id="option-2-6">Option 2</h4>
<p>Change the binding of the <strong>Statement\Party\Name</strong> format element from <code>model.Vendor.Name</code> to <code>FIRSTORNULL(model.Vendor).Name</code>. The updated binding conditionally converts the first record of the <code>model.Vendor</code> data source of the <strong>Record list</strong> type to a new data source of the <strong>Record</strong> type. This new data source contains the same set of fields.</p>
<ul>
<li>If at least one record is available in the <code>model.Vendor</code> data source, the fields of that record are filled with the values of the fields of the first record of the <code>model.Vendor</code> data source. In this case, the updated binding returns the vendor name.</li>
<li>Otherwise, every field of the record that is created is filled with the default value for the data type of that field. In this case, the blank string is returned as the default value of the <strong>String</strong> data type.</li>
</ul>
<p>Therefore, no validation warnings occur for the <strong>Statement\Party\Name</strong> format element when it's bound to the <code>FIRSTORNULL(model.Vendor).Name</code> expression.</p>
<p><img src="./media/er-components-inspections-09f.gif" alt="Changed binding resolves validation warnings on the Format designer page"></p>
<h4 id="option-3">Option 3</h4>
<p>If you want to explicitly specify the data that is entered in a generated document when the <code>model.Vendor</code> data source of the <strong>Record list</strong> type returns no records (the text <strong>Not available</strong> in this example), change the binding of the <strong>Statement\Party\Name</strong> format element from <code>model.Vendor.Name</code> to <code>IF(NOT(ISEMPTY(model.Vendor)), model.Vendor.Name, &quot;Not available&quot;)</code>. You can also use the expression <code>IF(COUNT(model.Vendor)=0, model.Vendor.Name, &quot;Not available&quot;)</code>.</p>
<h3 id="i9a">Additional consideration</h3>
<p>The inspection also warns you about another potential issue. By default, as you bind the <strong>Statement\Party\Name</strong> and <strong>Statement\Party\AccountNum</strong> format elements to the appropriate fields of the <code>model.Vendor</code> data source of the <strong>Record list</strong> type, those bindings will be run and will take the values of the appropriate fields of the first record of the <code>model.Vendor</code> data source, if that list isn't empty.</p>
<p>Because you haven't bound the <strong>Statement\Party</strong> format element with the <code>model.Vendor</code> data source, the <strong>Statement\Party</strong> element won't be iterated for every record of the <code>model.Vendor</code> data source during format execution. Instead, a generated document will be filled with information from only the first record of the record list, if that list contains multiple records. Therefore, there might be an issue if the format is intended to fill a generated document with information about all vendors from the <code>model.Vendor</code> data source. To fix this issue, bind the <strong>Statement\Party</strong> element with the <code>model.Vendor</code> data source.</p>
<h2 id="i10">Executability of an expression with FILTER function (caching)</h2>
<p>Several built-in ER functions, including <a href="er-functions-list-filter.html">FILTER</a> and <a href="er-functions-list-allitemsquery.html">ALLITEMSQUERY</a>, are used to access application tables, views, or data entities by placing a single SQL call to get the required data as a list of records. A data source of the <strong>Record list</strong> type is used as an argument of each of these functions and specifies an application source for the call. ER checks whether a direct SQL call can be established to a data source that is referred to in one of these functions. If a direct call can't be established because the data source was marked as <a href="trace-execution-er-troubleshoot-perf.html#improve-the-model-mapping-based-on-information-from-the-execution-trace">cached</a>, a validation error occurs in the ER model-mapping designer. The message that you receive states that the ER expression that contains one of these functions can't be run at runtime.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER model-mapping component.</p>
</li>
<li><p>Add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Vendor</strong>. In the <strong>Table</strong> field, select <strong>VendTable</strong> to specify that this data source will request the VendTable table.</p>
</li>
<li><p>Add a data source of the <strong>General \ User input parameter</strong> type to search for a vendor account in the runtime dialog box.</p>
</li>
<li><p>Name the new data source <strong>RequestedAccountNum</strong>. In the <strong>Label</strong> field, enter <strong>Vendor account number</strong>. In the <strong>Operations data type name</strong> field, leave the default value, <strong>Description</strong>.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type to filter a vendor that is inquired about.</p>
</li>
<li><p>Name the new data source <strong>FilteredVendor</strong>, and configure it so that it contains the expression <code>FILTER(Vendor, Vendor.AccountNum=RequestedAccountNum)</code>.</p>
</li>
<li><p>Mark the configured <strong>Vendor</strong> data source as cached.</p>
<p><img src="./media/er-components-inspections-10a.gif" alt="Configure the model-mapping component on the Model mapping designer page"></p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable model-mapping component on the <strong>Model mapping designer</strong> page.</p>
<p><img src="./media/er-components-inspections-10a.png" alt="Validate the filter function applied to the cache vendor data source on the Model mapping designer page"></p>
</li>
<li><p>Notice that a validation error occurs. The message states that the <strong>FILTER</strong> function can't be applied to the cached <strong>Vendor</strong> data source.</p>
</li>
</ol>
<p>The following illustration shows the runtime error that occurs if you ignore the warning and select <strong>Run</strong> to run the format.</p>
<p><img src="./media/er-components-inspections-10b.png" alt="Runtime error that occurred during the Format mapping run on the Format designer page"></p>
<h3 id="automatic-resolution-9">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-9">Manual resolution</h3>
<h4 id="option-1-7">Option 1</h4>
<p>Remove the <strong>Cache</strong> flag from the <strong>Vendor</strong> data source. The <strong>FilteredVendor</strong> data source will then become executable, but the <strong>Vendor</strong> data source that is referred to in the VendTable table will be accessed every time that the <strong>FilteredVendor</strong> data source is called.</p>
<h4 id="option-2-7">Option 2</h4>
<p>Change the expression of the <strong>FilteredVendor</strong> data source from <code>FILTER(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code> to <code>WHERE(Vendor, Vendor.AccountNum=&quot;US-101&quot;)</code>. In this case, the <strong>Vendor</strong> data source that is referred to in the VendTable table will be accessed only during the first call of the <strong>Vendor</strong> data source. However, the selection of records will be done in memory. Therefore, this approach can cause poor performance.</p>
<h2 id="i11">Missing binding</h2>
<p>When you configure an ER format component, the base ER data model is offered as a default data source for the ER format. When the configured ER format is run, the <a href="er-country-dependent-model-mapping.html">default model mapping</a> for the base model is used to fill the data model with application data. The ER format designer shows a warning if you bind a format element to a data model item that isn't bound to any data source in the model-mapping that is currently selected as the default model-mapping for the editable format. This type of binding can't be run at runtime, because the format that runs can't fill a bound element with application data. Therefore, an error occurs at runtime.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER data model, the ER model-mapping, and the ER format components simultaneously.</p>
</li>
<li><p>In the data model tree, add a root item that is named <strong>Root3</strong>.</p>
</li>
<li><p>Modify the <strong>Root3</strong> item by adding a new nested item of the <strong>Record list</strong> type.</p>
</li>
<li><p>Name the new nested item <strong>Vendor</strong>.</p>
</li>
<li><p>Modify the <strong>Vendor</strong> item in the following way:</p>
<ul>
<li>Add a nested field of the <strong>String</strong> type, and name it <strong>Name</strong>.</li>
<li>Add a nested field of the <strong>String</strong> type, and name it <strong>AccountNumber</strong>.</li>
</ul>
<p><img src="./media/er-components-inspections-11a.png" alt="Add nested fields to the vendor item on the Data model page"></p>
</li>
<li><p>In the model-mapping data sources pane, add a data source of the <strong>Dynamics 365 for Operations \ Table records</strong> type.</p>
</li>
<li><p>Name the new data source <strong>Vendor</strong>. In the <strong>Table</strong> field, select <strong>VendTable</strong> to specify that this data source will request the VendTable table.</p>
</li>
<li><p>Add a data source of the <strong>General \ User input parameter</strong> type to inquire about a vendor account in the runtime dialog box.
9 Name the new data source <strong>RequestedAccountNum</strong>. In the <strong>Label</strong> field, enter <strong>Vendor account number</strong>. In the <strong>Operations data type name</strong> field, leave the default value, <strong>Description</strong>.</p>
</li>
<li><p>Add a data source of the <strong>Calculated field</strong> type to filter a vendor that is inquired about.</p>
</li>
<li><p>Name the new data source <strong>FilteredVendor</strong>, and configure it so that it contains the expression <code>FILTER(Vendor, Vendor.AccountNum=RequestedAccountNum)</code>.</p>
</li>
<li><p>Bind the data model items to configured data sources in the following way:</p>
<ul>
<li>Bind <strong>FilteredVendor</strong> to <strong>Vendor</strong>.</li>
<li>Bind <strong>FilteredVendor.AccountNum</strong> to <strong>Vendor.AccountNumber</strong>.</li>
</ul>
<div class="NOTE">
<h5>Note</h5>
<p>The <strong>Vendor.Name</strong> data model field remains unbound.</p>
</div>
<p><img src="./media/er-components-inspections-11b.png" alt="Data model items bound to configured data sources and a data mode item that rem on the Model mapping designer page"></p>
</li>
<li><p>In the format structure tree, add the following items to generate an outbound document in XML format that contains the details of the vendors that are inquired about:</p>
<ol>
<li><p>Add the <strong>Statement</strong> root XML element.</p>
</li>
<li><p>For the <strong>Statement</strong> XML element, add the nested <strong>Party</strong> XML element.</p>
</li>
<li><p>For the <strong>Party</strong> XML element, add the following nested XML attributes:</p>
<ul>
<li>Name</li>
<li>AccountNum</li>
</ul>
</li>
</ol>
</li>
<li><p>Bind the format elements to provided data sources in the following way:</p>
<ul>
<li>Bind the <strong>Statement\Party</strong> format element to the <code>model.Vendor</code> data source item.</li>
<li>Bind the <strong>Statement\Party\Name</strong> format element to the <strong>model.Vendor.Name</strong> data source field.</li>
<li>Bind the <strong>Statement\Party\AccountNum</strong> format element to the <strong>model.Vendor.AccountNumber</strong> data source field.</li>
</ul>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable format component on the <strong>Format designer</strong> page.</p>
<p><img src="./media/er-components-inspections-11c.png" alt="Validating the ER format component on the Format designer page"></p>
</li>
<li><p>Notice that a validation warning occurs. The message states that the <strong>model.Vendor.Name</strong> data source field isn't bound to any data source in the model-mapping that is configured to be used by the format. Therefore, the <strong>Statement\Party\Name</strong> format element might not be filled at runtime, and a runtime exception might occur.</p>
<p><img src="./media/er-components-inspections-11d.png" alt="Validating ER format component on the Format designer page"></p>
</li>
</ol>
<p>The following illustration shows the runtime error that occurs if you ignore the warning and select <strong>Run</strong> to run the format.</p>
<p><img src="./media/er-components-inspections-11e.png" alt="Run the editable format on the Format designer page"></p>
<h3 id="automatic-resolution-10">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-10">Manual resolution</h3>
<h4 id="option-1-8">Option 1</h4>
<p>Modify the configured model-mapping by adding a binding for the <strong>model.Vendor.Name</strong> data source field.</p>
<h4 id="option-2-8">Option 2</h4>
<p>Modify the configured format by removing a binding for the <strong>Statement\Party\Name</strong> format element.</p>
<h2 id="i12">Not linked template</h2>
<p>When you <a href="er-fillable-excel.html#manual-entry">manually</a> configure an ER format component to use a template to generate an outbound document, you must manually add the <strong>Excel\File</strong> element, add the required template as an attachment of the editable component, and select that attachment in the added <strong>Excel\File</strong> element. In this way, you indicate that the added element will fill the selected template at runtime. When you configure a format component version in <strong>Draft</strong> <a href="general-electronic-reporting.html#component-versioning">status</a>, you might add several templates to the editable component, and then select each template in the <strong>Excel\File</strong> element to run the ER format. In this way, you can see how different templates are filled at runtime. If you have templates that aren't selected in any <strong>Excel\File</strong> elements, the ER format designer warns you that those templates will be deleted from the editable ER format component version when its status is changed from <strong>Draft</strong> to <strong>Completed</strong>.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER format component.</p>
</li>
<li><p>In the format structure tree, add the <strong>Excel\File</strong> element.</p>
</li>
<li><p>For the <strong>Excel\File</strong> element that you just added, add an Excel workbook file, <strong>A.xlsx</strong>, as an attachment. Use the document type that is configured in the <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/electronic-reporting-er-configure-parameters">ER parameters (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a> to specify the storage of ER format templates.</p>
</li>
<li><p>For the <strong>Excel\File</strong> element, add another Excel workbook file, <strong>B.xlsx</strong>, as an attachment. Use the same document type that is used for workbook file A.</p>
</li>
<li><p>In the <strong>Excel\File</strong> element, select workbook file A.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable format component on the <strong>Format designer</strong> page.</p>
<p><img src="./media/er-components-inspections-12a.gif" alt="Validating the editable format component of the workbook file on the Format designer page"></p>
</li>
<li><p>Notice that a validation warning occurs. The message states that workbook file <strong>B.xlsx</strong> isn't linked to any components, and that it will be removed after the status of the configuration version is changed.</p>
</li>
</ol>
<h3 id="automatic-resolution-11">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-11">Manual resolution</h3>
<p>Modify the configured format by removing all templates that aren't linked to any <strong>Excel\File</strong> element.</p>
<h2 id="i13">Not synced format</h2>
<p>When you <a href="er-fillable-excel.html">configure</a> an ER format component to use an Excel template to generate an outbound document, you can manually add the <strong>Excel\File</strong> element, add the required template as an attachment of the editable component, and select that attachment in the added <strong>Excel\File</strong> element. In this way, you indicate that the added element will fill the selected template at runtime. Because the added Excel template has been externally designed, the editable ER format might contain Excel names that are missing from the added template. The ER format designer warns you about any inconsistencies between the properties of the ER format elements that refer to names that aren't included in the added Excel template.</p>
<p>The following steps show how this issue might occur.</p>
<ol>
<li><p>Start to configure the ER format component.</p>
</li>
<li><p>In the format structure tree, add the <strong>Excel\File</strong> element <strong>Report</strong>.</p>
</li>
<li><p>For the <strong>Excel\File</strong> element that you just added, add an Excel workbook file, <strong>A.xlsx</strong>, as an attachment. Use the document type that is configured in the <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/electronic-reporting-er-configure-parameters">ER parameters (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a> to specify the storage of ER format templates.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>Make sure that the added Excel workbook doesn't contain the name <strong>ReportTitle</strong>.</p>
</div>
</li>
<li><p>Add the following <strong>Excel\Cell</strong> element <strong>Title</strong> as the nested element of the <strong>Report</strong> element. In the <strong>Excel range</strong> field, enter <strong>ReportTitle</strong>.</p>
</li>
<li><p>Select <strong>Validate</strong> to inspect the editable format component on the <strong>Format designer</strong> page.</p>
<p><img src="./media/er-components-inspections-13a.png" alt="Validatthe nested elements and fields on the Format designer page"></p>
</li>
<li><p>Notice that a validation warning occurs. The message states that the name <strong>ReportTitle</strong> doesn't exist on sheet <strong>Sheet1</strong> of the Excel template that you're using.</p>
<p><img src="./media/er-components-inspections-13b.png" alt="Validation warning that the name ReportTitle doesn't exist on Sheet1 of the Excel template"></p>
</li>
</ol>
<h3 id="automatic-resolution-12">Automatic resolution</h3>
<p>No option to automatically fix this issue is available.</p>
<h3 id="manual-resolution-12">Manual resolution</h3>
<h4 id="option-1-9">Option 1</h4>
<p>Modify the configured format by removing all elements that refer to Excel names that are missing from the template.</p>
<h4 id="option-2-9">Option 2</h4>
<p><a href="er-fillable-excel.html#template-import">Update</a> the editable ER format by importing an Excel template. The structure of the editable ER format will be <a href="modify-electronic-reporting-format-reapply-excel-template.html">synced</a> with the structure of the imported Excel template.</p>
<h3 id="additional-consideration-1">Additional consideration</h3>
<p>To learn how the format structure can be synced with an ER template in the template editor of <a href="er-business-document-management.html">Business document management</a>, see <a href="er-bdm-update-structure.html">Update the structure of a business document template</a>.</p>
<h2 id="additional-resources">Additional resources</h2>
<p><a href="er-functions-list-allitems.html">ALLITEMS ER function</a></p>
<p><a href="er-functions-list-allitemsquery.html">ALLITEMSQUERY ER function</a></p>
<p><a href="er-functions-conversion-int64value.html">INT64VALUE ER function</a></p>
<p><a href="er-functions-conversion-intvalue.html">INTVALUE ER function</a></p>
<p><a href="er-functions-list-filter.html">FILTER ER function</a></p>
<p><a href="er-functions-list-where.html">WHERE ER function</a></p>
<p><a href="er-join-data-sources.html">Use JOIN data sources to get data from multiple application tables in ER model mappings</a></p>
<p><a href="trace-execution-er-troubleshoot-perf.html">Trace the execution of ER formats to troubleshoot performance issues</a></p>
<p><a href="er-business-document-management.html">Business document management overview</a></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
