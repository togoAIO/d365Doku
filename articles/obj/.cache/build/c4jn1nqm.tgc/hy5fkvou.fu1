<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Filter intercompany orders to avoid syncing Orders and OrderLines </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Filter intercompany orders to avoid syncing Orders and OrderLines ">
    <meta name="generator" content="docfx 2.56.6.0">
    <meta name="description" content="This topic explains how to filter intercompany orders so that the Orders and OrderLines entities aren't synced.">
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="../../toc.html">
    <meta name="searchOption" content="noindex">
    
    
    <meta name="robots" content="NOINDEX, NOFOLLOW">
    
    <meta name="ms.search.scope" content="Core, Operations, CrossApp, ShowInHelp">
    <meta name="ms.search.region" content="global">
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="row">
          <div class="col-sm-12">
            
<div class="sidenav hide-when-search"> 
  <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
  <div class="sidetoggle collapse" id="sidetoggle">
    <div id="sidetoc"></div>
  </div>
</div>
            <div class="row toc-offset">
              
              <div class="col-sm-12 col-md-9">
                <article class="article" id="_content" data-uid="">
<h1 id="filter-intercompany-orders-to-avoid-syncing-orders-and-orderlines">Filter intercompany orders to avoid syncing Orders and OrderLines</h1>


<p>You can filter intercompany orders so that the <strong>Orders</strong> and <strong>OrderLines</strong> tables aren't synced. In some scenarios, the intercompany order details aren't required in a customer engagement app.</p>
<p>Each standard Dataverse table is extended through references to the <strong>IntercompanyOrder</strong> column, and the dual-write maps are modified so that they refer to the additional columns in the filters. Therefore, the intercompany orders are no longer synced. This process helps prevent unnecessary data in the customer engagement app.</p>
<ol>
<li><p>Extend the <strong>CDS Sales Order Headers</strong> table by adding a reference to the <strong>IntercompanyOrder</strong> column. This column is filled in only on intercompany orders. The <strong>IntercompanyOrder</strong> column is available in the <strong>SalesTable</strong> table.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-sales-order-header-field-display.png" alt="Map staging to target page for CDS Sales Order Headers">
</span>
</p>
</li>
<li><p>After <strong>CDS Sales Order Headers</strong> is extended, the <strong>IntercompanyOrder</strong> column is available in the mapping. Apply a filter that has <code>INTERCOMPANYORDER == &quot;&quot;</code> as the query string.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-sales-order-header.png" alt="Edit query dialog box for CDS Sales Order Headers">
</span>
</p>
</li>
<li><p>Extend the <strong>CDS Sales Order Lines</strong> table by adding a reference to the <strong>IntercompanyInventTransId</strong> column. This column is filled in only on intercompany orders. The <strong>InterCompanyInventTransId</strong> column is available in the <strong>SalesLine</strong> table.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-sales-order-line-field-display.png" alt="Map staging to target page for CDS Sales Order Lines">
</span>
</p>
</li>
<li><p>After <strong>CDS Sales Order Lines</strong> is extended, the <strong>IntercompanyInventTransId</strong> column is available in the mapping. Apply a filter that has <code>INTERCOMPANYINVENTTRANSID == &quot;&quot;</code> as the query string.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-sales-order-lines.png" alt="Edit query dialog box for CDS Sales Order Lines">
</span>
</p>
</li>
<li><p>Repeat steps 1 and 2 to extend the <strong>Sales Invoice Header V2</strong> table and add a filter query. In this case, use <code>(INTERCOMPANYORDER == &quot;&quot;) &amp;&amp; (SALESORDERNUMBER != &quot;&quot;)</code> as the query string for the filter.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-sales-invoice-header-field-display.png" alt="Map staging to target page for Sales Invoice Header V2">
</span>
</p>
<p><span class="mx-imgBorder">
<img src="media/filter-sales-invoice-header-filter.png" alt="Edit query dialog box for Sales Invoice Header V2">
</span>
</p>
</li>
<li><p>Repeat steps 3 and 4 to extend the <strong>Sales Invoice Lines V2</strong> table and add a filter query. In this case, use <code>INTERCOMPANYINVENTTRANSID == &quot;&quot;</code> as the query string for the filter.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-sales-invoice-lines-filter.png" alt="Edit query dialog box for Sales Invoice Lines V2">
</span>
</p>
</li>
<li><p>The <strong>Quotations</strong> table doesn't have an intercompany relationship. If someone creates a quotation for one of your intercompany customers, you can use the <strong>CustGroup</strong> column to put all those customers into one customer group. You can extend the header and lines by adding the <strong>CustGroup</strong> column, and then filter so that the group isn't included.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-cust-group.png" alt="Map staging to target page for CDS Sales Quotation Header">
</span>
</p>
</li>
<li><p>After <strong>Quotations</strong> is extended, apply a filter that has <code>CUSTGROUP != &quot;&lt;company&gt;&quot;</code> as the query string.</p>
<p><span class="mx-imgBorder">
<img src="media/filter-cust-group-edit.png" alt="Edit query dialog box for CDS Sales Quotation Header">
</span>
</p>
</li>
</ol>
</article>
              </div>
              
<div class="hidden-sm col-md-3" role="complementary">
  <div class="sideaffix">
    <div class="contribution">
      <ul class="nav">
        <li>
          <a href="https://github.com/MicrosoftDocs/Dynamics-365-unified-Operations-public/blob/live/articles/fin-ops-core/dev-itpro/data-entities/dual-write/filtering-intercompany-orders.md/#L1" class="contribution-link">Improve this Doc</a>
        </li>
      </ul>
    </div>
    <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
    <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
    </nav>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright � 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
