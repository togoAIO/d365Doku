<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Fiscal registration service integration sample for Czech Republic </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Fiscal registration service integration sample for Czech Republic ">
    <meta name="generator" content="docfx 2.56.6.0">
    <meta name="description" content="This topic provides an overview of the fiscal integration sample for Czech Republic.">
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="../TOC.html">
    <meta name="searchOption" content="noindex">
    
    
    <meta name="robots" content="NOINDEX, NOFOLLOW">
    <meta name="ms.search.form" content="RetailFunctionalityProfile, RetailFormLayout, RetailParameters">
    <meta name="ms.search.scope" content="Operations, Retail, Commerce">
    <meta name="ms.search.region" content="Czech Republic">
    <meta name="ms.search.industry" content="Retail">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="row">
          <div class="col-sm-12">
            
<div class="sidenav hide-when-search"> 
  <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
  <div class="sidetoggle collapse" id="sidetoggle">
    <div id="sidetoc"></div>
  </div>
</div>
            <div class="row toc-offset">
              
              <div class="col-sm-12 col-md-9">
                <article class="article" id="_content" data-uid="">
<h1 id="fiscal-registration-service-integration-sample-for-czech-republic" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="30">Fiscal registration service integration sample for Czech Republic</h1>

<h2 id="introduction" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="35">Introduction</h2>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="37">To meet local fiscal requirements for cash registers in the Czech Republic, the Dynamics 365 Commerce functionality for the Czech Republic includes a sample integration of the point of sale (POS) with an external fiscal registration service. The sample extends the <a href="fiscal-integration-for-retail-channel.html" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="37">fiscal integration functionality</a>. It's based on the <a href="https://efsta.org/sicherheitsloesungen/" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="37">EFR (Electronic Fiscal Register)</a> solution from <a href="https://efsta.org/" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="37">EFSTA</a> and enables communication with the EFR service via the HTTPS protocol. The EFR service ensures Electronic Registration of Sales (EET - Elektronická evidence tržeb), that is, the online transmission of the sales data to a fiscal web service of tax authorities.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="39">The EFR service should be hosted on either the Commerce Hardware station or a separate machine that can be connected to from the Hardware station. The sample is provided in the form of source code and is part of the Retail software development kit (SDK).</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="41">Microsoft doesn't release any hardware, software, or documentation from EFSTA. For information about how to get the EFR solution and operate it, contact <a href="https://efsta.org/kontakt/" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="41">EFSTA</a>.</p>
<h2 id="scenarios" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="43">Scenarios</h2>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="45">The following scenarios are covered by the fiscal registration service integration sample for the Czech Republic.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="47">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="47"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="47">Registration of cash transactions in the fiscal registration service.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="49">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="49">Send detailed transaction data to the fiscal registration service. This data includes sales line information, and information about discounts, payments, and taxes. The fiscal registration service further sends the data to the web-service of tax authorities and receives a confirmation from it that includes the fiscal identification code of the transaction.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="50">Capture a response from the fiscal registration service. This response includes fiscal data such as the fiscal identification code and the security code of the transaction, etc.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="51">Print the fiscal data for a registered transaction on the receipt.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="53"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="53">Registration of gift card operations and customer deposits in the fiscal registration service.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="55">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="55">Issue or add money to a gift card.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="56">Register a customer account deposit.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="57">Create a customer order and register a deposit for the order.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="58">Edit a customer order and override the deposit for the order.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="59">Cancel a customer order and refund the deposit for the order.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="61"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="61">Error handling, such as the following options.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="63">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="63">Retry fiscal registration if a retry is possible, such as if the fiscal registration service isn't available, isn't ready, or isn't responding.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="64">Postpone fiscal registration.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="65">Skip fiscal registration, or mark the transaction as registered, and include info codes to capture the reason for the failure and additional information.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="66">Check the availability of the fiscal registration service before a new sales transaction is opened or a sales transaction is finalized.</li>
</ul>
</li>
</ul>
<h3 id="default-data-mapping" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="68">Default data mapping</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="70">The following default data mapping is included in the fiscal document provider configuration that is provided as part of the fiscal integration sample.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="72">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="72"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="72">Value-added tax (VAT) rates mapping:</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="74"><em sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="74">A: 21.00; B: 15.00; C: 10.00; Z: 0.00</em></p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="76"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="76">Default VAT group mapping. Any VAT amounts that cannot be mapped to one of the predetermined VAT groups will be attributed to the default (basic) VAT group:</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="78"><em sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="78">A</em></p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="80"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="80">Deposit VAT group mapping. Customer deposit amounts and customer order deposit amounts will be attributed to the deposit VAT group:</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="82"><em sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="82">Z</em></p>
</li>
</ul>
<h3 id="gift-cards" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="84">Gift cards</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="86">The fiscal registration service integration sample implements the following rules that are related to gift cards.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="88">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="88">Sales lines that are related to the <em sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="88">Issue gift card</em> or <em sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="88">Add to gift card</em> operations in a sales transaction are marked with a special attribute when the transaction is registered in the fiscal registration service.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="89">A payment by gift card is considered a regular payment and marked with a special attribute when the transaction is registered in the fiscal registration service.</li>
</ul>
<h3 id="customer-account-deposits-and-customer-order-deposits" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="91">Customer account deposits and customer order deposits</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="93">The fiscal registration service integration sample implements the following rules that are related to customer account deposits and customer order deposits.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="95">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="95">A transaction that is related to a customer account deposit or a customer order deposit is registered in the fiscal registration service as a single line transaction and is marked with a special attribute. The deposit VAT group is specified in this line.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="96">When a hybrid customer order is created, that is, a customer order that contains products that can be carried out of the store by the customer, as well as products that will be picked up or shipped later, the transaction registered in the fiscal registration service contains lines for the products that are carried out, as well as a line for the order deposit.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="97">A payment from a customer account is considered a regular payment and marked with a special attribute when the transaction is registered in the fiscal registration service.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="98">The customer order deposit amount that is applied to a customer order <em sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="98">Pick up</em> operation is considered a regular payment and marked with a special attribute when the transaction is registered in the fiscal registration service.</li>
</ul>
<h3 id="offline-registration" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="100">Offline registration</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="102">If the fiscal registration service fails to transmit transaction data to the fiscal web service of tax authorities (e.g. due to the response timeout) and to receive a confirmation from the web-service (that is, the fiscal identification code of the transaction), it generates a local signature for the transaction and includes it and a special error code in the response. The fiscal registration service resends transactions in original order in background as soon as the network connection is restored.</p>
<h3 id="limitations-of-the-sample" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="104">Limitations of the sample</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="106">The fiscal registration service supports only scenarios where sales tax is included in the price. Therefore, the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="106">Price include sales tax</strong> option must be set to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="106">Yes</strong> for both stores and customers.</p>
<h2 id="set-up-commerce-for-czech-republic" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="108">Set up Commerce for Czech Republic</h2>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="110">This section describes the Commerce settings that are specific to and recommended for the Czech Republic. For more information, see <a href="../index.html" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="110">Commerce home page</a>.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="112">To use the Czech-specific functionality, you must specify the following settings.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="114">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="114">In the primary address of the legal entity, set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="114">Country/region</strong> field to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="114">CZE</strong> (Czech Republic).</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="115">In the POS functionality profile of every store that is located in the Czech Republic, set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="115">ISO code</strong> field to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="115">CZ</strong> (Czech Republic).</li>
</ul>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="117">You must also specify the following settings for the Czech Republic. Note that you must run appropriate distribution jobs after you complete the setup.</p>
<h3 id="set-up-vat-per-czech-republic" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="119">Set up VAT per Czech Republic</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="122">You must create sales tax codes, sales tax groups, and item sales tax groups. You must also set up sales tax information for products and services. For more information about how to set up and use sales tax features, see <a href="../../financials/general-ledger/indirect-taxes-overview.md" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="122">Sales tax overview</a>.</p>
<h3 id="set-up-stores" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="125">Set up stores</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="127">On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="127">All stores</strong> page, update the store details. Specifically, set the following parameters.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="129">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="129">In the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="129">Sales tax group</strong> field, specify the sales tax group that should be used for sales to the default customer.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="130">Set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="130">Prices include sales tax</strong> option to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="130">Yes</strong>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="131">Set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="131">Name</strong> field to the company name. This change helps guarantee that the company name appears on a sales receipt. Alternatively, you can add the company name to the sales receipt layout as free-form text.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="132">Set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="132">Tax identification number (TIN)</strong> field to the company identification number. This change helps guarantee that the company identification number appears on a sales receipt. Alternatively, you can add the company identification number to the sales receipt layout as free-form text.</li>
</ul>
<h3 id="set-up-functionality-profiles" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="134">Set up functionality profiles</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="136">Set up POS functionality profiles.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="138">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="138">On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="138">Receipt numbering</strong> FastTab, set up receipt numbering by creating or updating records for the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="138">Sale</strong>, <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="138">Sales order</strong>, and <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="138">Return</strong> receipt transaction types.</li>
</ul>
<h3 id="set-up-registration-numbers" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="140">Set up registration numbers</h3>
<ol sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="142">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="142"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="142">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="142">Organization administration &gt; Global address book &gt; Registration types &gt; Registration types</strong>. Create a new registration type. Specify the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="142">Country/region</strong> field to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="142">CZE</strong> (Czech Republic) and make it restricted to Organization.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="143"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="143">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="143">Organization administration &gt; Global address book &gt; Registration types &gt; Registration categories</strong>. Create a new registration category. Select the registration type from the previous step and set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="143">Registration category</strong> to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="143">Business Premise ID</strong>.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="144"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="144">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="144">Organization administration &gt; Organizations &gt; Operating units</strong>. For each store located in the Czech Republic, select the unit related to the store. On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="144">Address</strong> FastTab expand the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="144">More options</strong> drop-down list and select <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="144">Advanced</strong>.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="145"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="145">On the opened <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="145">Manage addresses</strong> page you must specify following setting.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="147">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="147">On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="147">Address</strong> FastTab set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="147">Country/region</strong> field to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="147">CZE</strong>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="148">On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="148">Registration ID</strong> FastTab create a new record. Select the registration type created earlier and set the registration number.</li>
</ul>
</li>
</ol>
<h3 id="configure-custom-fields-so-that-they-can-be-used-in-receipt-formats-for-sales-receipts" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="150">Configure custom fields so that they can be used in receipt formats for sales receipts</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="152">You can configure the language text and custom fields that are used in the POS receipt formats. The default company of the user who creates the receipt setup should be the same legal entity where the language text setup is created. Alternatively, the same language texts should be created in both the user's default company and the legal entity of the store that the setup is created for.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="154">On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="154">Language text</strong> page, add the following records for the labels of the custom fields for receipt layouts. Note that the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="154">Language ID</strong>, <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="154">Text ID</strong>, and <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="154">Text</strong> values that are shown in the table are just examples. You can change them to meet your requirements. However, the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="154">Text ID</strong> values that you use must be unique, and they must be equal to or more than 900001.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="156">Add the following POS labels to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="156">POS</strong> section of <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="156">Language text</strong> from the table:</p>
<table sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="158">
<thead>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="158">
<th sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="158">Language ID</th>
<th sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="158">Text ID</th>
<th sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="158">Text</th>
</tr>
</thead>
<tbody>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="160">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="160">en-US</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="160">900001</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="160">ID provozovny/pokladny</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="161">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="161">en-US</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="161">900002</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="161">BKP</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="162">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="162">en-US</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="162">900003</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="162">FIK</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="163">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="163">en-US</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="163">900004</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="163">PKP</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="164">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="164">en-US</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="164">900005</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="164">Info</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="165">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="165">en-US</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="165">900006</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="165">Sequence number</td>
</tr>
</tbody>
</table>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="167">On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="167">Custom fields</strong> page, add the following records for the custom fields for receipt layouts. Note that <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="167">Caption text ID</strong> values must correspond to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="167">Text ID</strong> values that you specified on the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="167">Language text</strong> page:</p>
<table sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="169">
<thead>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="169">
<th sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="169">Name</th>
<th sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="169">Type</th>
<th sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="169">Caption text ID</th>
</tr>
</thead>
<tbody>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="171">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="171">TLT</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="171">Receipt</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="171">900001</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="172">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="172">SEC</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="172">Receipt</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="172">900002</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="173">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="173">SIGN</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="173">Receipt</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="173">900003</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="174">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="174">FISCAL</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="174">Receipt</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="174">900004</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="175">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="175">INFO</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="175">Receipt</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="175">900005</td>
</tr>
<tr sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="176">
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="176">CONTINUOUSNUMBER</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="176">Receipt</td>
<td sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="176">900006</td>
</tr>
</tbody>
</table>
<h3 id="configure-receipt-formats" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="178">Configure receipt formats</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="180">For every required receipt format, change the value of the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="180">Print behavior</strong> field to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="180">Always print</strong>.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="182">In the Receipt format designer, add the following custom fields to the appropriate receipt sections. Note that field names correspond to the language texts that you defined in the previous section.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="184">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="184"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="184"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="184">Header:</strong> Add the following fields.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="186">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="186"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="186">Store name</strong> and <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="186">Tax Identification Number</strong>: these fields are used to print the company name and identity number on receipts. Alternatively, you can add the company name and identity number to the layout as free-form text.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="187"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="187">Store address</strong>, <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="187">Date</strong>, <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="187">Time 24H</strong>, <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="187">Receipt Number</strong>, and <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="187">Register number</strong>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="188"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="188">Sequence number</strong>: this field identifies the number of the cash transaction in the fiscal registration service.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="190"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="190"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="190">Lines:</strong> Add the following fields.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="192">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="192"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="192">Item name</strong></li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="193"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="193">Qty</strong></li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="194"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="194">Total price with tax</strong></li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="196"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="196"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="196">Footer:</strong> Add the following fields.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="198">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="198">Payment fields, so that the payment amounts for each payment method are printed. For example, add the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="198">Tender name</strong> and <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="198">Tender amount</strong> fields to one line of the layout.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="199"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="199">ID provozovny/pokladny</strong>: this field prints the identifiers of the business premises and the cash register.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="200"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="200">BKP</strong>: this field prints the taxpayer's security code that is assigned by the fiscal registration service.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="201"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="201">FIK</strong>: this field prints the fiscal identification code of the transaction that is assigned by the web-service of tax authorities in case of successful online registration.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="202"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="202">PKP</strong>: this field prints the taxpayer's signature code that is generated by the fiscal registration service in case of offline registration.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="203"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="203">Info</strong>: this field prints the additional information from the fiscal registration service.</li>
</ul>
</li>
</ul>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="205">For more information about how to work with receipt formats, see <a href="../receipt-templates-printing.html" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="205">Set up and design receipt formats</a>.</p>
<h3 id="configure-fiscal-integration" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="207">Configure fiscal integration</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="209">Complete the fiscal integration setup steps as described in <a href="setting-up-fiscal-integration-for-retail-channel.html" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="209">Set up the fiscal integration for Commerce channels</a>.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="211">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="211"><a href="setting-up-fiscal-integration-for-retail-channel.html#set-up-a-fiscal-registration-process" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="211">Set up a fiscal registration process</a>. Note also the settings for the fiscal registration process that are <a href="#set-up-the-registration-process" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="211">specific to this fiscal registration service integration sample</a>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="212"><a href="setting-up-fiscal-integration-for-retail-channel.html#set-error-handling-settings" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="212">Set error handling settings</a>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="213"><a href="setting-up-fiscal-integration-for-retail-channel.html#enable-manual-execution-of-postponed-fiscal-registration" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="213">Enable manual execution of postponed fiscal registration</a>.</li>
</ul>
<h2 id="deployment-guidelines-for-cash-registers-for-czech-republic" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="215">Deployment guidelines for cash registers for Czech Republic</h2>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="217">The fiscal registration service integration sample for the Czech Republic is part of the Retail SDK. For information about how to install and use the Retail SDK, see the <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/commerce/dev-itpro/retail-sdk/retail-sdk-overview" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="217">Retail software development kit (SDK) architecture (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a>.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="219">This sample consists of extensions for the CRT and Hardware station. To run this sample, you must modify and build the CRT and Hardware station projects. We recommend that you use an unmodified Retail SDK to make the changes that are described in this topic. We also recommend that you use a source control system, such as Azure DevOps, where no files have been changed yet.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="221">Follow these steps to set up a development environment so that you can test and extend the sample.</p>
<h3 id="enable-commerce-runtime-extensions" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="223">Enable Commerce runtime extensions</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="225">The CRT extension components are included in the CRT samples. To complete the following procedures, open the CRT solution, <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="225">CommerceRuntimeSamples.sln</strong>, under <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="225">RetailSdk\SampleExtensions\CommerceRuntime</strong>.</p>
<h4 id="documentproviderefrsample-component" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="227">DocumentProvider.EFRSample component</h4>
<ol sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="229">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="229"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="229">Find the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="229">Runtime.Extensions.DocumentProvider.EFRSample</strong> project, and build it.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="230"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="230">In the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="230">Runtime.Extensions.DocumentProvider.EFRSample\bin\Debug</strong> folder, find the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="230">Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll</strong> assembly file.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="231"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="231">Copy the assembly file to the CRT extensions folder:</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="233">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="233"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="233">Commerce Scale Unit:</strong> Copy the assembly to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="233">\bin\ext</strong> folder under the Microsoft Internet Information Services (IIS) Commerce Scale Unit site location.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="234"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="234">Local CRT on Modern POS:</strong> Copy the assembly to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="234">\ext</strong> folder under the local CRT client broker location.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="236"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="236">Find the extension configuration file for CRT:</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="238">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="238"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="238">Commerce Scale Unit:</strong> The file is named <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="238">commerceruntime.ext.config</strong>, and it's in the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="238">bin\ext</strong> folder under the IIS Commerce Scale Unit site location.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="239"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="239">Local CRT on Modern POS:</strong> The file is named <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="239">CommerceRuntime.MPOSOffline.Ext.config</strong>, and it's under the local CRT client broker location.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="241"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="241">Register the CRT change in the extension configuration file.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="243">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.Runtime.DocumentProvider.EFRSample&quot; /&gt;
</code></pre>
</li>
</ol>
<h4 id="documentproviderdatamodelefr-component" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="247">DocumentProvider.DataModelEFR component</h4>
<ol sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="249">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="249"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="249">Find the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="249">Runtime.Extensions.DocumentProvider.DataModelEFR</strong> project, and build it.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="250"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="250">In the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="250">Runtime.Extensions.DocumentProvider.DataModelEFR\bin\Debug</strong> folder, find the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="250">Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll</strong> assembly file.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="251"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="251">Copy the assembly file to the CRT extensions folder:</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="253">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="253"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="253">Commerce Scale Unit:</strong> Copy the assembly to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="253">\bin\ext</strong> folder under the IIS Commerce Scale Unit site location.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="254"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="254">Local CRT on Modern POS:</strong> Copy the assembly to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="254">\ext</strong> folder under the local CRT client broker location.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="256"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="256">Find the extension configuration file for CRT:</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="258">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="258"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="258">Commerce Scale Unit:</strong> The file is named <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="258">commerceruntime.ext.config</strong>, and it's in the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="258">bin\ext</strong> folder under the IIS Commerce Scale Unit site location.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="259"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="259">Local CRT on Modern POS:</strong> The file is named <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="259">CommerceRuntime.MPOSOffline.Ext.config</strong>, and it's under the local CRT client broker location.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="261"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="261">Register the CRT change in the extension configuration file.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="263">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR&quot; /&gt;
</code></pre>
</li>
</ol>
<h4 id="update-extension-configuration-file" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="267">Update extension configuration file</h4>
<ol sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="269">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="269"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="269">Find the extension configuration file for CRT:</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="271">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="271"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="271">Commerce Scale Unit:</strong> The file is named <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="271">commerceruntime.ext.config</strong>, and it's in the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="271">bin\ext</strong> folder under the IIS Commerce Scale Unit site location.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="272"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="272">Local CRT on Modern POS:</strong> The file is named <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="272">CommerceRuntime.MPOSOffline.Ext.config</strong>, and it's under the local CRT client broker location.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="274"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="274">Register the CRT change in the extension configuration file.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="276">&lt;add source=&quot;assembly&quot; value=&quot;Microsoft.Dynamics.Commerce.Runtime.ReceiptsCzechia&quot; /&gt;
</code></pre>
</li>
</ol>
<h3 id="enable-hardware-station-extensions" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="280">Enable Hardware station extensions</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="282">The Hardware station extension components are included in the Hardware station samples. To complete the following procedures, open the solution, <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="282">HardwareStationSamples.sln.sln</strong>, under <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="282">RetailSdk\SampleExtensions\HardwareStation</strong>.</p>
<h4 id="efrsample-component" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="284">EFRSample component</h4>
<ol sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="286">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="286"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="286">Find the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="286">HardwareStation.Extension.EFRSample</strong> project, and build it.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="287"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="287">In the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="287">Extension.EFRSample\bin\Debug</strong> folder, find following files:</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="289">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="289">The <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="289">Contoso.Commerce.HardwareStation.EFRSample.dll</strong> assembly</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="290">The <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="290">Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll</strong> assembly</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="292"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="292">Copy the assembly files to the Hardware station extensions folder:</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="294">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="294"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="294">Shared hardware station:</strong> Copy the files to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="294">bin</strong> folder under the IIS Hardware station site location.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="295"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="295">Dedicated hardware station on Modern POS:</strong> Copy the files to the Modern POS client broker location.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="297"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="297">Find the extension configuration file for the Hardware station's extensions. The file is named <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="297">HardwareStation.Extension.config</strong>.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="299">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="299"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="299">Shared hardware station:</strong> The file is located under the IIS Hardware station site location.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="300"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="300">Dedicated hardware station on Modern POS:</strong> The file is located under the Modern POS client broker location.</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="302"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="302">Add the following line to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="302">composition</strong> section of the configuration file.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="304">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.HardwareStation.EFRSample.dll&quot; /&gt;
</code></pre>
</li>
</ol>
<h3 id="set-up-the-registration-process" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="308">Set up the registration process</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="310">To enable the registration process, follow these steps to set up Headquarters. For more details, see <a href="setting-up-fiscal-integration-for-retail-channel.html#set-up-a-fiscal-registration-process" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="310">Set up a fiscal registration process</a>.</p>
<ol sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="312">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="312">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="312">Retail and Commerce &gt; Headquarters setup &gt; Parameters &gt; Commerce shared parameters</strong>. On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="312">General</strong> tab, set the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="312">Enable fiscal integration</strong> option to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="312">Yes</strong>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="313">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="313">Retail and Commerce &gt; Channel setup &gt; Fiscal integration &gt; Fiscal connectors</strong>, and load the connector configuration. The file location is <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="313">RetailSdk\SampleExtensions\HardwareStation\Extension.EFRSample\Configuration\ConnectorEFRSample.xml</strong>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="314">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="314">Retail and Commerce &gt; Channel setup &gt; Fiscal integration &gt; Fiscal document providers</strong>, and load the document provider configuration. The configuration file is  <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="314">RetailSdk\SampleExtensions\CommerceRuntime\Extensions.DocumentProvider.EFRSample\Configuration\DocumentProviderFiscalEFRSampleCzech.xml</strong>.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="315">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="315">Retail and Commerce &gt; Channel setup &gt; Fiscal integration &gt; Connector functional profiles</strong>. Create a new connector functional profile. Select the document provider and the connector that you loaded earlier. Update the data mapping settings as required.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="316">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="316">Retail and Commerce &gt; Channel setup &gt; Fiscal integration &gt; Connector technical profiles</strong>. Create a new connector technical profile, and select the connector that you loaded earlier. Update the connection settings as required.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="317">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="317">Retail and Commerce &gt; Channel setup &gt; Fiscal integration &gt; Fiscal connector groups</strong>. Create a new fiscal connector group, for the connector functional profile that you created earlier.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="318">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="318">Retail and Commerce &gt; Channel setup &gt; Fiscal integration &gt; Fiscal registration processes</strong>. Create a new fiscal registration process, a fiscal registration process step, and select the fiscal connector group that you created earlier.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="319">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="319">Retail and Commerce &gt; Channel setup &gt; POS setup &gt; POS profiles &gt; Functionality profiles</strong>. Select a functionality profile that is linked to the store where the registration process should be activated. On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="319">Fiscal registration process</strong> FastTab, select the fiscal registration process that you created earlier.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="320">Go to <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="320">Retail and Commerce &gt; Channel setup &gt; POS setup &gt; POS profiles &gt; Hardware profiles</strong>. Select a hardware profile that is linked to the Hardware station that the fiscal printer will be connected to. On the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="320">Fiscal peripherals</strong> FastTab, select the connector technical profile that you created earlier.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="321">Open the distribution schedule (<strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="321">Retail and Commerce &gt; Retail and Commerce IT &gt; Distribution schedule</strong>), and select jobs <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="321">1070</strong> and <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="321">1090</strong> to transfer data to the channel database.</li>
</ol>
<h3 id="production-environment" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="323">Production environment</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="325">The previous procedure enables the extensions that are components of the fiscal registration service integration sample. In addition, you must follow these steps to create deployable packages that contain Commerce components, and to apply those packages in a production environment.</p>
<ol sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="327">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="327"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="327">Make the following changes in the package configuration files under the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="327">RetailSdk\Assets</strong> folder.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="329">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="329"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="329">In the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="329">commerceruntime.ext.config</strong> and <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="329">CommerceRuntime.MPOSOffline.Ext.config</strong> configuration files, add the following lines to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="329">composition</strong> section.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="331">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.Runtime.DocumentProvider.EFRSample&quot; /&gt;
&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR&quot; /&gt;
&lt;add source=&quot;assembly&quot; value=&quot;Microsoft.Dynamics.Commerce.Runtime.ReceiptsCzechia&quot; /&gt;
</code></pre>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="337"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="337">In the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="337">HardwareStation.Extension.config</strong> configuration file, add the following line to the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="337">composition</strong> section.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="339">&lt;add source=&quot;assembly&quot; value=&quot;Contoso.Commerce.HardwareStation.EFRSample&quot; /&gt;
</code></pre>
</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="343"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="343">Make the following changes in the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="343">BuildTools\Customization.settings</strong> package customization configuration file.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="345">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="345"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="345">Add the following lines to include the CRT extensions in the deployable packages.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="347">&lt;ISV_CommerceRuntime_CustomizableFile Include=&quot;$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll&quot; /&gt;
&lt;ISV_CommerceRuntime_CustomizableFile Include=&quot;$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll&quot; /&gt;
&lt;ISV_HardwareStation_CustomizableFile Include=&quot;$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll&quot; /&gt;
</code></pre>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="353"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="353">Add the following line to include the Hardware station extension in the deployable packages.</p>
<pre><code class="lang-xml" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="355">&lt;ISV_HardwareStation_CustomizableFile Include=&quot;$(SdkReferencesPath)\Contoso.Commerce.HardwareStation.EFRSample&quot; /&gt;
</code></pre>
</li>
</ul>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="359"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="359">Start the MSBuild Command Prompt for Visual Studio utility, and run <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="359">msbuild</strong> under the Retail SDK folder to create deployable packages.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="360"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="360">Apply the packages via Microsoft Dynamics Lifecycle Services (LCS) or manually. For more information, see <a href="https://docs.wika.com/en-us/dynamics365/supply-chain/commerce/dev-itpro/retail-sdk/retail-sdk-packaging" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="360">Create deployable packages (This is an external linThis link was changed due to HTMLfromRepoGenerator)</a>.</p>
</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="361"><p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="361">Complete all the required setup tasks that are described in the <a href="#set-up-commerce-for-czech-republic" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="361">Set up Commerce for Czech Republic</a> section.</p>
</li>
</ol>
<h2 id="design-of-extensions" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="363">Design of extensions</h2>
<h3 id="commerce-runtime-extension-design" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="365">Commerce runtime extension design</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="367">The purpose of the extension that is a fiscal document provider is to generate service-specific documents and handle responses from the fiscal registration service.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="369">The CRT extension is <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="369">Runtime.Extensions.DocumentProvider.EFRSample</strong>.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="371">For more details about the design of the fiscal integration solution, see <a href="fiscal-integration-for-retail-channel.html#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="371">Fiscal registration process and fiscal integration samples for fiscal devices</a>.</p>
<h4 id="request-handler" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="373">Request handler</h4>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="375">There is a single <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="375">DocumentProviderEFRFiscalCZE</strong> request handler for document provider, which is used to generate fiscal documents for the fiscal registration service.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="377">This handler is inherited from the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="377">INamedRequestHandler</strong> interface. The <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="377">HandlerName</strong> method is responsible for returning the name of the handler. The handler name should match the connector document provider name that is specified in Headquarters.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="379">The connector supports the following requests.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="381">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="381"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="381">GetFiscalDocumentDocumentProviderRequest</strong> – This request contains information about what document should be generated. It returns a service-specific document that should be registered in the fiscal registration service.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="382"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="382">GetSupportedRegistrableEventsDocumentProviderRequest</strong> – This request returns the list of events to subscribe to. Currently, the following events are supported: sales, customer account deposits and customer order deposits.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="383"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="383">GetFiscalRegisterResponseToSaveDocumentProviderRequest</strong> – This request returns the response from the fiscal registration service. This response is serialized to form a string so that it's ready to be saved.</li>
</ul>
<h4 id="configuration" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="385">Configuration</h4>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="387">The <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="387">DocumentProviderFiscalEFRSampleCzech</strong> configuration file is located in the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="387">Configuration</strong> folder of the extension project.
The purpose of this file is to enable settings for the document provider to be configured from Headquarters. The file format is aligned with the requirements for fiscal integration configuration. The following settings are added.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="390">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="390">VAT rates mapping</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="391">Default VAT group</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="392">Deposit VAT group</li>
</ul>
<h3 id="hardware-station-extension-design" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="394">Hardware station extension design</h3>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="396">The purpose of the extension that is a fiscal connector is to communicate with the fiscal registration service.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="398">The Hardware station extension is <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="398">HardwareStation.Extension.EFRSample</strong>. The Hardware station extension uses the HTTP protocol to submit documents that the CRT extension generates to the fiscal registration service. It also handles the responses that are received from the fiscal registration service.</p>
<h4 id="request-handler-1" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="400">Request handler</h4>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="402">The <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="402">EFRHandler</strong> request handler is the entry point for handling requests to the fiscal registration service.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="404">The handler is inherited from the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="404">INamedRequestHandler</strong> interface. The <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="404">HandlerName</strong> method is responsible for returning the name of the handler. The handler name should match the fiscal connector name that is specified in Headquarters.</p>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="406">The connector supports the following requests.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="408">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="408"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="408">SubmitDocumentFiscalDeviceRequest</strong> – This request sends documents to the fiscal registration service and returns a response from it.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="409"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="409">IsReadyFiscalDeviceRequest</strong> – This request is used for a health check of the fiscal registration service.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="410"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="410">InitializeFiscalDeviceRequest</strong> – This request is used to initialize the fiscal registration service.</li>
</ul>
<h4 id="configuration-1" sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="412">Configuration</h4>
<p sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="414">The configuration file is located in the <strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="414">Configuration</strong> folder of the extension project. The purpose of the file is to enable settings for the fiscal connector to be configured from Headquarters. The file format is aligned with the requirements for fiscal integration configuration. The following settings are added.</p>
<ul sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="416">
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="416"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="416">Endpoint address</strong> – The URL of the fiscal registration service.</li>
<li sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="417"><strong sourcefile="commerce/localizations/emea-cze-fi-sample.md" sourcestartlinenumber="417">Timeout</strong> – The amount of time, in milliseconds, that the driver will wait for a response from the fiscal registration service.</li>
</ul>
</article>
              </div>
              
<div class="hidden-sm col-md-3" role="complementary">
  <div class="sideaffix">
    <div class="contribution">
      <ul class="nav">
        <li>
          <a href="https://github.com/MicrosoftDocs/Dynamics-365-unified-Operations-public/blob/live/articles/commerce/localizations/emea-cze-fi-sample.md/#L1" class="contribution-link">Improve this Doc</a>
        </li>
      </ul>
    </div>
    <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
    <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
    </nav>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright � 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
