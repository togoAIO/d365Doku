<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Configure Common Data Service virtual entities </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Configure Common Data Service virtual entities ">
    <meta name="generator" content="docfx 2.56.6.0">
    <meta name="description" content="This topic shows how to configure virtual entities for Dynamics 365 Human Resources. Generate and update existing virtual entities, and analyze generated and available entities.">
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="toc.html">
    <meta name="searchOption" content="noindex">
    
    
    <meta name="robots" content="NOINDEX, NOFOLLOW">
    <meta name="ms.search.form" content="CDSIntegrationAdministration">
    <meta name="ms.search.scope" content="Core, Operations, Human Resources, ShowInHelp">
    <meta name="ms.search.region" content="Global">
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="row">
          <div class="col-sm-12">
            
<div class="sidenav hide-when-search"> 
  <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
  <div class="sidetoggle collapse" id="sidetoggle">
    <div id="sidetoc"></div>
  </div>
</div>
            <div class="row toc-offset">
              
              <div class="col-sm-12 col-md-9">
                <article class="article" id="_content" data-uid="">
<h1 id="configure-common-data-service-virtual-entities">Configure Common Data Service virtual entities</h1>

[!include[rename-banner](~/includes/cc-data-platform-banner.md)]
<p>Dynamics 365 Human Resources is a virtual data source in Common Data Service. It provides full create, read, update, and delete (CRUD) operations from Common Data Service and Microsoft Power Platform. The data for virtual entities isn't stored in Common Data Service, but in the application database.</p>
<p>To enable CRUD operations on Human Resources entities from Common Data Service, you must make the entities available as virtual entities in Common Data Service. This lets you perform CRUD operations from Common Data Service and Microsoft Power Platform on data that's in Human Resources. The operations also support the full business logic validations of Human Resources to ensure data integrity when writing data to the entities.</p>
<h2 id="available-virtual-entities-for-human-resources">Available virtual entities for Human Resources</h2>
<p>All Open Data Protocol (OData) entities in Human Resources are available as virtual entities in Common Data Service. They're also available in Power Platform. You can now build apps and experiences with data directly from Human Resources with full CRUD capability, without copying or synchronizing data to Common Data Service. You can use Power Apps portals to build external-facing websites that enable collaboration scenarios for business processes in Human Resources.</p>
<p>You can view the list of virtual entities enabled in the environment, and begin working with the entities in <a href="https://make.powerapps.com">Power Apps</a>, in the <strong>Dynamics 365 HR Virtual Entities</strong> solution.</p>
<p><img src="media/hr-admin-integration-virtual-entities-power-apps.jpg" alt="Dynamics 365 HR Virtual Entities in Power Apps"></p>
<h2 id="virtual-entities-versus-natural-entities">Virtual entities versus natural entities</h2>
<p>Virtual entities for Human Resources aren't the same as the natural Common Data Service entities created for Human Resources. The natural entities for Human Resources are generated separately and maintained in the HCM Common solution in Common Data Service. With natural entities, the data is stored in Common Data Service and requires synchronization with the Human Resources application database.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For a list of the natural Common Data Service entities for Human Resources, see <a href="https://docs.microsoft.com/dynamics365/human-resources/hr-developer-entities">Common Data Service entities</a>.</p>
</div>
<h2 id="setup">Setup</h2>
<p>Follow these setup steps to enable virtual entities in your environment.</p>
<h3 id="enable-virtual-entities-in-human-resources">Enable virtual entities in Human Resources</h3>
<p>First, you must enable virtual entities in the <strong>Feature management</strong> workspace.</p>
<ol>
<li><p>In Human Resources, select <strong>System administration</strong>.</p>
</li>
<li><p>Select the <strong>Feature management</strong> tile.</p>
</li>
<li><p>Select <strong>Virtual Entity support in HR/CDS</strong>, and then select <strong>Enable</strong>.</p>
</li>
</ol>
<p>For more information about enabling and disabling features, see <a href="hr-admin-manage-features.html">Manage features</a>.</p>
<h3 id="register-the-app-in-microsoft-azure">Register the app in Microsoft Azure</h3>
<p>You must register your Human Resources instance in the Azure portal so the Microsoft identity platform can provide authentication and authorization services for the app and users. For more information about registering apps in Azure, see <a href="https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app">Quickstart: Register an application with the Microsoft identity platform</a>.</p>
<ol>
<li><p>Open the <a href="https://portal.azure.com">Microsoft Azure portal</a>.</p>
</li>
<li><p>In the Azure services list, select <strong>App registrations</strong>.</p>
</li>
<li><p>Select <strong>New registration</strong>.</p>
</li>
<li><p>In the <strong>Name</strong> field, enter a descriptive name for the app. For example, <strong>Dynamics 365 Human Resources Virtual Entities</strong>.</p>
</li>
<li><p>In the <strong>Redirect URI</strong> field, enter the namespace URL of your instance of Human Resources.</p>
</li>
<li><p>Select <strong>Register</strong>.</p>
</li>
<li><p>When registration completes, the Azure portal displays the app registration's <strong>Overview</strong> pane, which includes its <strong>Application (client) ID</strong>. Take note of the <strong>Application (client) ID</strong> at this time. You'll enter this information when you <a href="hr-admin-integration-common-data-service-virtual-entities.html#configure-the-virtual-entity-data-source">Configure the virtual entity data source</a>.</p>
</li>
<li><p>In the left navigation pane, select <strong>Certificates and secrets</strong>.</p>
</li>
<li><p>In the <strong>Client secrets</strong> section of the page, select <strong>New client secret</strong>.</p>
</li>
<li><p>Provide a description, select a duration, and select <strong>Add</strong>.</p>
</li>
<li><p>Record the secret's value. You'll enter this information when you <a href="hr-admin-integration-common-data-service-virtual-entities.html#configure-the-virtual-entity-data-source">Configure the virtual entity data source</a>.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>Be sure to take note of the secret's value at this time. The secret is never displayed again after you leave this page.</p>
</div>
</li>
</ol>
<h3 id="install-the-dynamics-365-hr-virtual-entity-app">Install the Dynamics 365 HR Virtual Entity app</h3>
<p>Install the Dynamics 365 HR Virtual Entity app in your Power Apps environment to deploy the virtual entity solution package to Common Data Service.</p>
<ol>
<li><p>Open the <a href="https://admin.powerplatform.microsoft.com">Power Platform admin center</a>.</p>
</li>
<li><p>In the <strong>Environments</strong> list, select the Power Apps environment associated with your Human Resources instance.</p>
</li>
<li><p>In the <strong>Resources</strong> section of the page, select <strong>Dynamics 365 apps</strong>.</p>
</li>
<li><p>Select the <strong>Install app</strong> action.</p>
</li>
<li><p>Select <strong>Dynamics 365 HR Virtual Entity</strong>, and select <strong>Next</strong>.</p>
</li>
<li><p>Review and mark to agree to the terms of service.</p>
</li>
<li><p>Select <strong>Install</strong>.</p>
</li>
</ol>
<p>The install takes a few minutes. When it completes, continue to the next steps.</p>
<p><img src="media/hr-admin-integration-virtual-entities-power-platform-install.jpg" alt="Install the Dynamics 365 HR Virtual Entity app from the Power Platform admin center"></p>
<h3 id="configure-the-virtual-entity-data-source">Configure the virtual entity data source</h3>
<p>The next step is to configure the virtual entity data source in the Power Apps environment.</p>
<ol>
<li><p>Open the <a href="https://admin.powerplatform.microsoft.com">Power Platform admin center</a>.</p>
</li>
<li><p>In the <strong>Environments</strong> list, select the Power Apps environment associated with your Human Resources instance.</p>
</li>
<li><p>Select the <strong>Environment URL</strong> in the <strong>Details</strong> section of the page.</p>
</li>
<li><p>In the <strong>Solution Health Hub</strong>, select the <strong>Advanced Find</strong> icon in the top right of the application page.</p>
</li>
<li><p>On the <strong>Advanced Find</strong> page, in the <strong>Look for</strong> dropdown list, select <strong>Finance and Operations Virtual Data Source Configurations</strong>.</p>
</li>
<li><p>Select <strong>Results</strong>.</p>
</li>
<li><p>Select the <strong>Microsoft HR Data Source</strong> record.</p>
</li>
<li><p>Enter the required information for the data source configuration:</p>
<ul>
<li><p><strong>Target URL</strong>: The URL of your Human Resources namespace. The format of the target URL is:</p>
<p>https://&lt;hostname&gt;.hr.talent.dynamics.com/namespaces/&lt;namespaceID&gt;/</p>
<p>For example:</p>
<p><code>https://aos.rts-sf-5ea54e35c68-westus2.hr.talent.dynamics.com/namespaces/49d24c565-8f4d-4891-b174-bf83d948ed0c/</code></p>
<div class="NOTE">
<h5>Note</h5>
<p>Be sure to include the &quot;<strong>/</strong>&quot; character at the end of the URL to avoid receiving an error.</p>
</div>
</li>
<li><p><strong>Tenant ID</strong>: The Azure Active Directory (Azure AD) tenant ID.</p>
</li>
<li><p><strong>AAD Application ID</strong>: The application (client) ID created for the application registered in the Microsoft Azure portal. You received this information earlier during the step <a href="hr-admin-integration-common-data-service-virtual-entities.html#register-the-app-in-microsoft-azure">Register the app in Microsoft Azure</a>.</p>
</li>
<li><p><strong>AAD Application Secret</strong>: The client secret created for the application registered in the Microsoft Azure portal. You received this information earlier during the step <a href="hr-admin-integration-common-data-service-virtual-entities.html#register-the-app-in-microsoft-azure">Register the app in Microsoft Azure</a>.</p>
</li>
</ul>
<p><img src="media/hr-admin-integration-virtual-entities-hr-data-source.jpg" alt="Microsoft HR Data Source"></p>
</li>
<li><p>Select <strong>Save &amp; Close</strong>.</p>
</li>
</ol>
<h3 id="grant-app-permissions-in-human-resources">Grant app permissions in Human Resources</h3>
<p>Grant permissions for the two Azure AD applications in Human Resources:</p>
<ul>
<li>The app created for your tenant in the Microsoft Azure portal</li>
<li>The Dynamics 365 HR Virtual Entity app installed in the Power Apps environment</li>
</ul>
<ol>
<li><p>In Human Resources, open the <strong>Azure Active Directory applications</strong> page.</p>
</li>
<li><p>Select <strong>New</strong> to create a new application record:</p>
<ul>
<li>In the <strong>Client ID</strong> field, enter the client ID of the app you registered in the Microsoft Azure portal.</li>
<li>In the <strong>Name</strong> field, enter the name of the app you registered in the Microsoft Azure portal.</li>
<li>In the <strong>User ID</strong> field, select the user ID of a user with admin permissions in Human Resources and the Power Apps environment.</li>
</ul>
</li>
<li><p>Select <strong>New</strong> to create a second application record:</p>
<ul>
<li><strong>Client Id</strong>: f9be0c49-aa22-4ec6-911a-c5da515226ff</li>
<li><strong>Name</strong>: Dynamics 365 HR Virtual Entity</li>
<li>In the <strong>User ID</strong> field, select the user ID of a user with admin permissions in Human Resources and the Power Apps environment.</li>
</ul>
</li>
</ol>
<h2 id="generate-virtual-entities">Generate virtual entities</h2>
<p>When setup completes, you can select the virtual entities you want to generate and enable in your Common Data Service instance.</p>
<ol>
<li><p>In Human Resources, open the <strong>Common Data Service (CDS) integration</strong> page.</p>
</li>
<li><p>Select the <strong>Virtual entities</strong> tab.</p>
</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>The <strong>Enable the virtual entity</strong> toggle will be set to <strong>Yes</strong> automatically when all required setup has been completed. If the toggle is set to <strong>No</strong>, review the steps in previous sections of this document to ensure all prerequisite setup is completed.</p>
</div>
<ol start="3">
<li><p>Select the entity or entities you want to generate in Common Data Service.</p>
</li>
<li><p>Select <strong>Generate/refresh</strong>.</p>
</li>
</ol>
<p><img src="media/hr-admin-integration-common-data-service-integration.jpg" alt="Common Data Service Integraton"></p>
<h2 id="check-entity-generation-status">Check entity generation status</h2>
<p>Virtual entities are generated in Common Data Service through an asynchronous background process. Updates on the process display in the action center. Details on the process, including error logs, appear in the <strong>Process automations</strong> page.</p>
<ol>
<li><p>In Human Resources, open the <strong>Process automations</strong> page.</p>
</li>
<li><p>Select the <strong>Background processes</strong> tab.</p>
</li>
<li><p>Select <strong>Virtual entity poll async operation background process</strong>.</p>
</li>
<li><p>Select <strong>View most recent results</strong>.</p>
</li>
</ol>
<p>The slideout pane displays the most recent execution results for the process. You can view the log for the process, including any errors returned from Common Data Service.</p>
<h2 id="see-also">See also</h2>
<p><a href="https://docs.microsoft.com/powerapps/maker/common-data-service/data-platform-intro">What is Common Data Service?</a><br>
<a href="https://docs.microsoft.com/powerapps/maker/common-data-service/entity-overview">Entity overview</a><br>
<a href="https://docs.microsoft.com/powerapps/maker/common-data-service/relationships-overview">Entity relationships overview</a><br>
<a href="https://docs.microsoft.com/powerapps/maker/common-data-service/create-edit-virtual-entities">Create and edit virtual entities that contain data from an external data source</a><br>
<a href="https://docs.microsoft.com/powerapps/maker/portals/overview">What is Power Apps portals?</a><br>
<a href="https://docs.microsoft.com/powerapps/maker/">Overview of creating apps in Power Apps</a></p>
</article>
              </div>
              
<div class="hidden-sm col-md-3" role="complementary">
  <div class="sideaffix">
    <div class="contribution">
      <ul class="nav">
        <li>
          <a href="https://github.com/MicrosoftDocs/Dynamics-365-unified-Operations-public/blob/live/articles/human-resources/hr-admin-integration-common-data-service-virtual-entities.md/#L1" class="contribution-link">Improve this Doc</a>
        </li>
      </ul>
    </div>
    <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
    <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
    </nav>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright � 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
