<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Modify models and mappings to generate documents that have application data </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Modify models and mappings to generate documents that have application data ">
    <meta name="generator" content="docfx 2.56.6.0">
    <meta name="description" content="To complete the steps in this procedure, you must first complete the procedure, &quot;ER Generate documents with application data update (Part 2 - Generate documents)&quot;.">
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="../../../../commerce/TOC.html">
    <meta name="searchOption" content="noindex">
    
    
    <meta name="robots" content="NOINDEX, NOFOLLOW">
    
    <meta name="ms.search.scope" content="Core, Operations, CrossApp, ShowInHelp">
    <meta name="ms.search.region" content="Global">
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="row">
          <div class="col-sm-12">
            
<div class="sidenav hide-when-search"> 
  <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
  <div class="sidetoggle collapse" id="sidetoggle">
    <div id="sidetoc"></div>
  </div>
</div>
            <div class="row toc-offset">
              
              <div class="col-sm-12 col-md-9">
                <article class="article" id="_content" data-uid="">
<h1 id="modify-models-and-mappings-to-generate-documents-that-have-application-data">Modify models and mappings to generate documents that have application data</h1>


<p>To complete the steps in this procedure, you must first complete the procedure, &quot;ER Generate documents with application data update (Part 2: Generate documents)&quot;.</p>
<p>The steps in this procedure explain how to design Electronic reporting (ER) configurations to generate an electronic document and update application data. In this procedure, you will modify the ER configurations to start using them to generate electronic documents and update application data. This procedure is created for users with the assigned role of system administrator or electronic reporting developer. These steps can be completed using the DEMF dataset.</p>
<h2 id="modify-data-model">Modify data model</h2>
<ol>
<li>Go to Organization administration &gt; Electronic reporting &gt; Configurations.</li>
<li>In the tree, select 'Intrastat (model)'.
<ul>
<li>You will extend how you use the data model. Besides using it as data source to generate the Intrastat report, the data model will be used to collect details about the Intrastat reporting process. The details will then be used to update application data.</li>
</ul>
</li>
<li>Click Designer.</li>
<li>Click New to open the drop dialog.</li>
<li>In the New node as a field, enter 'Model root'.</li>
<li>In the Name field, type 'For application data update'.
<ul>
<li>For application data update</li>
</ul>
</li>
<li>Click Add.</li>
<li>In the tree, select 'For application data update'.
<ul>
<li>This new root item is added to specify the data flow for moving data from the Intrastat report (used as a data source) to the application tables (the update destination). Note that different root items must be used for getting data that is posted to the outgoing document and for getting data from the document that is used to update application data.</li>
</ul>
</li>
<li>Click New to open the drop dialog.</li>
<li>In the Name field, type 'Archive header'.
<ul>
<li>Archive header</li>
</ul>
</li>
<li>In the Item type field, select 'Record list'.</li>
<li>Click Add.
<ul>
<li>Because you will create a record for each Intrastat report that is generated, you must create a new item for that.</li>
</ul>
</li>
<li>Click New to open the drop dialog.</li>
<li>In the Name field, type 'File name'.
<ul>
<li>File name</li>
</ul>
</li>
<li>In the Item type field, select 'String'.</li>
<li>Click Add.</li>
<li>Click New to open the drop dialog.</li>
<li>In the Name field, type 'Number of lines'.
<ul>
<li>Number of lines</li>
</ul>
</li>
<li>In the Item type field, select 'Integer'.</li>
<li>Click Add.
<ul>
<li>Add this item to represent the number of Intrastat transactions that are reported during the current reporting process.</li>
</ul>
</li>
<li>Click New to open the drop dialog.</li>
<li>In the Name field, type 'Archive lines'.
<ul>
<li>Archive lines</li>
</ul>
</li>
<li>In the Item type field, select 'Record list'.</li>
<li>Click Add.
<ul>
<li>Add this item to represent the list of Intrastat transactions that are reported during the current reporting process.</li>
</ul>
</li>
<li>Click New to open the drop dialog.</li>
<li>In the Name field, type 'Amount'.
<ul>
<li>Amount</li>
</ul>
</li>
<li>In the Item type field, select 'Real'.</li>
<li>Click Add.</li>
<li>Click New to open the drop dialog.</li>
<li>In the Name field, type 'Commodity rec id'.
<ul>
<li>Commodity rec id</li>
</ul>
</li>
<li>In the Item type field, select 'Int64'.</li>
<li>Click Add.</li>
<li>Click New to open the drop dialog.</li>
<li>In the Name field, type 'Item number'.
<ul>
<li>Item number</li>
</ul>
</li>
<li>In the Item type field, select 'String'.</li>
<li>Click Add.</li>
<li>Click Save.</li>
<li>Close the page.</li>
</ol>
<h2 id="modify-model-mapping">Modify model mapping</h2>
<ol>
<li>In the tree, expand 'Intrastat (model)'.</li>
<li>In the tree, select 'Intrastat (model)\Intrastat (mapping)'.
<ul>
<li>Modify the existing model mapping to start using it for  the application data update and to archive Intrastat reporting details.</li>
</ul>
</li>
<li>Click Designer.</li>
<li>Click New.</li>
<li>In the Name field, type 'Update archive'.
<ul>
<li>Update archive</li>
</ul>
</li>
<li>In the Direction field, select 'To destination'.</li>
<li>Click Save.
<ul>
<li>This new mapping specifies the data flow for moving data (Intrastat reporting details) from the data model to the application tables (the update destination). Note that different model's root items must be used to get data from the application for the reporting process and then use the data from data model for the application data update.</li>
</ul>
</li>
<li>Click Designer.</li>
<li>In the tree, select 'Data model\Data model'.
<ul>
<li>Add the required data source. This is the data model that contains details of the reported Intrastat transactions that must be archived.</li>
</ul>
</li>
<li>Click Add root.</li>
<li>In the Name field, type 'model'.
<ul>
<li>model</li>
</ul>
</li>
<li>In the Definition field, enter or select the value 'For application data update'.
<ul>
<li>For application data update</li>
</ul>
</li>
<li>Click OK.</li>
<li>In the tree, expand 'model'.</li>
<li>In the tree, select 'Functions\Calculated field'.</li>
<li>In the tree, select 'model\Archive header'.</li>
<li>Click Add.
<ul>
<li>Because you want to enumerate reported Intrastat transactions for archiving, the appropriate data source must be added.</li>
</ul>
</li>
<li>In the Name field, type 'Enumerated lines'.
<ul>
<li>Enumerated lines</li>
</ul>
</li>
<li>Click Edit formula.</li>
<li>In the tree, select 'List\ENUMERATE'.</li>
<li>Click Add function.</li>
<li>In the tree, expand 'model'.</li>
<li>In the tree, expand 'model\Archive header'.</li>
<li>In the tree, select 'model\Archive header\Archive lines'.</li>
<li>Click Add data source.</li>
<li>In the Formula field, enter 'ENUMERATE(model.'Archive header'.'Archive lines')'.
<ul>
<li>ENUMERATE(model.'Archive header'.'Archive lines')</li>
</ul>
</li>
<li>Click Save.</li>
<li>Close the page.</li>
<li>Click OK.</li>
<li>Click Add destination.
<ul>
<li>Add application tables as required destinations that require updates to archive details of reported Intrastat transactions.</li>
</ul>
</li>
<li>In the Name field, type 'Archive'.
<ul>
<li>Archive</li>
</ul>
</li>
<li>In the Table name field, type 'IntrastatArchiveGeneral'.
<ul>
<li>IntrastatArchiveGeneral</li>
<li>Keep the record action 'Insert' so you can add records during the detail archiving of each Intrastat reporting process.</li>
</ul>
</li>
<li>Select Yes in the Record infolog field.
<ul>
<li>Select Yes to get information about issues with the application data update.</li>
</ul>
</li>
<li>Select Yes in the Skip record action validation field.
<ul>
<li>Select Yes to suppress validation errors about the empty 'Intrastat archive ID' field. This will be done after records are added, based on the sequence number settings that are configured for this table in the Foreign trade parameters form.</li>
</ul>
</li>
<li>Click OK.
<ul>
<li>Bind elements of the added data source (the filtered model based on the selected root item) with elements from the added destination.</li>
</ul>
</li>
<li>In the tree, expand 'Archive'.</li>
<li>In the tree, expand 'Archive&lt;Relations'.</li>
<li>In the tree, expand 'Archive&lt;Relations\IntrastatArchiveDetail'.</li>
<li>In the tree, select 'Archive&lt;Relations\IntrastatArchiveDetail\Amount(AmountMST)'.</li>
<li>In the tree, expand 'model\Archive header\Enumerated lines'.</li>
<li>In the tree, expand 'model\Archive header\Enumerated lines\Value'.</li>
<li>In the tree, select 'model\Archive header\Enumerated lines\Value\Amount'.</li>
<li>Click Bind.</li>
<li>In the tree, select 'Archive&lt;Relations\IntrastatArchiveDetail\Commodity(IntrastatCommodity)'.</li>
<li>In the tree, select 'model\Archive header\Enumerated lines\Value\Commodity rec id'.</li>
<li>Click Bind.</li>
<li>In the tree, select 'Archive&lt;Relations\IntrastatArchiveDetail\Item number(ItemId)'.</li>
<li>In the tree, select 'model\Archive header\Enumerated lines\Value\Item number'.</li>
<li>Click Bind.</li>
<li>In the tree, select 'Archive&lt;Relations\IntrastatArchiveDetail\Line number(LineNumber)'.</li>
<li>In the tree, select 'model\Archive header\Enumerated lines\Number'.</li>
<li>Click Bind.</li>
<li>In the tree, select 'Archive&lt;Relations\IntrastatArchiveDetail'.</li>
<li>In the tree, select 'model\Archive header\Enumerated lines'.</li>
<li>Click Bind.</li>
<li>In the tree, select 'Archive\File name(FileName)'.</li>
<li>In the tree, select 'model\Archive header\File name'.</li>
<li>Click Bind.</li>
<li>In the tree, select 'Archive\Number of lines(NumberOfLines)'.</li>
<li>In the tree, select 'model\Archive header\Number of lines'.</li>
<li>Click Bind.</li>
<li>In the tree, select 'Archive'.</li>
<li>In the tree, select 'model\Archive header'.</li>
<li>Click Bind.</li>
<li>Click Save.</li>
<li>Close the page.</li>
<li>Close the page.</li>
</ol>
</article>
              </div>
              
<div class="hidden-sm col-md-3" role="complementary">
  <div class="sideaffix">
    <div class="contribution">
      <ul class="nav">
        <li>
          <a href="https://github.com/MicrosoftDocs/Dynamics-365-unified-Operations-public/blob/live/articles/fin-ops-core/dev-itpro/analytics/tasks/er-generate-documents-application-data-update-part-3-modify-model-mapping.md/#L1" class="contribution-link">Improve this Doc</a>
        </li>
      </ul>
    </div>
    <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
    <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
    </nav>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright � 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
