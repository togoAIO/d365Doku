<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ER Configure format to do counting and summing (Part 3 - Use computations to make the output) | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ER Configure format to do counting and summing (Part 3 - Use computations to make the output) | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../../commerce/TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../../index.html">
                <img id="logo" class="svg" src="../../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="er-configure-format-to-do-counting-and-summing-part-3---use-computations-to-make-the-output">ER Configure format to do counting and summing (Part 3 - Use computations to make the output)</h1>


<p>The following steps explain how a user assigned to the system administrator or electronic reporting developer role can configure an Electronic reporting (ER) format to do counting and summing based on data of the already generated text output. These steps can be performed in any company.</p>
<p>To complete these steps, you must first complete the steps in the &quot;ER Configure format to do counting and summing (Part 2: Configure computations)&quot; procedure.</p>
<p>This procedure is for a feature that was added in Dynamics 365 for Operations version 1611.</p>
<h2 id="configure-this-report-to-use-counting-and-summing-info">Configure this report to use counting and summing info</h2>
<ol>
<li>Go to Organization administration &gt; Workspaces &gt; Electronic reporting.</li>
<li>Click Reporting configurations.</li>
<li>In the tree, expand 'Intrastat model'.</li>
<li>In the tree, expand 'Intrastat model\Intrastat (DE)'.</li>
<li>In the tree, select 'Intrastat model\Intrastat (DE)\Intrastat (DE) with counting &amp; summing'.</li>
<li>Click Designer.</li>
<li>Click the Mapping tab.</li>
<li>Click Add root to open the drop dialog.
<ul>
<li>Add a new data source to get the list of memorized blocks.</li>
</ul>
</li>
<li>In the tree, select 'Functions\Calculated field'.</li>
<li>In the Name field, type '$BlocksList'.
<ul>
<li>$BlocksList</li>
</ul>
</li>
<li>Click Edit formula.</li>
<li>In the tree, select 'Data collection functions\COLLECTEDLIST'.</li>
<li>Click Add function.</li>
<li>Click Add data source.</li>
<li>In the Formula field, enter 'COLLECTEDLIST('$BlockName', '.
<ul>
<li>COLLECTEDLIST('$BlockName',</li>
</ul>
</li>
<li>In the Formula field, enter 'COLLECTEDLIST('$BlockName', &quot;*&quot;)'.
<ul>
<li>COLLECTEDLIST('$BlockName', &quot;*&quot;)</li>
</ul>
</li>
<li>Click Save.
<ul>
<li>The pattern &quot;*&quot; means that all blocks will be included to the list for this record.</li>
</ul>
</li>
<li>Close the page.</li>
<li>Click OK.</li>
<li>Click the Format tab.</li>
<li>In the tree, select 'Intrastat\Data'.</li>
<li>Click Add to open the drop dialog.</li>
<li>In the tree, select 'Text\Sequence'.</li>
<li>In the Name field, type 'Totals by blocks'.
<ul>
<li>Totals by blocks</li>
</ul>
</li>
<li>In the Special characters field, select 'New line - Windows (CR LF)'.</li>
<li>Click OK.</li>
<li>In the tree, select 'Intrastat\Data\Totals by blocks'.</li>
<li>Click Add to open the drop dialog.</li>
<li>In the tree, select 'Text\String'.</li>
<li>In the Name field, type 'Block code'.
<ul>
<li>Block code</li>
</ul>
</li>
<li>Click OK.</li>
<li>Click Add String.</li>
<li>In the Name field, type 'Lines counting'.
<ul>
<li>Lines counting</li>
</ul>
</li>
<li>Click OK.</li>
<li>Click Add String.</li>
<li>In the Name field, type 'Total amount'.
<ul>
<li>Total amount</li>
</ul>
</li>
<li>Click OK.</li>
<li>Click the Mapping tab.</li>
<li>In the tree, select '$BlocksList'.</li>
<li>Click Bind.
<ul>
<li>Create a summary line for each memorized block.</li>
</ul>
</li>
<li>Click the Format tab.</li>
<li>In the tree, select 'Intrastat\Data\Totals by blocks\Block code'.</li>
<li>Click the Mapping tab.</li>
<li>Click Edit formula.</li>
<li>In the Formula field, enter '&quot;Block id: &quot; &amp; '.
<ul>
<li>&quot;Block id: &quot; &amp;</li>
</ul>
</li>
<li>In the tree, expand '$BlocksList'.</li>
<li>In the tree, select '$BlocksList\Value'.</li>
<li>Click Add data source.</li>
<li>Click Save.</li>
<li>Close the page.</li>
<li>Click the Format tab.</li>
<li>In the tree, select 'Intrastat\Data\Totals by blocks\Lines counting'.</li>
<li>Click the Mapping tab.</li>
<li>Click Edit formula.
<ul>
<li>Create output for the number of lines for each block presented in this report.</li>
</ul>
</li>
<li>In the Formula field, enter '&quot;Number of lines in this block: &quot; &amp; '.
<ul>
<li>&quot;Number of lines in this block: &quot; &amp;</li>
</ul>
</li>
<li>In the Formula field, enter '&quot;Number of lines in this block: &quot; &amp; TEXT('.
<ul>
<li>&quot;Number of lines in this block: &quot; &amp; TEXT(</li>
</ul>
</li>
<li>In the tree, select 'Data collection functions\COUNTIFS'.</li>
<li>Click Add function.</li>
<li>Click Add data source.</li>
<li>In the Formula field, enter '&quot;Number of lines in this block: &quot; &amp; TEXT(COUNTIFS('$BlockName', '.
<ul>
<li>&quot;Number of lines in this block: &quot; &amp; TEXT(COUNTIFS('$BlockName',</li>
</ul>
</li>
<li>In the tree, expand '$BlocksList'.</li>
<li>In the tree, select '$BlocksList\Value'.</li>
<li>Click Add data source.</li>
<li>In the Formula field, enter '&quot;Number of lines in this block: &quot; &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '.
<ul>
<li>&quot;Number of lines in this block: &quot; &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value,</li>
</ul>
</li>
<li>In the tree, select '$RecName'.</li>
<li>Click Add data source.</li>
<li>In the Formula field, enter '&quot;Number of lines in this block: &quot; &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', &quot;*&quot;))'.
<ul>
<li>&quot;Number of lines in this block: &quot; &amp; TEXT(COUNTIFS('$BlockName', '$BlocksList'.Value, '$RecName', &quot;*&quot;))</li>
</ul>
</li>
<li>Click Save.</li>
<li>Close the page.</li>
<li>Click the Format tab.</li>
<li>In the tree, select 'Intrastat\Data\Totals by blocks\Total amount'.</li>
<li>Click the Mapping tab.</li>
<li>Click Edit formula.
<ul>
<li>Create output that will be the total of the invoiced amount for each block presented in this report.</li>
</ul>
</li>
<li>In the Formula field, enter '&quot;Sum of invoiced amount: &quot; &amp; TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', &quot;*&quot;))'.
<ul>
<li>&quot;Sum of invoiced amount: &quot; &amp; TEXT(SUMIFS('$InvName', '$BlockName', '$BlocksList'.Value, '$RecName', &quot;*&quot;))</li>
</ul>
</li>
<li>Click Save.</li>
<li>Close the page.</li>
<li>Click Save.</li>
<li>Close the page.</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../../styles/main.js"></script>
  </body>
</html>
