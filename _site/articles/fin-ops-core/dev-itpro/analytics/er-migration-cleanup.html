<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ER migration cleanup | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ER migration cleanup | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../finance/TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="er-migration-cleanup">ER migration cleanup</h1>


<p>When you manage your Finance instances, you might decide to migrate your current instance to another location. For example, you might migrate your production instance to a new sandbox environment. If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the <strong>DocuValue</strong> table in the new sandbox environment refers to the instance of Blob storage in the production environment. However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage. Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</p>
<p>If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template. You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</p>
<p><a href="./media/er-migration-cleanup-run.png"><img src="./media/er-migration-cleanup-run.png" alt="Running an ER format"></a></p>
<p>You will receive a similar error if you navigate to the <strong>Configurations</strong> page (<strong>Organization administration</strong> &gt; <strong>Electronic reporting</strong> &gt; <strong>Configurations</strong>) and in the configurations tree, try to delete an ER format configuration that uses a template.</p>
<p><a href="./media/er-migration-cleanup-delete.png"><img src="./media/er-migration-cleanup-delete.png" alt="Deletion an ER format"></a></p>
<p>Complete the following steps to resolve issues with ER templates that you are unable to access.</p>
<ol>
<li>Go to <strong>Organization administration</strong> &gt; <strong>Periodic</strong> &gt; <strong>Migration cleanup</strong> page.</li>
<li>Select an ER format configuration that can’t be executed or deleted.</li>
<li>Select <strong>Delete</strong>.</li>
<li>Confirm the deletion of the selected ER format configuration.</li>
<li><a href="download-electronic-reporting-configuration-lcs.html">Import</a> the deleted ER format configuration to the current Finance instance.</li>
</ol>
<h2 id="applicability">Applicability</h2>
<blockquote>
<p>[Important]
The <strong>Migration cleanup</strong> option is targeted only for ER format configurations that contain non-accessible ER templates. When you delete an ER format configuration by using the <strong>Migration cleanup</strong> option, ER deletes the templates that are related to the configuration artifacts in the only application database. The existence of the appropriate physical files in Blob storage are not validated. Instead, it is assumed that there are none. Therefore, do not use the <strong>Migration cleanup</strong> option as an alternative to the ER configuration deletion option on the <strong>Configurations</strong> page. Use the <strong>Migration cleanup</strong> option only when the ER configuration deletion option on the <strong>Configurations</strong> page failed.</p>
<p>If you use the <strong>Migration cleanup</strong> option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database. The physical file of the template in the Blob storage remains. File overwriting in Blob storage is no longer allowed. For more information, see <a href="https://fix.lcs.dynamics.com/Issue/Details?kb=4557217">KB4557217</a>. Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment. To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</p>
</blockquote>
<p><a href="./media/er-migration-cleanup-import.png"><img src="./media/er-migration-cleanup-import.png" alt="Importing an ER format"></a></p>
<p>A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</p>
<p>Because you can have several ER format configurations, this process can be time consuming. Therefore, using the <a href="er-backup-storage-templates.html">Backup storage of ER templates</a> feature to automatically recover templates with broken references is preferred.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
