<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Dual currency support for tax | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Dual currency support for tax | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="dual-currency-support-for-sales-tax">Dual currency support for sales tax</h1>


<p>This topic explains how to extend dual currency accounting for sales taxes and the impact for sales tax calculations, posting and settlements.</p>
<p>The Dual currency feature for Dynamics 365 Finance was introduced in version 8.1 (October 2018). It changes the way that accounting entries in the reporting currency are calculated.</p>
<p>In earlier versions, transactions were converted to the reporting currency in the following sequence:</p>
<ul>
<li>Transaction total was calculated in the transaction currency &gt; Transaction amount was converted to the accounting currency &gt; Accounting currency amount was converted to the Reporting currency</li>
</ul>
<p>After enabling the dual currency feature, transactions were converted to the reporting currency in the following sequence:</p>
<ul>
<li>Transaction currency amount &gt; Reporting currency amount</li>
</ul>
<p>For more information about dual currency, please refer to <a href="dual-currency.html">Dual currency</a>.</p>
<p>As a consequence of support for dual currencies, two new features are available in feature management:</p>
<ul>
<li>Sales tax conversion (new in version 10.0.13)</li>
</ul>
<p>Dual currency support for sales taxes ensures that taxes are calculated accurately in the tax currency, and that the sales tax settlement balance is calculated accurately in both the accounting currency and reporting currency.</p>
<h2 id="sales-tax-conversion">Sales tax conversion</h2>
<p>The <strong>Sales tax conversion</strong> parameter provides two options to convert tax amount from transaction currency to tax currency.</p>
<ul>
<li>Accounting currency: The path will be &quot;Amount in transaction currency &gt; Amount in accounting currency &gt; Amount in tax currency&quot;. The accounting currency exchange rate type (configured in Ledger setup) will be used for the currency conversion.</li>
<li>Reporting currency: The path will be &quot;Amount in transaction currency &gt; Amount in reporting currency &gt; Amount in tax currency&quot;. The reporting currency exchange rate type (configured in Ledger setup) will be used for the currency conversion.</li>
</ul>
<h3 id="example">Example</h3>
<p>A simple example to demonstrate this functionality is:</p>
<p>Currency setup for ledger and tax</p>
<table>
<thead>
<tr>
<th>Transaction currency</th>
<th>Accounting currency</th>
<th>Reporting currency</th>
<th>Tax currency</th>
</tr>
</thead>
<tbody>
<tr>
<td>EUR</td>
<td>USD</td>
<td>GBP</td>
<td>GBP</td>
</tr>
</tbody>
</table>
<p>Exchange rate</p>
<table>
<thead>
<tr>
<th>From currency</th>
<th>To currency</th>
<th>Factor</th>
<th>Exchange rate</th>
</tr>
</thead>
<tbody>
<tr>
<td>EUR</td>
<td>USD</td>
<td>1</td>
<td>1.11</td>
</tr>
<tr>
<td>EUR</td>
<td>GBP</td>
<td>1</td>
<td>0.83</td>
</tr>
<tr>
<td>USD</td>
<td>GBP</td>
<td>1</td>
<td>0.75</td>
</tr>
</tbody>
</table>
<p>Tax amount calculation in different parameter options</p>
<p>Tax amount = 100 EUR</p>
<table>
<thead>
<tr>
<th>Sales tax conversion parameters</th>
<th>Transaction currency (EUR)</th>
<th>Accounting currency (USD)</th>
<th>Reporting currency (GBP)</th>
<th>Tax currency (GBP)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accounting currency</td>
<td>100</td>
<td>111</td>
<td>83</td>
<td><strong>83.25</strong></td>
</tr>
<tr>
<td>Reporting currency</td>
<td>100</td>
<td>111</td>
<td>83</td>
<td><strong>83</strong></td>
</tr>
</tbody>
</table>
<p>This parameter can be configured based on the compliance need from tax authority.</p>
<h3 id="upgrade-consideration">Upgrade Consideration</h3>
<p>This feature will only apply for new transactions. For tax transaction already saved in TAXTRANS table but not settled yet, system will not recalculate tax amount in tax currency because the exchange rate at time point of posting tax is already missing.</p>
<p>To prevent preceding scenario, we recommend changing this parameter value in a new (clean) tax settlement period that doesn't contain any unsettled tax transactions. To change this value in the middle of a tax settlement period, please run &quot;Settle and post sales tax&quot; program for current tax settlement period before changing this parameter value.</p>
<h2 id="track-reporting-currency-tax-amount">Track reporting currency tax amount</h2>
<p>Three new fields were added to tax-related tables to track amounts in the reporting currency. These fields are within the TAXUNCOMMITTED and TAXTRANS tables:</p>
<ul>
<li>TaxAmountRep: tax amount in reporting currency</li>
<li>TaxBaseAmountRep: base amount in reporting currency</li>
<li>TaxInCostPriceRep: non-deductible amount in reporting currency</li>
</ul>
<p>For tax only saved in TAXUNCOMMITTED table but not posted yet, system will recalculate tax amount in reporting currency at the time of posting and save in TAXTRANS table.</p>
<p>This release will not include changes to reports and forms that show the tax amount in the reporting currency. Changes to reports and forms will be delivered in the future release.</p>
<h2 id="tax-settlement-auto-balance-in-reporting-currency">Tax settlement auto-balance in reporting currency</h2>
<p>If the tax settlement is not balanced in the reporting currency for certain reason such as the sales tax conversion path is &quot;Accounting currency&quot;, or the exchange rate change in a single tax settlement period, then the system will automatically generate accounting entries to adjust the tax amount variance and offset it against realized exchange gain/loss account, which is configured in Ledger setup.</p>
<p>Using the the previous example to demonstrate this feature, suppose that the data in TAXTRANS table at the time of posting is as follows.</p>
<table>
<thead>
<tr>
<th>Sales tax conversion parameters</th>
<th>Transaction currency (EUR)</th>
<th>Accounting currency (USD)</th>
<th>Reporting currency (GBP)</th>
<th>Tax currency (GBP)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Accounting currency</td>
<td>100</td>
<td>111</td>
<td>83</td>
<td><strong>83.25</strong></td>
</tr>
<tr>
<td>Reporting currency</td>
<td>100</td>
<td>111</td>
<td>83</td>
<td><strong>83</strong></td>
</tr>
</tbody>
</table>
<p>When you run the sales tax settlement program at month-end, the accounting entry will be as follows:.</p>
<h4 id="scenario-sales-tax-conversion--accounting-currency">Scenario: sales tax conversion = &quot;Accounting currency&quot;</h4>
<table>
<thead>
<tr>
<th>Main account</th>
<th>Transaction currency (GBP)</th>
<th>Accounting currency (USD)</th>
<th>Reporting currency (GBP)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tax Payable/Receivable</td>
<td>-83.25</td>
<td>-111</td>
<td>-83.25</td>
</tr>
<tr>
<td>Tax Settlement</td>
<td>83.25</td>
<td>111</td>
<td>83.25</td>
</tr>
<tr>
<td>Realized Gain/Loss</td>
<td>0</td>
<td>0</td>
<td>-0.25</td>
</tr>
<tr>
<td>Tax Payable/Receivable</td>
<td>0</td>
<td>0</td>
<td>0.25</td>
</tr>
</tbody>
</table>
<h4 id="scenario-sales-tax-conversion--reporting-currency">Scenario: sales tax conversion = &quot;Reporting currency&quot;</h4>
<table>
<thead>
<tr>
<th>Main account</th>
<th>Transaction currency (GBP)</th>
<th>Accounting currency (USD)</th>
<th>Reporting currency (GBP)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Tax Payable/Receivable</td>
<td>-83</td>
<td>-110.67</td>
<td>-83</td>
</tr>
<tr>
<td>Tax Settlement</td>
<td>83</td>
<td>110.67</td>
<td>83</td>
</tr>
<tr>
<td>Realized Gain/Loss</td>
<td>0</td>
<td>0.33</td>
<td>0</td>
</tr>
<tr>
<td>Tax Payable/Receivable</td>
<td>0</td>
<td>-0.33</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>For more information, see the following topics:</p>
<ul>
<li><a href="dual-currency.html">Dual currency</a></li>
<li><a href="indirect-taxes-overview.html">Sales tax overview</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
