<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Set up and manage images for Modern POS (MPOS) | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Set up and manage images for Modern POS (MPOS) | WIKA Documentation ">
    <meta name="generator" content="docfx 2.56.6.0">
    
    <link rel="shortcut icon" href="../../microsoft-dynamics-crm-365-icon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"> 
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="TOC.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="set-up-and-manage-images-for-modern-pos-mpos">Set up and manage images for Modern POS (MPOS)</h1>


<p>This article explains the steps that are involved in setting up and managing images for the various entities that appear in Modern POS (MPOS).</p>
<h2 id="setting-up-the-media-base-url-and-defining-media-templates-to-configure-the-format-for-image-urls">Setting up the media base URL and defining media templates to configure the format for image URLs</h2>
<p>The images that appear in Modern POS (MPOS) must be hosted externally, outside of Commerce. Typically, they are hosted in a content management system, content delivery network (CDN), or media server. MPOS then fetches and displays the images for the appropriate entities, such as products and catalogs, by accessing the target URL. To fetch these externally hosted images, MPOS requires the correct URL format for the images. You can configure the required URL format for the images by setting up the <strong>Media base URL</strong> value in the channel profile and using the <strong>Define media template</strong> functionality for each entity. You can also overwrite the standard URL format for a subset of entities by using the <strong>Edit in Excel</strong> functionality.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>In the current version of Commerce, you can no longer set up the URL format by using the <strong>Image</strong> attribute XML for MPOS in the <strong>Default</strong> attribute group for entities. If you're familiar with Microsoft Dynamics AX 2012 R3 and are now using the current version of Commerce, make sure that you always use the new <strong>Define media template</strong> functionality to set up images. Don't use or modify the <strong>Image</strong> attribute in the <strong>Default</strong> attribute group for any entities, including products. Changes that you make directly in the <strong>Default</strong> attribute group for images won't be reflected. This option will be disabled in a future release.</p>
</div>
<p>In the following procedures, images are set up for the Catalog entity as an example. These procedures will help guarantee that the correct image destination path is set implicitly for all catalog images that use a common path. For example, if you've set up a media server or CDN externally, and want the images to appear in MPOS for a given store, the <strong>Define media template</strong> functionality helps you the set the path where MPOS can look up and retrieve the images.</p>
<div class="NOTE">
<h5>Note</h5>
<p>For this demo data example, the media server is deployed on the Commerce Scale Unit. However, you can have it anywhere outside Commerce.</p>
</div>
<h3 id="set-up-the-media-base-url-for-a-channel">Set up the media base URL for a channel</h3>
<ol>
<li><p>Open the Commerce HQ portal.</p>
</li>
<li><p>Click <strong>Retail and Commerce</strong> &gt; <strong>Channel setup</strong> &gt; <strong>Channel profiles</strong>.</p>
<p><a href="./media/channel-profile1.png"><img src="./media/channel-profile1.png" alt="Navigation"></a></p>
</li>
<li><p>In the channel profile that your store uses for MPOS, update the <strong>Media base URL</strong> field with the base URL of your media server or CDN. The base URL is the first part of the URL that is shared by all image folders of different entities.</p>
<p><a href="./media/channel-profile2.png"><img src="./media/channel-profile2.png" alt="Channel profiles page"></a></p>
</li>
</ol>
<h3 id="define-the-media-template-for-an-entity">Define the media template for an entity</h3>
<ol>
<li><p>Click <strong>Retail and Commerce</strong> &gt; <strong>Catalog management</strong> &gt; <strong>Catalog images</strong>.</p>
</li>
<li><p>On the <strong>Catalog images</strong> page, on the Action Pane, click <strong>Define media template</strong>. In the <strong>Define media template</strong> dialog box, in the <strong>Entity</strong> field, <strong>Catalog</strong> should be selected by default.</p>
</li>
<li><p>On the <strong>Media path</strong> FastTab, enter the remaining path of the image location. The media path supports <strong>LanguageID</strong> as a variable. For example, for the demo data, you can create a <strong>Catalogs</strong> folder for all catalog images under the media base URL for your media server (<code>https://testax3ret.cloud.test.dynamics.com/RetailServer/MediaServer</code>). You can then have a folder for each language, such as en-US or fr-FR, and copy the appropriate images under each folder. If you don't have different images for the various languages, you can omit the <strong>LanguageID</strong> variable from your folder structure and point directly to the Catalogs folder that contains the catalog images.</p>
<div class="NOTE">
<h5>Note</h5>
<p>The current version of Commerce supports the <strong>{LanguageId}</strong> token for Catalog, Product, and Category entities. (The <strong>{LanguageID}</strong> token isn't supported for Customer and Worker entities, according to the existing standard that has been effective since Microsoft Dynamics AX 6.x.)</p>
</div>
</li>
<li><p>For images, the file name format is hard-coded to the catalog name and can't be changed. Therefore, rename your images so that they have appropriate catalog names, to help guarantee that MPOS handles them correctly.</p>
</li>
<li><p>In the <strong>File Extension</strong> field, select the expected file name extension, depending on the type of images that you have. For example, for the demo data, the catalog images are set to the .jpg extension. (The image files are also renamed so that they have catalog names.)</p>
</li>
<li><p>Click <strong>OK</strong>.</p>
</li>
<li><p>To validate that the media template for images has been saved correctly, on the <strong>Catalog images</strong> page, click <strong>Define media template</strong> again. To validate the template without closing the <strong>Define media template</strong> dialog box, you can use the <strong>Generate Image URLs for Excel</strong> FastTab. Check the appearance of the image URL, and verify that the URL complies with the template standard that was mentioned earlier. The <strong>Define media template</strong> dialog box has now set the image path implicitly for all catalog images that use this common URL path. This URL path applies to all catalog images unless they are overwritten. The first part of the image path is taken from the media base URL that you defined in the channel profile. The remaining part of the path is taken from the path that you defined in the media template. The two parts are concatenated to provide the full URL of the image location. For example, a catalog in the demo data is named Fabrikam Base Catalog. Therefore, the image name must be Fabrikam Base Catalog.jpg so that it uses the catalog name and the .jpg file name extension that is configured in the template. In this case, after concatenation, the URL will be <code>https://testax3ret.cloud.test.dynamics.com/RetailServer/MediaServer/Catalogs/en-US/Fabrikam Base Catalog.jpg</code>.</p>
</li>
<li><p>Run the synchronization jobs to push the new template to the channel database, so that MPOS can use the template to access the images.</p>
</li>
<li><p>To update the media template for catalog images on the channel side, be sure to run <strong>Catalog Job 1150</strong> from <strong>Retail and Commerce IT</strong> &gt; <strong>Distribution schedule</strong>.</p>
<p><a href="./media/catalog1.png"><img src="./media/catalog1.png" alt="Define media template dialog box"></a></p>
</li>
</ol>
<h2 id="previewing-an-image-from-the-entity-level">Previewing an image from the entity level</h2>
<ol>
<li><p>From the page for the entity item in HQ, you can preview the image that uses the image URL that is derived from the media template. For this example, go to the appropriate catalog, and then, on the Action Pane, click <strong>Media</strong> &gt; <strong>Images</strong>. Use the drop-down list to select different stores that might have different channel profiles.</p>
</li>
<li><p>To edit or remove the implicit media template, you must return to the <strong>Define media template</strong> dialog box for the <strong>Catalog images</strong> page.</p>
</li>
<li><p>You can use the <strong>Add</strong> and <strong>Remove</strong> buttons to manually change the path that is based on the implicit template and used for a specific image. For more information, see the <a href="#overwriting-the-media-template-for-entity-items">Overwriting the media template for entity items</a> section later in this article.</p>
</li>
<li><p>After you've finished previewing an image and making any changes that you require, start the MPOS instance for the appropriate store, and see whether the catalog images are shown.</p>
<p><a href="./media/catalog4.png"><img src="./media/catalog4.png" alt="Images dialog box"></a></p>
</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>You can use the same procedure for all the five entities that are supported: Worker, Customer, Catalog, Category, and Products. &quot;Catalog Products&quot; (products that are set at the catalog level) and &quot;Channel Products&quot; (products that are set at the channel level) use the media template that is set for the Products entity. For the Products media template, you can select the number of product images to show per product. You can also set the default image for a given product. In this way, you can prevent blank images in MPOS and help to control which image is used as the default image for a product item. In the following example, each product has five images, and the first image is set as the default image. Variant products are treated the same way as master products. The file name of the image file should be based on the product number. Some characters are also escaped while the file name is generated. Therefore, it's a good to verify the file name by using the <strong>Generate Image URLs for Excel</strong> section. See the <a href="#overwrite-by-using-edit-in-excel">Overwrite by using Edit in Excel</a> section later in this article.</p>
</div>
<h2 id="synchronization-jobs-to-send-a-media-template-to-the-channel-side">Synchronization jobs to send a media template to the channel side</h2>
<p>For all the five supported entities (Worker, Customer, Catalog, Category, and Products), whenever you update the <strong>Define media template</strong> dialog to set up an image, make sure that you run the Catalog job (1150) from <strong>Retail and Commerce IT</strong> &gt; <strong>Distribution schedule</strong>. This job will enable the updated media template to be synced to the channel and used by MPOS. Run the Catalog job (1150) after you make any of the following changes:</p>
<ul>
<li>You update the Catalog image media template from <strong>Catalog images</strong> &gt; <strong>Define media template</strong>.</li>
<li>You update the Employee image media template from <strong>Employee images</strong> &gt; <strong>Define media template</strong>.</li>
<li>You update the Customer image media template from <strong>Customer image</strong> &gt; <strong>Define media template</strong>.</li>
<li>You update the Product image media template from <strong>Product images</strong> &gt; <strong>Define media template</strong>.</li>
<li>You update the Category image media template from <strong>Category images</strong> &gt; <strong>Define media template</strong>. You must also publish the channel.</li>
</ul>
<h2 id="overwriting-the-media-template-for-entity-items">Overwriting the media template for entity items</h2>
<p>As you learned in the previous section, the media template for a given entity supports only one common path. This path is based on the media base URL that is configured and the media path that is defined. However, in many cases, a retailer wants to be able to use images from different sources for a subset of items in an entity. For example, a store uses the self-hosted media server for one set of catalog images but uses CDN URLs for another set. To overwrite image URLs that are based on a media template for entity images at the entity level, you can use the Edit in Excel and Manual edit functionality from the <strong>Preview</strong> page.</p>
<h3 id="overwrite-by-using-edit-in-excel">Overwrite by using Edit in Excel</h3>
<ol>
<li><p>Click <strong>Retail and Commerce</strong> &gt; <strong>Catalog management</strong> &gt; <strong>Catalog images</strong>.</p>
</li>
<li><p>On the <strong>Catalog images</strong> page, click <strong>Define media template</strong>. In the <strong>Define media template</strong> dialog box, in the <strong>Entity</strong> field, <strong>Catalog</strong> should be selected.</p>
</li>
<li><p>On the <strong>Media path</strong> FastTab, notice the image location.</p>
</li>
<li><p>On the <strong>Generate Image URLs for Excel</strong> FastTab, click <strong>Generate</strong>.</p>
<div class="IMPORTANT">
<h5>Important</h5>
<p>Whenever the media template is changed, you must click <strong>Generate</strong> before you can use the Edit in Excel functionality.</p>
</div>
<p>You now see a preview of the image URLs that were generated based on the last saved media template.</p>
<p><a href="./media/excel2.png"><img src="./media/excel2.png" alt="Generate Image URLs for Excel FastTab after Generate is selected"></a></p>
<div class="NOTE">
<h5>Note</h5>
<p>The URLs that are generated for Excel use the path and conventions of the media template that is defined. These conventions include the conventions for file names. The expectation is that you've set up the physical images outside Commerce, and the images can be retrieved from the URLs that are derived from the media template that you defined earlier. You can overwrite these derived URLs by using the Edit in Excel functionality.</p>
</div>
</li>
<li><p>Click <strong>Edit in Excel</strong>.</p>
</li>
<li><p>After the Microsoft Excel worksheet is opened, click <strong>Enable edit</strong> when you're prompted.</p>
</li>
<li><p>When you're prompted, click <strong>Trust this add-in</strong> in the right pane, and wait for the add-in to complete the installation.</p>
<p><a href="./media/excel4.jpg"><img src="./media/excel4.jpg" alt="Trust this add-in"></a></p>
</li>
<li><p>If you're prompted to sign in, enter the credentials that you used to sign in to HQ.</p>
<p><a href="./media/excel5.png"><img src="./media/excel5.png" alt="Sign-in prompt"></a></p>
</li>
<li><p>After you sign in, you should be able to see the list of image URLs for the various catalog entries.</p>
</li>
<li><p>You edit, add, and remove the image URLs for various entity items.</p>
</li>
<li><p>For all entities except Products, you can overwrite the image URLs. Modify the existing image URL, so that it uses the new destination URL of the image, and update the file name with the new file name for the image file. The file name must be unique to help guarantee that the record is unique.</p>
<p><a href="./media/excel6.jpg"><img src="./media/excel6.jpg" alt="Overwrite the image URLs in Excel"></a></p>
<div class="NOTE">
<h5>Note</h5>
<p>When you overwrite image URLs for Products entities by using the Edit in Excel functionality or the entity item page, MPOS always shows all the media template image URLs together with the overwritten image URLs.</p>
</div>
</li>
<li><p>After you've finished making your changes, click <strong>Publish in Excel</strong> to create a new explicit association entry.</p>
</li>
<li><p>Return to HQ, and click <strong>OK</strong>.</p>
</li>
<li><p>Run the appropriate synchronization jobs for the entity, and check the preview on the entity page or in MPOS.</p>
</li>
</ol>
<h4 id="creating-new-records">Creating new records</h4>
<p>You can create new records in Excel. However, make sure that you provide the correct information. For example, to create a new entry for a catalog, make sure that the catalog ID and catalog name are correct, and also provide a unique file name. The unique file name is very important, because the uniqueness of records in Excel is validated during publishing. First copy the details from the catalog that you want to create a new record for, and copy the record. You just have to update the file name and URL, because the rest of the information will be same. To create new records for Product entity items, you use the same basic procedure. From the Excel worksheet, copy an existing record for the product that you to create a new record for, and then replace the image URL and filename. Make sure that the file name is unique.</p>
<h4 id="deleting-an-existing-record">Deleting an existing record</h4>
<p>Only the overwritten image URL records can be deleted. After an image is deleted and synchronization is completed, the image will no longer appear on the <strong>Preview</strong> page or in MPOS. Image URL records that are derived from the media template can't be deleted, because these records are always derived from the media template every time.</p>
<h3 id="overwrite-from-the-entity-level-preview-page">Overwrite from the entity-level Preview page</h3>
<p>For all entities except Products, you can overwrite the image URL for a given entity item at the entity item level from the <strong>Preview</strong> page. For Products, you can use the &quot;Catalog Products&quot; entity page. This example shows how to overwrite a catalog image.</p>
<ol>
<li><p>Click <strong>Catalogs</strong> &gt; <strong>Media</strong> &gt; <strong>Images</strong>, and select the catalog image to update.</p>
</li>
<li><p>Click <strong>Add</strong>, and enter the image URL to overwrite the media template URL.</p>
</li>
<li><p>If you want this image to be shown in MPOS for the catalog, you can set it as the default image.</p>
</li>
<li><p>Click <strong>OK</strong>. The image URL is updated for this catalog image, and a preview is shown.</p>
<p><a href="./media/preview3.png"><img src="./media/preview3.png" alt="URL updated in the New image dialog box"></a></p>
</li>
<li><p>You can also see the image preview for all overwritten image URLs on the <strong>Catalog images</strong> gallery page.</p>
<p><a href="./media/preview-4.png"><img src="./media/preview-4.png" alt="Catalog images gallery page"></a></p>
</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>Currently, the gallery doesn't show image previews for media template image URLs. For Catalog, Worker, Customer, and Category entities, if the user explicitly provides a URL through this page, we recommend that you indicate which image is the default image, because Commerce Scale Unit clients show only one image per Catalog, Customer, Worker, and Category. If the user doesn't specify a default image, the system determines the default image and send it to the Commerce service caller (MPOS or Ecommerce).</p>
</div>
<h3 id="overwrite-the-image-url-for-catalog-product-images-from-the-preview-page">Overwrite the image URL for catalog product images from the Preview page</h3>
<p>To overwrite image URLs for catalog product images, you must use the <strong>Preview</strong> page. You can't use the Edit in Excel functionality.</p>
<ol>
<li><p>To overwrite product images at a catalog level, select a catalog, and then select the product to overwrite the image for.</p>
</li>
<li><p>Click <strong>Attributes</strong>.</p>
</li>
<li><p>On the next page, select <strong>Image</strong>, and then click <strong>Edit</strong>. The <strong>Preview</strong> page opens as a slider dialog box.</p>
</li>
<li><p>Click <strong>Add</strong>, and overwrite the image URL with a new URL.</p>
</li>
<li><p>Click <strong>OK</strong>. You now see the preview of the new image and can set it as the default image.</p>
<p><a href="./media/cat3.png"><img src="./media/cat3.png" alt="Image preview in the New image dialog box"></a></p>
</li>
</ol>
<div class="NOTE">
<h5>Note</h5>
<p>After category image association, you must publish the channel and run the Channel job to help guarantee that the changes are published to the channel database.</p>
</div>
<h2 id="setting-up-images-to-appear-in-offline-mode-for-mpos">Setting up images to appear in Offline mode for MPOS</h2>
<p>MPOS can run in Online mode (when MPOS connected to Commerce Scale Unit) or Offline mode (when there is no Commerce Scale Unit or network connectivity, and transactions are stored in a local offline database). When MPOS runs in Offline mode, it can't get images from the external image server to display from Commerce Scale Unit, because connectivity has been lost. However, you can still set up images so that they are shown when MPOS runs in Offline mode.</p>
<h3 id="set-up-product-images-to-appear-in-offline-mode-for-mpos">Set up product images to appear in Offline mode for MPOS</h3>
<p>The product images that must be used in Offline mode can be set up by uploading the required physical image into the base product image.</p>
<ol>
<li><p>Click <strong>Product information management</strong> &gt; <strong>Products</strong> &gt; <strong>Products</strong>.</p>
</li>
<li><p>Select the product to set the offline image for.</p>
</li>
<li><p>Click <strong>Edit</strong>, and then click the arrow in the right corner to show the right pane.</p>
</li>
<li><p>On the <strong>Product image</strong> FastTab, click <strong>Change image</strong>, and upload the physical image to use for the selected product in Offline mode.</p>
</li>
<li><p>Save and close the page.</p>
</li>
<li><p>While MPOS is in Online mode, run the Catalog job in HQ, to make sure that the data is sent at least one time to the offline database.</p>
</li>
<li><p>Put MPOS into Offline mode. You should see the image that you uploaded for the specific product in HQ.</p>
<p><a href="./media/offline1.png"><img src="./media/offline1.png" alt="Product image in Offline mode"></a></p>
</li>
</ol>
<h3 id="set-up-catalog-category-employee-and-customer-images-to-appear-in-offline-mode-for-mpos">Set up catalog, category, employee, and customer images to appear in Offline mode for MPOS</h3>
<p>The catalog, category, employee, and customer images that must be used in Offline mode can be set up by adding the required image's destination link to the gallery and setting the image as the default image for the selected entity.</p>
<ol>
<li><p>Go to the catalog, and then, on the Action Pane, click <strong>Media</strong> &gt; <strong>Images</strong>.</p>
</li>
<li><p>Follow the steps in the <a href="#overwrite-from-the-entity-level-preview-page">Overwrite from the entity-level Preview page</a> section to add the external image URL.</p>
</li>
<li><p>Mark this image as the default image for the catalog by selecting the check box against the Image listed in the grid.</p>
</li>
<li><p>Run the Catalog job. This image will now be used as the Offline image for that catalog in MPOS.</p>
</li>
<li><p>Follow a similar process for other entities, such as Category, Employee, and Customer.</p>
<p><a href="./media/offline2.png"><img src="./media/offline2.png" alt="Offline image"></a></p>
</li>
</ol>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
