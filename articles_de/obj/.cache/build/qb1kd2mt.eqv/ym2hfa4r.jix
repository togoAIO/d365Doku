<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Formelsprache in der elektronischen Berichterstellung </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Formelsprache in der elektronischen Berichterstellung ">
    <meta name="generator" content="docfx 2.56.6.0">
    <meta name="description" content="In diesem Thema werden allgemeine Informationen zur Verwendung der Formelsprache bei der elektronischen Berichterstellung bereitgestellt.">
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="../../../commerce/TOC.html">
    <meta name="searchOption" content="noindex">
    
    
    <meta name="robots" content="NOINDEX, NOFOLLOW">
    <meta name="ms.search.form" content="ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner">
    <meta name="ms.search.scope" content="Core, Operations, CrossApp, ShowInHelp">
    <meta name="ms.search.region" content="Global">
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="row">
          <div class="col-sm-12">
            
<div class="sidenav hide-when-search"> 
  <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
  <div class="sidetoggle collapse" id="sidetoggle">
    <div id="sidetoc"></div>
  </div>
</div>
            <div class="row toc-offset">
              
              <div class="col-sm-12 col-md-9">
                <article class="article" id="_content" data-uid="">
<h1 id="electronic-reporting-formula-language">Formelsprache in der elektronischen Berichterstellung</h1>

[!include[banner](../includes/banner.md)]
<p>Die elektronische Berichterstellung (ER) bietet eine leistungsstarke Datenumwandlungserfahrung. Die Sprache, in der die erforderlichen Datenmanipulationen im <a href="general-electronic-reporting-formula-designer.html">ER-Formeldesigner</a> ausgedrückt werden, ähnelt der Formelsprache in Microsoft Excel.</p>
<h2 id="basic-syntax">Grundlegende Syntax</h2>
<p>Er-Ausdrücke können einzelne oder alle folgenden Elemente enthalten:</p>
<ul>
<li><a href="#Constants">Konstanten</a></li>
<li><a href="#Operators">Operatoren</a></li>
<li><a href="#References">Verweise</a></li>
<li><a href="#Paths">Pfade</a></li>
<li><a href="#Functions">Funktionen</a></li>
</ul>
<h2 id="konstanten"><a name=""></a><a name="Constants">Konstanten</a></h2>
<p>Wenn Sie Ausdrücke entwerfen, können Sie Text und numerische Konstanten (das heißt Werte, die nicht berechnet werden) verwenden. So wird beispielsweise der Ausdruck <code>VALUE (&quot;100&quot;) + 20</code> als numerische Konstante <strong>20</strong> verwendet und die Zeichenfolgenkonstante <strong>&quot;100&quot;</strong> gibt den numerischen Wert <strong>120</strong> zurück.</p>
<p>Der EB-Formeldesigner unterstützt Escapesequenzen. Daher können Sie eine Ausdruckszeichenfolge angeben, die anders behandelt werden soll. Beispielsweise gibt der Ausdruck <code>&quot;Leo Tolstoy &quot;&quot;War and Peace&quot;&quot; Volume 1&quot;</code> die Textzeichenfolge <strong>Leo Tolstoy &quot;War and Peace&quot; Volume 1</strong> zurück.</p>
<h2 id="operatoren"><a name=""></a><a name="Operators">Operatoren</a></h2>
<p>Die folgende Tabelle zeigt die arithmetischen Operatoren, die Sie verwenden können, um grundlegende mathematische Arbeitsgänge auszuführen, wie Addition, Subtraktion, Multiplikation und Division.</p>
<table>
<thead>
<tr>
<th>Bediener</th>
<th>Dies bedeutet</th>
<th>Beispiel</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>Hinzufügung</td>
<td><code>1+2</code></td>
</tr>
<tr>
<td>-</td>
<td>Subtraktion, Negation</td>
<td><code>5-2</code>, <code>-1</code></td>
</tr>
<tr>
<td>*</td>
<td>Multiplikation</td>
<td><code>7\*8</code></td>
</tr>
<tr>
<td>/</td>
<td>Geschäftsbereich</td>
<td><code>9/3</code></td>
</tr>
</tbody>
</table>
<p>In der folgenden Tabelle werden die Vergleichsoperatoren angezeigt, die unterstützt werden. Sie können diese Operatoren verwenden, um zwei Werte zu vergleichen.</p>
<table>
<thead>
<tr>
<th>Bediener</th>
<th>Dies bedeutet</th>
<th>Beispiel</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>Gleich</td>
<td><code>X=Y</code></td>
</tr>
<tr>
<td>&gt;</td>
<td>Größer als</td>
<td><code>X&gt;Y</code></td>
</tr>
<tr>
<td>&lt;</td>
<td>Kleiner als</td>
<td><code>X&lt;Y</code></td>
</tr>
<tr>
<td>&gt;=</td>
<td>Größer oder gleich</td>
<td><code>X&gt;=Y</code></td>
</tr>
<tr>
<td>&lt;=</td>
<td>Kleiner oder gleich</td>
<td><code>X&lt;=Y</code></td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>Ungleich</td>
<td><code>X&lt;&gt;Y</code></td>
</tr>
</tbody>
</table>
<p>Darüber hinaus können Sie auch ein kaufmännisches Und-Zeichen (&amp;) als Textverkettungsoperator verwenden. Auf diese Weise können Sie eine oder mehrere Textzeichenfolgen zu einem einzigen Stück Text verbinden oder verketten.</p>
<table>
<thead>
<tr>
<th>Bediener</th>
<th>Dies bedeutet</th>
<th>Beispiel</th>
</tr>
</thead>
<tbody>
<tr>
<td>&amp;</td>
<td>Verketten</td>
<td><code>&quot;Nothing to print:&quot; &amp; &quot; &quot; &amp; &quot;no records found&quot;</code></td>
</tr>
</tbody>
</table>
<h3 id="operator-precedence">Vorrangigkeit</h3>
<p>Die Reihenfolge, in der die Teile eines zusammengesetzten Ausdrucks ausgewertet werden, ist wichtig. Beispielsweise variiert das Ergebnis des Ausdrucks <code>1 + 4 / 2</code> , je nachdem, ob der Additionsvorgang oder der Divisionsvorgang zuerst erfolgt. Sie können Klammern verwenden, um explizit zu definieren, wie ein Ausdruck ausgewertet werden soll. Um beispielsweise anzugeben, dass die Addition zuerst ausgeführt werden soll, können Sie den vorhergehenden Ausdruck in <code>(1 + 4) / 2</code> ändern. Wenn Sie die Reihenfolge der Vorgänge, die in einem Ausdruck ausgeführt werden müssen, nicht explizit angeben, basiert die Reihenfolge auf der standardmäßigen Prioritätsreihenfolge, die den unterstützten Operatoren zugewiesen ist. Die folgende Tabelle zeigt die Prioritätsreihenfolge an, die jedem Operator zugewiesen ist. Operatoren, die eine höhere Rangfolge haben, (beispielsweise 7), werden vor Operatoren ausgewertet, die eine niedrigere Rangfolge haben, (beispielsweise 1).</p>
<table>
<thead>
<tr>
<th>Priorität</th>
<th>Operatoren</th>
<th>Syntax</th>
</tr>
</thead>
<tbody>
<tr>
<td>7</td>
<td>Gruppieren</td>
<td>( … )</td>
</tr>
<tr>
<td>6</td>
<td>Mitgliedszugriff</td>
<td>… . …</td>
</tr>
<tr>
<td>5</td>
<td>Funktionsaufrufe</td>
<td>… ( … )</td>
</tr>
<tr>
<td>4</td>
<td>Multiplikation</td>
<td>… * …<br>… / …</td>
</tr>
<tr>
<td>3</td>
<td>Ergänzung</td>
<td>… + …<br>… - …</td>
</tr>
<tr>
<td>2</td>
<td>Vergleich</td>
<td>… &lt; …<br>… &lt;= …<br>… =&gt; …<br>… &gt; …<br>… = …<br>… &lt;&gt; …</td>
</tr>
<tr>
<td>1</td>
<td>Trennung</td>
<td>… , …</td>
</tr>
</tbody>
</table>
<p>Wenn ein Ausdruck mehrere aufeinander folgende Operatoren enthält, die dieselbe Rangfolge haben, werden diese Arbeitsgänge von links nach rechts ausgewertet. Beispielsweise gibt der Ausdruck <code>1 + 6 / 2 \* 3 &gt; 5</code> <strong>true</strong> zurück. Es wird empfohlen, dass Sie Klammern verwenden, um die gewünschte Reihenfolge der Arbeitsgänge für Ausdrucke explizit anzugeben, damit Ausdrücke besser lesbar und verwaltbar sind.</p>
<h2 id="verweise"><a name=""></a><a name="References">Verweise</a></h2>
<p>Alle Datenquellen der aktuellen EB-Komponente, die während des Entwurfs eines Ausdrucks verfügbar sind, können als benannte Referenzen verwendet werden. Die aktuelle ER-Komponente kann entweder eine Modellzuordnung oder ein Format sein. Zum Beispiel beinhaltet die aktuelle ER-Datenmodellzuordnung die Datenquelle <strong>ReportingDate</strong>, die den Wert des Datentyps <em>DateTime</em> zurückgibt. Um diesen Wert im generierenden Dokument korrekt zu formatieren, können Sie auf die Datenquelle im Ausdruck als <code>DATETIMEFORMAT (ReportingDate, &quot;dd-MM-yyyy&quot;)</code> verweisen.</p>
<p>Allen Zeichen im Namen einer verweisenden Datenquelle, die keinen Buchstaben des Alphabets darstellen, muss ein einfaches Anführungszeichen (') vorausgehen. Wenn der Name einer verweisenden Datenquelle, der mindestens ein Symbol enthält, das keinen Buchstaben des Alphabets darstellt, muss der Name in einfache Anführungszeichen gesetzt werden. Diese nichtalphabetischen Symbole können Satzzeichen oder andere geschriebene Symbole sein. Im Folgenden finden Sie einige Beispiele hierfür:</p>
<ul>
<li>Auf die Datenquelle <strong>Aktuelles Datum und Zeit</strong> muss in einem EB-Ausdruck als <code>'Today''s date &amp; time'</code> verwiesen werden.</li>
<li>Auf die Methode <strong>name()</strong> der Datenquelle <strong>Kunden</strong> muss in einem EB-Ausdruck als <code>Customers.'name()'</code> verwiesen werden.</li>
</ul>
<p>Wenn die Methoden der Anwendungsdatenquellen Parameter besitzen, wird der folgende Syntax verwendet, um diese Methoden aufzurufen:</p>
<ul>
<li>Wenn die Methode <strong>isLanguageRTL</strong> der Datenquelle <strong>System</strong> einen Parameter <strong>EN-US</strong> des Datentyps <em>Zeichenfolge</em> hat, muss auf diese Methode in einem EB-Ausdruck als <code>System.isLanguageRTL(&quot;EN-US&quot;)</code> verwiesen werden.</li>
<li>Anführungszeichen sind nicht erforderlich, wenn ein Methodenname nur alphanumerische Symbole enthält. Sie sind jedoch für eine Methode einer Tabelle erforderlich, wenn der Name Klammern enthält.</li>
</ul>
<p>Wenn die Datenquelle <strong>System</strong> einer EB-Zuordnung hinzugefügt wird, die auf die Anwendungsklasse <strong>Global</strong> verweist, gibt der Ausdruck <code>System.isLanguageRTL(&quot;EN-US &quot;)</code> den <em>booleschen</em> Wert <strong>FALSE</strong> zurück. Der geänderte Ausdruck <code>System.isLanguageRTL(&quot;AR&quot;)</code> gibt den <em>booleschen</em> Wert <strong>TRUE</strong> zurück.</p>
<p>Sie können die Art und Weise eingrenzen, in der Werte an die Parameter dieses Methodentyps übergeben werden:</p>
<ul>
<li>Nur Konstanten können an andere Methoden dieses Typs übergeben werden. Die Werte der Konstanten werden zur Entwurfszeit definiert.</li>
<li>Nur primitive (grundlegende) Datentypen werden für Parameter dieses Typs unterstützt. Die primitiven Datentypen umfassen <em>ganze Zahlen</em>, <em>tatsächlich</em>, <em>boolesch</em> und <em>Zeichenfolge</em>.</li>
</ul>
<h2 id="pfade"><a name=""></a><a name="Paths">Pfade</a></h2>
<p>Wenn ein Ausdruck auf eine strukturierte Datenquelle verweist, können Sie die Pfadbeschreibung verwenden, um ein bestimmtes primitives Element dieser Datenquelle auszuwählen. Ein Punktzeichen (. ) wird verwendet, um einzelne Elemente einer strukturierten Datenquelle zu unterteilen. Zum Beispiel enthält die aktuelle EB-Datenmodellzuordnung die Datenquelle <strong>InvoiceTransactions</strong>, und diese Datenquelle gibt eine Liste von Datensätzen zurück. Die <strong>InvoiceTransactions</strong>-Datensatzstruktur enthält die Felder <strong>AmountDebit</strong> und <strong>AmountCredit</strong>, und diese beiden Felder geben numerische Werte zurück. Daher können Sie den folgenden Ausdruck entwerfen, um den Rechnungsbetrag zu berechnen: <code>InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit</code>. Die <code>InvoiceTransactions.AmountDebit</code>-Konstruktion in diesem Ausdruck ist der Pfad, der für den Zugriff auf das Feld <strong>AmountDebit</strong> der Datenquelle <strong>InvoiceTransactions</strong> des Typs <em>Datensatzliste</em> verwendet wird.</p>
<h3 id="relative-path">Relativer Pfad</h3>
<p>Wenn der Pfad einer strukturierten Datenquelle mit einem „at“ -Zeichen (@) beginnt, handelt es sich um einen relativen Pfad. Das „at“ -Zeichen wird anstelle des verbleibenden Teils des absoluten Pfads der verwendeten hierarchischen Baumstruktur angezeigt. Die folgende Abbildung zeigt ein Beispiel. Hier gibt der absolute Pfad <code>Ledger.'accountingCurrency()'</code> an, dass der Buchhaltungswährungswert aus der Datenquelle <strong>Sachkonto</strong> im Feld <strong>AccountingCurrency</strong> des Datenmodells eingetragen ist.</p>
<p><img src="media/ER-FormulaLanguage-AbsolutePath.png" alt="Beispiel für einen absoluten Pfad auf der Designer-Seite für ER-Modellzuordnungen"></p>
<p>Das Beispiel in der folgenden Abbildung zeigt, wie ein relativer Pfad verwendet wird. Der relative Pfad <code>@.AccountNum</code> zeigt an, dass das Feld <strong>AccountNum</strong> der Datenquelle <strong>Intrastat</strong> (die eine Ebene über dem Feld <strong>AccountNum</strong> im hierarchischen Baum des Datenmodells erscheint) verwendet wird, um die Debitoren- oder Kreditorenkontonummer in das Feld <strong>AccountNum</strong> des Datenmodells einzugeben.</p>
<p><img src="media/ER-FormulaLanguage-RelativePath1.png" alt="Beispiel für einen relativen Pfad auf der Designer-Seite für ER-Modellzuordnungen"></p>
<p>Der verbleibende Teil des absoluten Pfades wird auch im <a href="general-electronic-reporting-formula-designer.html">ER Formeleditor</a> angezeigt.</p>
<p><img src="media/ER-FormulaLanguage-RelativePath2.png" alt="Verbleibender Teil des absoluten Pfads auf der Designer-Seite für ER-Formeln"></p>
<p>Weitere Informationen finden Sie unter <a href="relative-path-data-bindings-er-models-format.html">Verwenden Sie einen relativen Pfad in den Datenbindungen von EB-Modellen und -Formaten</a>.</p>
<h2 id="funktionen"><a name=""></a><a name="Functions">Funktionen</a></h2>
<p>Integrierte ER-Funktionen können in ER-Ausdrücken verwendet werden. Alle Datenquellen des Ausdruckskontexts (die aktuelle EB-Modellzuordnung oder das EB-Format) können als Parameter von aufrufenden Funktionen in Übereinstimmung mit der Liste von Argumenten zum Aufrufen von Funktionen verwendet werden. Konstanten können auch als Parameter aufrufender Funktionen verwendet werden. Zum Beispiel enthält die aktuelle EB-Datenmodellzuordnung die Datenquelle <strong>InvoiceTransactions</strong>, und diese Datenquelle gibt eine Liste von Datensätzen zurück. Die <strong>InvoiceTransactions</strong>-Datensatzstruktur enthält die Felder <strong>AmountDebit</strong> und <strong>AmountCredit</strong>, und diese beiden Felder geben numerische Werte zurück. Um daher den Rechnungsbetrag zu berechnen, können Sie den folgenden Ausdruck entwerfen, der die integrierte EB-Rundungsfunktion verwendet: <code>ROUND (InvoiceTransactions.AmountDebit - InvoiceTransactions.AmountCredit, 2)</code>.</p>
<p>Beim Entwerfen von ER-Modellzuordnungen und ER-Berichten können Sie ER-Funktionen aus den folgenden Kategorien verwenden:</p>
<ul>
<li><a href="er-functions-category-datetime.html">Datums- und Zeitfunktionen</a></li>
<li><a href="er-functions-category-list.html">Listenfunktionen</a></li>
<li><a href="er-functions-category-logical.html">Logische Funktionen</a></li>
<li><a href="er-functions-category-mathematical.html">Rechenoperationen</a></li>
<li><a href="er-functions-category-record.html">Datensatzfunktionen</a></li>
<li><a href="er-functions-category-text.html">Textfunktionen</a></li>
<li><a href="er-functions-category-data-collection.html">Datensammlungsfunktionen</a></li>
<li><a href="er-functions-category-other.html">Andere (geschäftsdomänenspezifische) Funktionen</a></li>
<li><a href="er-functions-category-type-conversion.html">Funktionen zur Typenumrechnung</a></li>
</ul>
<h2 id="functions-list-extension">Listenerweiterung der Funktionen</h2>
<p>ER ermöglicht es Ihnen, die Liste von Funktionen zu verlängern, die in ER-Ausdrücken verwendet werden. Etwas technischer Aufwand ist erforderlich. Detaillierte Informationen finden Sie unter <a href="https://docs.microsoft.com/de-de/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/general-electronic-reporting-formulas-list-extension">Erweitern Sie die Liste der Funktionen der elektronischen Berichterstattung (ER) (This is an external link)</a>.</p>
<h2 id="compound-expressions">Zusammengesetzte Ausdrücke</h2>
<p>Sie können zusammengesetzte Ausdrücke erstellen, die Funktionen aus verschiedenen Kategorien verwenden, sofern die Datentypen übereinstimmen. Wenn Sie Funktionen zusammen verwenden, passen Sie den Datentyp der Ausgabe von einer Funktion an den Eingabedatentyp an, der von einer anderen Funktion benötigt wird. Um beispielsweise einen möglichen „list-is-empty“-Fehler bei der Bindung eines Feldes mit dem EB-Formatelement zu vermeiden, kombinieren Sie Funktionen aus der Kategorie <a href="er-functions-category-list.html">List</a> mit einer Funktion aus der Kategorie <a href="er-functions-category-logical.html">Logical</a>, wie das folgende Beispiel zeigt. Hier verwendet die Formel die <a href="er-functions-logical-if.html">IF</a>-Funktion, um zu testen, ob die <strong>IntrastatTotals</strong>-Liste leer ist, bevor der Wert der erforderlichen Aggregation aus dieser Liste zurückgegeben wird. Wenn die <strong>IntrastatTotals</strong>-Liste leer ist, gibt die Formel <strong>0</strong> (Null) zurück.</p>
<pre><code class="lang-vb">IF(ISEMPTY(IntrastatTotals), 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
</code></pre>
<h2 id="multiple-solutions">Mehrere Lösungen</h2>
<p>Häufig können Sie dasselbe Datenumwandlungsergebnis auf verschiedene Arten erhalten, indem Sie Funktionen aus verschiedenen Kategorien oder verschiedene Funktionen aus derselben Kategorie verwenden. Beispielsweise kann der vorherige Ausdruck auch mithilfe der <a href="er-functions-list-count.html">COUNT</a>-Funktion aus der <a href="er-functions-category-list.html">List</a>-Kategorie konfiguriert werden.</p>
<pre><code class="lang-vb">IF(COUNT (IntrastatTotals)=0, 0.0, IntrastatTotals.aggregated.'$AmountMSTRounded') 
</code></pre>
<h2 id="additional-resources">Zusätzliche Ressourcen</h2>
<p><a href="general-electronic-reporting.html">Überblick über die elektronische Berichterstellung</a></p>
<p><a href="general-electronic-reporting-formula-designer.html">Formeldesigner in der elektronischen Berichterstellung</a></p>
<p><a href="https://docs.microsoft.com/de-de/dynamics365/supply-chain/fin-ops-core/dev-itpro/analytics/general-electronic-reporting-formulas-list-extension">Die Liste der elektronischen Berichterstellungsfunktionen erweitern (This is an external link)</a></p>
</article>
              </div>
              
<div class="hidden-sm col-md-3" role="complementary">
  <div class="sideaffix">
    <div class="contribution">
      <ul class="nav">
        <li>
          <a href="https://github.com/MicrosoftDocs/Dynamics-365-Operations.de-de/blob/live/articles/fin-ops-core/dev-itpro/analytics/er-formula-language.md/#L1" class="contribution-link">Improve this Doc</a>
        </li>
      </ul>
    </div>
    <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
    <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
    </nav>
  </div>
</div>

            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright � 2015-2017 Microsoft<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
